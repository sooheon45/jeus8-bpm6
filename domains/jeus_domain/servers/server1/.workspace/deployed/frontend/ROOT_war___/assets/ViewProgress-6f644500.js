import{_,B as v,r as V,o as a,e as i,w as n,f as m,a as r,t as l,g as I,d as p,h as d,c,V as b,b as o,i as h,F as y,j as k,k as w,l as C,m as B,n as x,p as $,q as P}from"./index-7b37f28a.js";import{I as T}from"./InstanceProgress-0125616f.js";import"./ProcessDefinition-8367c465.js";import"./index-5e2cd834.js";import"./hooks.module-5c2ff6dd.js";import"./AppBaseCard.vue_vue_type_style_index_0_lang-764d25b8.js";import"./WorkItem-328dcf85.js";import"./DefaultForm-027b9cf9.js";import"./Chat-127d4b0d.js";import"./chat-icon-2658168f.js";import"./VSheet-beabeb52.js";import"./DynamicForm-9e8c830e.js";import"./customizer-3521e2ce.js";import"./VDatePicker-b7697b5c.js";import"./index-8f33dbb8.js";import"./OrganizationChart-bfb9b6f3.js";const f=v.createBackend(),D={components:{InstanceProgress:T},data:()=>({instance:null,tab:"progress",tabItems:[{value:"progress",label:"진행 상황",component:"InstanceProgress"}]}),watch:{$route:{deep:!0,async handler(e,s){e.params.instId&&e.params.instId!==s.params.instId&&await this.init()}},async tab(e,s){e!==s&&await this.init()}},created(){this.init()},async mounted(){},computed:{id(){return this.$route.params.instId},isCompleted(){return this.instance.status=="COMPLETED"},deletable(){if(this.instance){const e=localStorage.getItem("email");if(this.instance.current_user_ids&&this.instance.current_user_ids.length>0&&this.instance.current_user_ids.includes(e))return!0}return!1}},methods:{init(){var e=this;e.$try({context:e,action:async()=>{e.id&&(e.instance=await f.getInstance(e.id))}})},delay(e){return new Promise(s=>setTimeout(s,e))},deleteInstance(){var e=this;e.$try({context:e,action:async()=>{e.id&&(await f.deleteInstance(e.id),e.EventBus.emit("instances-updated"),e.$router.push("/todolist"))},successMsg:"인스턴스가 삭제되었습니다."})}}},E={class:"d-flex"},N={class:"px-3 py-3 pb-2 align-center"},F={class:"d-flex"},z={class:"text-h5 font-weight-semibold"},L={key:0,class:"font-weight-medium",style:{color:"gray","font-size":"14px"}},M={style:{height:"100%"}};function S(e,s,U,W,j,u){const g=V("Icons");return e.instance?(a(),i(m,{key:0,elevation:"10",style:{height:"calc(100vh - 20px)"}},{default:n(()=>[r("div",E,[r("div",N,[r("div",F,[r("h5",z,l(e.instance.name),1),e.instance.status?(a(),i(I,{key:0,size:"x-small",variant:"outlined",style:{margin:"2px 0px 0px 5px !important",display:"flex","align-items":"center"}},{default:n(()=>[p(l(e.instance.status),1)]),_:1})):d("",!0)]),e.instance.instanceId?(a(),c("div",L," ID: "+l(e.instance.instanceId),1)):d("",!0)]),u.deletable?(a(),i(b,{key:0,onClick:u.deleteInstance,variant:"plain",icon:"",class:"ml-auto"},{default:n(()=>[o(g,{icon:"trash"})]),_:1},8,["onClick"])):d("",!0)]),r("div",M,[o(k,{modelValue:e.tab,"onUpdate:modelValue":s[0]||(s[0]=t=>e.tab=t),"bg-color":"transparent",height:"40",color:"primary"},{default:n(()=>[(a(!0),c(y,null,h(e.tabItems,t=>(a(),i(x,{key:t.value,value:t.value},{default:n(()=>[p(l(t.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),o(w),o(B,{style:{height:"100%"},class:"pa-0"},{default:n(()=>[o(C,{style:{height:"100%"},modelValue:e.tab,"onUpdate:modelValue":s[1]||(s[1]=t=>e.tab=t)},{default:n(()=>[(a(!0),c(y,null,h(e.tabItems,t=>(a(),i($,{style:{height:"100%"},key:t.value,value:t.value},{default:n(()=>[(a(),i(P(t.component),{instance:e.instance},null,8,["instance"]))]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})])]),_:1})):(a(),i(m,{key:1}))}const ne=_(D,[["render",S]]);export{ne as default};
