import{bO as dr,bM as cr,_ as pr,r as fr,o as q,c as Me,a as ae,b as k,w as $,e as ht,Q as Pt,U as li,d as Vt,t as Z,R as jt,V as Lt,m as fn,W as Te,f as mn,h as he,F as mr,cg as gr,g as ui,D as Ee,H as di,aS as yr,P as wr,O as xr,a$ as br,X as vr}from"./index-7b37f28a.js";var ci={exports:{}};(function(p,m){(function(V,tt){p.exports=tt()})(dr,function(){function V(e){var t=0,n=e.children,i=n&&n.length;if(i)for(;--i>=0;)t+=n[i].value;else t=1;e.value=t}function tt(e,t){var n,i,r,s,o,a=new z(e),h=+e.value&&(a.value=e.value),l=[a];for(t==null&&(t=Ft);n=l.pop();)if(h&&(n.value=+n.data.value),(r=t(n.data))&&(o=r.length))for(n.children=new Array(o),s=o-1;s>=0;--s)l.push(i=n.children[s]=new z(r[s])),i.parent=n,i.depth=n.depth+1;return a.eachBefore(Yt)}function Ft(e){return e.children}function At(e){e.data=e.data.data}function Yt(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function z(e){this.data=e,this.depth=this.height=0,this.parent=null}z.prototype=tt.prototype={constructor:z,count:function(){return this.eachAfter(V)},each:function(e){var t,n,i,r,s=this,o=[s];do for(t=o.reverse(),o=[];s=t.pop();)if(e(s),n=s.children)for(i=0,r=n.length;i<r;++i)o.push(n[i]);while(o.length);return this},eachAfter:function(e){for(var t,n,i,r=this,s=[r],o=[];r=s.pop();)if(o.push(r),t=r.children)for(n=0,i=t.length;n<i;++n)s.push(t[n]);for(;r=o.pop();)e(r);return this},eachBefore:function(e){for(var t,n,i=this,r=[i];i=r.pop();)if(e(i),t=i.children)for(n=t.length-1;n>=0;--n)r.push(t[n]);return this},sum:function(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,i=t.children,r=i&&i.length;--r>=0;)n+=i[r].value;t.value=n})},sort:function(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})},path:function(e){for(var t=this,n=function(s,o){if(s===o)return s;var a=s.ancestors(),h=o.ancestors(),l=null;for(s=a.pop(),o=h.pop();s===o;)l=s,s=a.pop(),o=h.pop();return l}(t,e),i=[t];t!==n;)t=t.parent,i.push(t);for(var r=i.length;e!==n;)i.splice(r,0,e),e=e.parent;return i},ancestors:function(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function(){var e=[];return this.each(function(t){e.push(t)}),e},leaves:function(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e},links:function(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t},copy:function(){return tt(this).eachBefore(At)}};const W={name:"d3-flextree",version:"2.1.2",main:"build/d3-flextree.js",module:"index","jsnext:main":"index",author:{name:"Chris Maloney",url:"http://chrismaloney.org"},description:"Flexible tree layout algorithm that allows for variable node sizes.",keywords:["d3","d3-module","layout","tree","hierarchy","d3-hierarchy","plugin","d3-plugin","infovis","visualization","2d"],homepage:"https://github.com/klortho/d3-flextree",license:"WTFPL",repository:{type:"git",url:"https://github.com/klortho/d3-flextree.git"},scripts:{clean:"rm -rf build demo test","build:demo":"rollup -c --environment BUILD:demo","build:dev":"rollup -c --environment BUILD:dev","build:prod":"rollup -c --environment BUILD:prod","build:test":"rollup -c --environment BUILD:test",build:"rollup -c",lint:"eslint index.js src","test:main":"node test/bundle.js","test:browser":"node test/browser-tests.js",test:"npm-run-all test:*",prepare:"npm-run-all clean build lint test"},dependencies:{"d3-hierarchy":"^1.1.5"},devDependencies:{"babel-plugin-external-helpers":"^6.22.0","babel-preset-es2015-rollup":"^3.0.0",d3:"^4.13.0","d3-selection-multi":"^1.0.1",eslint:"^4.19.1",jsdom:"^11.6.2","npm-run-all":"^4.1.2",rollup:"^0.55.3","rollup-plugin-babel":"^2.7.1","rollup-plugin-commonjs":"^8.0.2","rollup-plugin-copy":"^0.2.3","rollup-plugin-json":"^2.3.0","rollup-plugin-node-resolve":"^3.0.2","rollup-plugin-uglify":"^3.0.0","uglify-es":"^3.3.9"}},{version:fi}=W,mi=Object.freeze({children:e=>e.children,nodeSize:e=>e.data.size,spacing:0});function gn(e){const t=Object.assign({},mi,e);function n(o){const a=t[o];return typeof a=="function"?a:()=>a}function i(o){const a=s(function(){const h=r(),l=n("nodeSize"),d=n("spacing");return class extends h{constructor(u){super(u),Object.assign(this,{x:0,y:0,relX:0,prelim:0,shift:0,change:0,lExt:this,lExtRelX:0,lThr:null,rExt:this,rExtRelX:0,rThr:null})}get size(){return l(this.data)}spacing(u){return d(this.data,u.data)}get x(){return this.data.x}set x(u){this.data.x=u}get y(){return this.data.y}set y(u){this.data.y=u}update(){return yn(this),wn(this),this}}}(),o,h=>h.children);return a.update(),a.data}function r(){const o=n("nodeSize"),a=n("spacing");return class pi extends tt.prototype.constructor{constructor(l){super(l)}copy(){const l=s(this.constructor,this,d=>d.children);return l.each(d=>d.data=d.data.data),l}get size(){return o(this)}spacing(l){return a(this,l)}get nodes(){return this.descendants()}get xSize(){return this.size[0]}get ySize(){return this.size[1]}get top(){return this.y}get bottom(){return this.y+this.ySize}get left(){return this.x-this.xSize/2}get right(){return this.x+this.xSize/2}get root(){const l=this.ancestors();return l[l.length-1]}get numChildren(){return this.hasChildren?this.children.length:0}get hasChildren(){return!this.noChildren}get noChildren(){return this.children===null}get firstChild(){return this.hasChildren?this.children[0]:null}get lastChild(){return this.hasChildren?this.children[this.numChildren-1]:null}get extents(){return(this.children||[]).reduce((l,d)=>pi.maxExtents(l,d.extents),this.nodeExtents)}get nodeExtents(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}static maxExtents(l,d){return{top:Math.min(l.top,d.top),bottom:Math.max(l.bottom,d.bottom),left:Math.min(l.left,d.left),right:Math.max(l.right,d.right)}}}}function s(o,a,h){const l=(d,u)=>{const c=new o(d);Object.assign(c,{parent:u,depth:u===null?0:u.depth+1,height:0,length:1});const f=h(d)||[];return c.children=f.length===0?null:f.map(w=>l(w,c)),c.children&&Object.assign(c,c.children.reduce((w,y)=>({height:Math.max(w.height,y.height+1),length:w.length+y.length}),c)),c};return l(a,null)}return Object.assign(i,{nodeSize(o){return arguments.length?(t.nodeSize=o,i):t.nodeSize},spacing(o){return arguments.length?(t.spacing=o,i):t.spacing},children(o){return arguments.length?(t.children=o,i):t.children},hierarchy(o,a){const h=a===void 0?t.children:a;return s(r(),o,h)},dump(o){const a=n("nodeSize"),h=l=>d=>{const u=l+"  ",c=l+"    ",{x:f,y:w}=d,y=a(d),M=d.children||[],X=M.length===0?" ":`,${u}children: [${c}${M.map(h(c)).join(c)}${u}],${l}`;return`{ size: [${y.join(", ")}],${u}x: ${f}, y: ${w}${X}},`};return h(`
`)(o)}}),i}gn.version=fi;const yn=(e,t=0)=>(e.y=t,(e.children||[]).reduce((n,i)=>{const[r,s]=n;yn(i,e.y+e.ySize);const o=(r===0?i.lExt:i.rExt).bottom;return r!==0&&yi(e,r,s),[r+1,Mi(o,r,s)]},[0,null]),gi(e),Si(e),e),wn=(e,t,n)=>{t===void 0&&(t=-e.relX-e.prelim,n=0);const i=t+e.relX;return e.relX=i+e.prelim-n,e.prelim=0,e.x=n+e.relX,(e.children||[]).forEach(r=>wn(r,i,e.x)),e},gi=e=>{(e.children||[]).reduce((t,n)=>{const[i,r]=t,s=i+n.shift,o=r+s+n.change;return n.relX+=o,[s,o]},[0,0])},yi=(e,t,n)=>{const i=e.children[t-1],r=e.children[t];let s=i,o=i.relX,a=r,h=r.relX,l=!0;for(;s&&a;){s.bottom>n.lowY&&(n=n.next);const d=o+s.prelim-(h+a.prelim)+s.xSize/2+a.xSize/2+s.spacing(a);(d>0||d<0&&l)&&(h+=d,wi(r,d),xi(e,t,n.index,d)),l=!1;const u=s.bottom,c=a.bottom;u<=c&&(s=vi(s),s&&(o+=s.relX)),u>=c&&(a=bi(a),a&&(h+=a.relX))}!s&&a?_i(e,t,a,h):s&&!a&&Ci(e,t,s,o)},wi=(e,t)=>{e.relX+=t,e.lExtRelX+=t,e.rExtRelX+=t},xi=(e,t,n,i)=>{const r=e.children[t],s=t-n;if(s>1){const o=i/s;e.children[n+1].shift+=o,r.shift-=o,r.change-=i-o}},bi=e=>e.hasChildren?e.firstChild:e.lThr,vi=e=>e.hasChildren?e.lastChild:e.rThr,_i=(e,t,n,i)=>{const r=e.firstChild,s=r.lExt,o=e.children[t];s.lThr=n;const a=i-n.relX-r.lExtRelX;s.relX+=a,s.prelim-=a,r.lExt=o.lExt,r.lExtRelX=o.lExtRelX},Ci=(e,t,n,i)=>{const r=e.children[t],s=r.rExt,o=e.children[t-1];s.rThr=n;const a=i-n.relX-r.rExtRelX;s.relX+=a,s.prelim-=a,r.rExt=o.rExt,r.rExtRelX=o.rExtRelX},Si=e=>{if(e.hasChildren){const t=e.firstChild,n=e.lastChild,i=(t.prelim+t.relX-t.xSize/2+n.relX+n.prelim+n.xSize/2)/2;Object.assign(e,{prelim:i,lExt:t.lExt,lExtRelX:t.lExtRelX,rExt:n.rExt,rExtRelX:n.rExtRelX})}},Mi=(e,t,n)=>{for(;n!==null&&e>=n.lowY;)n=n.next;return{lowY:e,index:t,next:n}},xn=(e,t,n)=>{const i=e.x,r=e.y,s=t.x,o=t.y,a=(n==null?void 0:n.x)??i,h=(n==null?void 0:n.y)??r,l=s-i<0?-1:1,d=o-r<0?-1:1;let u=Math.abs(s-i)/2<35?Math.abs(s-i)/2:35;u=Math.abs(o-r)/2<u?Math.abs(o-r)/2:u;const c=Math.abs(s-i)/2-u;return[`M ${a} ${h}`,`L ${a} ${r}`,`L ${i} ${r}`,`L ${i+c*l} ${r}`,`C ${i+c*l+u*l} ${r} ${i+c*l+u*l} ${r} ${i+c*l+u*l} ${r+u*d}`,`L ${i+c*l+u*l} ${o-u*d}`,`C ${i+c*l+u*l} ${o} ${i+c*l+u*l} ${o} ${s-c*l} ${o}`,`L ${s} ${o}`].join(" ")},bn=(e,t,n,i={sy:0})=>{const r=e.x;let s=e.y;const o=t.x,a=t.y,h=(n==null?void 0:n.x)??r,l=(n==null?void 0:n.y)??s,d=o-r<0?-1:1,u=a-s<0?-1:1;s+=i.sy;let c=Math.abs(o-r)/2<35?Math.abs(o-r)/2:35;c=Math.abs(a-s)/2<c?Math.abs(a-s)/2:c;const f=Math.abs(a-s)/2-c;return[`M ${h} ${l}`,`L ${r} ${l}`,`L ${r} ${s}`,`L ${r} ${s+f*u}`,`C  ${r} ${s+f*u+c*u} ${r} ${s+f*u+c*u} ${r+c*d} ${s+f*u+c*u}`,`L ${r+(Math.abs(o-r)-2*c)*d+c*d} ${s+f*u+c*u}`,`C  ${o} ${s+f*u+c*u} ${o} ${s+f*u+c*u} ${o} ${a-f*u}`,`L ${o} ${a}`].join(" ")},le={top:{containerX:({width:e})=>e/2,containerY:()=>0,edgeX:({node:e,nodeWidth:t})=>e.x+t/2,edgeY:({node:e})=>e.y,edgeMidX:({node:e,nodeWidth:t})=>e.x+t/2,edgeMidY:({node:e})=>e.y,edgeParentX:({parent:e,nodeWidth:t})=>e.x+t/2,edgeParentY:({parent:e,nodeHeight:t})=>e.y+t,nodeFlexSize:({nodeWidth:e,nodeHeight:t,siblingSpacing:n,childrenSpacing:i})=>[e+n,t+i],calculateEdge:bn,swap:e=>({x:e.left,y:e.top}),viewBoxDimensions:({rootNode:e,childrenSpacing:t,siblingSpacing:n})=>{if(!e)return{x:0,y:0,width:0,height:0};const{left:i,top:r,right:s,bottom:o}=e.extents,a=Math.abs(i)+Math.abs(s),h=Math.abs(r)+Math.abs(o);return{x:-(Math.abs(i)+n/2),y:-((e.ySize-t)/2),width:a,height:h}}},bottom:{containerX:({width:e})=>e/2,containerY:({height:e,nodeHeight:t})=>e-t-10,edgeX:({node:e,nodeWidth:t})=>e.x+t/2,edgeY:({node:e,nodeHeight:t})=>e.y+t,edgeMidX:({node:e,nodeWidth:t})=>e.x+t/2,edgeMidY:({node:e,nodeHeight:t})=>e.y+t,edgeParentX:({parent:e,nodeWidth:t})=>e.x+t/2,edgeParentY:({parent:e})=>e.y,nodeFlexSize:({nodeWidth:e,nodeHeight:t,siblingSpacing:n,childrenSpacing:i})=>[e+n,t+i],calculateEdge:bn,swap:e=>({...e,y:-e.y}),viewBoxDimensions:({rootNode:e,childrenSpacing:t,siblingSpacing:n})=>{if(!e)return{x:0,y:0,width:0,height:0};const{left:i,top:r,right:s,bottom:o}=e.extents,a=Math.abs(i)+Math.abs(s),h=Math.abs(r)+Math.abs(o);return{x:-(Math.abs(i)-(e.xSize-n)/2),y:-(h-e.ySize+t/2),width:a,height:h}}},left:{containerX:()=>10,containerY:({height:e})=>e/2,edgeX:({node:e})=>e.x,edgeY:({node:e,nodeHeight:t})=>e.y+t/2,edgeMidX:({node:e})=>e.x,edgeMidY:({node:e,nodeHeight:t})=>e.y+t/2,edgeParentX:({parent:e,nodeWidth:t})=>e.x+t,edgeParentY:({parent:e,nodeHeight:t})=>e.y+t/2,nodeFlexSize:({nodeWidth:e,nodeHeight:t,siblingSpacing:n,childrenSpacing:i})=>[t+n,e+i],calculateEdge:xn,swap:e=>({...e,x:e.y,y:e.x}),viewBoxDimensions:({rootNode:e,childrenSpacing:t,siblingSpacing:n})=>{if(!e)return{x:0,y:0,width:0,height:0};const{left:i,top:r,right:s,bottom:o}=e.extents,a=Math.abs(r)+Math.abs(o),h=Math.abs(i)+Math.abs(s);return{x:-(Math.abs(r)+t/2),y:-(Math.abs(i)-n),width:a,height:h}}},right:{containerX:({width:e,nodeWidth:t})=>e-t-10,containerY:({height:e})=>e/2,edgeX:({node:e,nodeWidth:t})=>e.x+t,edgeY:({node:e,nodeHeight:t})=>e.y+t/2,edgeMidX:({node:e,nodeWidth:t})=>e.x+t,edgeMidY:({node:e,nodeHeight:t})=>e.y+t/2,edgeParentX:({parent:e})=>e.x,edgeParentY:({parent:e,nodeHeight:t})=>e.y+t/2,nodeFlexSize:({nodeWidth:e,nodeHeight:t,siblingSpacing:n,childrenSpacing:i})=>[t+n,e+i],calculateEdge:xn,swap:e=>({...e,x:-e.y,y:e.x}),viewBoxDimensions:({rootNode:e,siblingSpacing:t,childrenSpacing:n})=>{if(!e)return{x:0,y:0,width:0,height:0};const{left:i,top:r,right:s,bottom:o}=e.extents,a=Math.abs(r)+Math.abs(o),h=Math.abs(i)+Math.abs(s);return{x:-(a-e.ySize+n/2),y:-(Math.abs(i)-t),width:a,height:h}}}},Ti=(e,t={})=>{for(const n in t)e==null||e.setAttribute(n,t[n])},Ae=(e,t,n,i)=>{var r;const s=t==null?void 0:t.data.options,o=(s==null?void 0:s.borderWidth)||i.borderWidth;let a=(s==null?void 0:s.borderColor)||i.borderColor,h=(s==null?void 0:s.nodeBGColor)||i.nodeBGColor;n&&(a=(s==null?void 0:s.borderColorHover)||i.borderColorHover,h=(s==null?void 0:s.nodeBGColorHover)||i.nodeBGColorHover);const l=document.querySelector(`[data-self='${t.data.id}'] foreignObject div`);if(l&&(l.style.borderWidth=`${o}px`,l.style.borderColor=a,l.style.backgroundColor=h),t.parent){const d=document.getElementById(`${t.data.id}-${(r=t.parent)==null?void 0:r.data.id}`);Ti(d,n?{"stroke-width":i.edgeWidth+1,stroke:i.edgeColorHover}:{"stroke-width":i.edgeWidth,stroke:i.edgeColor}),t.parent&&Ae(e,t.parent,n,i)}},Bt=(e={})=>{const t=[];for(const n in e){const i=`${Ei(n)}: ${e[n]};`;t.push(i)}return t.join(" ")},vn=(e="",t,n="")=>{const i=document.getElementById(e);t?i==null||i.setAttribute("style",t):i==null||i.removeAttribute("style"),(i==null?void 0:i.innerHTML.replaceAll("'",'"'))!==n.replaceAll("'",'"')&&i&&(i.innerHTML=n)},Ei=e=>e.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(t,n)=>(n?"-":"")+t.toLowerCase()),ke={},_n=[];function _(e,t){if(Array.isArray(e))for(const n of e)_(n,t);else if(typeof e!="object")Cn(Object.getOwnPropertyNames(t)),ke[e]=Object.assign(ke[e]||{},t);else for(const n in e)_(n,e[n])}function U(e){return ke[e]||{}}function Cn(e){_n.push(...e)}function Oe(e,t){let n;const i=e.length,r=[];for(n=0;n<i;n++)r.push(t(e[n]));return r}function ze(e){return e%360*Math.PI/180}function Sn(e){return e.charAt(0).toUpperCase()+e.slice(1)}function kt(e,t,n,i){return t!=null&&n!=null||(i=i||e.bbox(),t==null?t=i.width/i.height*n:n==null&&(n=i.height/i.width*t)),{width:t,height:n}}function Ne(e,t){const n=e.origin;let i=e.ox!=null?e.ox:e.originX!=null?e.originX:"center",r=e.oy!=null?e.oy:e.originY!=null?e.originY:"center";n!=null&&([i,r]=Array.isArray(n)?n:typeof n=="object"?[n.x,n.y]:[n,n]);const s=typeof i=="string",o=typeof r=="string";if(s||o){const{height:a,width:h,x:l,y:d}=t.bbox();s&&(i=i.includes("left")?l:i.includes("right")?l+h:l+h/2),o&&(r=r.includes("top")?d:r.includes("bottom")?d+a:d+a/2)}return[i,r]}const Ai=new Set(["desc","metadata","title"]),$e=e=>Ai.has(e.nodeName),Mn=(e,t,n={})=>{const i={...t};for(const r in i)i[r].valueOf()===n[r]&&delete i[r];Object.keys(i).length?e.node.setAttribute("data-svgjs",JSON.stringify(i)):(e.node.removeAttribute("data-svgjs"),e.node.removeAttribute("svgjs:data"))},Re="http://www.w3.org/2000/svg",Ie="http://www.w3.org/2000/xmlns/",Ht="http://www.w3.org/1999/xlink",E={window:typeof window>"u"?null:window,document:typeof document>"u"?null:document};class Xe{}const bt={},De="___SYMBOL___ROOT___";function Ut(e,t=Re){return E.document.createElementNS(t,e)}function Y(e,t=!1){if(e instanceof Xe)return e;if(typeof e=="object")return Pe(e);if(e==null)return new bt[De];if(typeof e=="string"&&e.charAt(0)!=="<")return Pe(E.document.querySelector(e));const n=t?E.document.createElement("div"):Ut("svg");return n.innerHTML=e,e=Pe(n.firstChild),n.removeChild(n.firstChild),e}function R(e,t){return t&&(t instanceof E.window.Node||t.ownerDocument&&t instanceof t.ownerDocument.defaultView.Node)?t:Ut(e)}function et(e){if(!e)return null;if(e.instance instanceof Xe)return e.instance;if(e.nodeName==="#document-fragment")return new bt.Fragment(e);let t=Sn(e.nodeName||"Dom");return t==="LinearGradient"||t==="RadialGradient"?t="Gradient":bt[t]||(t="Dom"),new bt[t](e)}let Pe=et;function A(e,t=e.name,n=!1){return bt[t]=e,n&&(bt[De]=e),Cn(Object.getOwnPropertyNames(e.prototype)),e}let ki=1e3;function Tn(e){return"Svgjs"+Sn(e)+ki++}function En(e){for(let t=e.children.length-1;t>=0;t--)En(e.children[t]);return e.id&&(e.id=Tn(e.nodeName)),e}function C(e,t){let n,i;for(i=(e=Array.isArray(e)?e:[e]).length-1;i>=0;i--)for(n in t)e[i].prototype[n]=t[n]}function I(e){return function(...t){const n=t[t.length-1];return!n||n.constructor!==Object||n instanceof Array?e.apply(this,t):e.apply(this,t.slice(0,-1)).attr(n)}}_("Dom",{siblings:function(){return this.parent().children()},position:function(){return this.parent().index(this)},next:function(){return this.siblings()[this.position()+1]},prev:function(){return this.siblings()[this.position()-1]},forward:function(){const e=this.position();return this.parent().add(this.remove(),e+1),this},backward:function(){const e=this.position();return this.parent().add(this.remove(),e?e-1:0),this},front:function(){return this.parent().add(this.remove()),this},back:function(){return this.parent().add(this.remove(),0),this},before:function(e){(e=Y(e)).remove();const t=this.position();return this.parent().add(e,t),this},after:function(e){(e=Y(e)).remove();const t=this.position();return this.parent().add(e,t+1),this},insertBefore:function(e){return(e=Y(e)).before(this),this},insertAfter:function(e){return(e=Y(e)).after(this),this}});const An=/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,Oi=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,zi=/rgb\((\d+),(\d+),(\d+)\)/,Ni=/(#[a-z_][a-z0-9\-_]*)/i,$i=/\)\s*,?\s*/,Ri=/\s/g,kn=/^#[a-f0-9]{3}$|^#[a-f0-9]{6}$/i,On=/^rgb\(/,zn=/^(\s+)?$/,Nn=/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ii=/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,lt=/[\s,]+/,je=/[MLHVCSQTAZ]/i;function Xi(e){const t=Math.round(e),n=Math.max(0,Math.min(255,t)).toString(16);return n.length===1?"0"+n:n}function Ot(e,t){for(let n=t.length;n--;)if(e[t[n]]==null)return!1;return!0}function Le(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}_("Dom",{classes:function(){const e=this.attr("class");return e==null?[]:e.trim().split(lt)},hasClass:function(e){return this.classes().indexOf(e)!==-1},addClass:function(e){if(!this.hasClass(e)){const t=this.classes();t.push(e),this.attr("class",t.join(" "))}return this},removeClass:function(e){return this.hasClass(e)&&this.attr("class",this.classes().filter(function(t){return t!==e}).join(" ")),this},toggleClass:function(e){return this.hasClass(e)?this.removeClass(e):this.addClass(e)}}),_("Dom",{css:function(e,t){const n={};if(arguments.length===0)return this.node.style.cssText.split(/\s*;\s*/).filter(function(i){return!!i.length}).forEach(function(i){const r=i.split(/\s*:\s*/);n[r[0]]=r[1]}),n;if(arguments.length<2){if(Array.isArray(e)){for(const i of e){const r=i;n[i]=this.node.style.getPropertyValue(r)}return n}if(typeof e=="string")return this.node.style.getPropertyValue(e);if(typeof e=="object")for(const i in e)this.node.style.setProperty(i,e[i]==null||zn.test(e[i])?"":e[i])}return arguments.length===2&&this.node.style.setProperty(e,t==null||zn.test(t)?"":t),this},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},visible:function(){return this.css("display")!=="none"}}),_("Dom",{data:function(e,t,n){if(e==null)return this.data(Oe(function(i,r){let s;const o=i.length,a=[];for(s=0;s<o;s++)r(i[s])&&a.push(i[s]);return a}(this.node.attributes,i=>i.nodeName.indexOf("data-")===0),i=>i.nodeName.slice(5)));if(e instanceof Array){const i={};for(const r of e)i[r]=this.data(r);return i}if(typeof e=="object")for(t in e)this.data(t,e[t]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+e))}catch{return this.attr("data-"+e)}else this.attr("data-"+e,t===null?null:n===!0||typeof t=="string"||typeof t=="number"?t:JSON.stringify(t));return this}}),_("Dom",{remember:function(e,t){if(typeof arguments[0]=="object")for(const n in e)this.remember(n,e[n]);else{if(arguments.length===1)return this.memory()[e];this.memory()[e]=t}return this},forget:function(){if(arguments.length===0)this._memory={};else for(let e=arguments.length-1;e>=0;e--)delete this.memory()[arguments[e]];return this},memory:function(){return this._memory=this._memory||{}}});class N{constructor(...t){this.init(...t)}static isColor(t){return t&&(t instanceof N||this.isRgb(t)||this.test(t))}static isRgb(t){return t&&typeof t.r=="number"&&typeof t.g=="number"&&typeof t.b=="number"}static random(t="vibrant",n){const{random:i,round:r,sin:s,PI:o}=Math;if(t==="vibrant"){const a=24*i()+57,h=38*i()+45,l=360*i();return new N(a,h,l,"lch")}if(t==="sine"){const a=r(80*s(2*o*(n=n??i())/.5+.01)+150),h=r(50*s(2*o*n/.5+4.6)+200),l=r(100*s(2*o*n/.5+2.3)+150);return new N(a,h,l)}if(t==="pastel"){const a=8*i()+86,h=17*i()+9,l=360*i();return new N(a,h,l,"lch")}if(t==="dark"){const a=10+10*i(),h=50*i()+86,l=360*i();return new N(a,h,l,"lch")}if(t==="rgb"){const a=255*i(),h=255*i(),l=255*i();return new N(a,h,l)}if(t==="lab"){const a=100*i(),h=256*i()-128,l=256*i()-128;return new N(a,h,l,"lab")}if(t==="grey"){const a=255*i();return new N(a,a,a)}throw new Error("Unsupported random color mode")}static test(t){return typeof t=="string"&&(kn.test(t)||On.test(t))}cmyk(){const{_a:t,_b:n,_c:i}=this.rgb(),[r,s,o]=[t,n,i].map(h=>h/255),a=Math.min(1-r,1-s,1-o);return a===1?new N(0,0,0,1,"cmyk"):new N((1-r-a)/(1-a),(1-s-a)/(1-a),(1-o-a)/(1-a),a,"cmyk")}hsl(){const{_a:t,_b:n,_c:i}=this.rgb(),[r,s,o]=[t,n,i].map(c=>c/255),a=Math.max(r,s,o),h=Math.min(r,s,o),l=(a+h)/2,d=a===h,u=a-h;return new N(360*(d?0:a===r?((s-o)/u+(s<o?6:0))/6:a===s?((o-r)/u+2)/6:a===o?((r-s)/u+4)/6:0),100*(d?0:l>.5?u/(2-a-h):u/(a+h)),100*l,"hsl")}init(t=0,n=0,i=0,r=0,s="rgb"){if(t=t||0,this.space)for(const c in this.space)delete this[this.space[c]];if(typeof t=="number")s=typeof r=="string"?r:s,r=typeof r=="string"?0:r,Object.assign(this,{_a:t,_b:n,_c:i,_d:r,space:s});else if(t instanceof Array)this.space=n||(typeof t[3]=="string"?t[3]:t[4])||"rgb",Object.assign(this,{_a:t[0],_b:t[1],_c:t[2],_d:t[3]||0});else if(t instanceof Object){const c=function(f,w){const y=Ot(f,"rgb")?{_a:f.r,_b:f.g,_c:f.b,_d:0,space:"rgb"}:Ot(f,"xyz")?{_a:f.x,_b:f.y,_c:f.z,_d:0,space:"xyz"}:Ot(f,"hsl")?{_a:f.h,_b:f.s,_c:f.l,_d:0,space:"hsl"}:Ot(f,"lab")?{_a:f.l,_b:f.a,_c:f.b,_d:0,space:"lab"}:Ot(f,"lch")?{_a:f.l,_b:f.c,_c:f.h,_d:0,space:"lch"}:Ot(f,"cmyk")?{_a:f.c,_b:f.m,_c:f.y,_d:f.k,space:"cmyk"}:{_a:0,_b:0,_c:0,space:"rgb"};return y.space=w||y.space,y}(t,n);Object.assign(this,c)}else if(typeof t=="string")if(On.test(t)){const c=t.replace(Ri,""),[f,w,y]=zi.exec(c).slice(1,4).map(M=>parseInt(M));Object.assign(this,{_a:f,_b:w,_c:y,_d:0,space:"rgb"})}else{if(!kn.test(t))throw Error("Unsupported string format, can't construct Color");{const c=M=>parseInt(M,16),[,f,w,y]=Oi.exec((o=t,o.length===4?["#",o.substring(1,2),o.substring(1,2),o.substring(2,3),o.substring(2,3),o.substring(3,4),o.substring(3,4)].join(""):o)).map(c);Object.assign(this,{_a:f,_b:w,_c:y,_d:0,space:"rgb"})}}var o;const{_a:a,_b:h,_c:l,_d:d}=this,u=this.space==="rgb"?{r:a,g:h,b:l}:this.space==="xyz"?{x:a,y:h,z:l}:this.space==="hsl"?{h:a,s:h,l}:this.space==="lab"?{l:a,a:h,b:l}:this.space==="lch"?{l:a,c:h,h:l}:this.space==="cmyk"?{c:a,m:h,y:l,k:d}:{};Object.assign(this,u)}lab(){const{x:t,y:n,z:i}=this.xyz();return new N(116*n-16,500*(t-n),200*(n-i),"lab")}lch(){const{l:t,a:n,b:i}=this.lab(),r=Math.sqrt(n**2+i**2);let s=180*Math.atan2(i,n)/Math.PI;return s<0&&(s*=-1,s=360-s),new N(t,r,s,"lch")}rgb(){if(this.space==="rgb")return this;if((t=this.space)==="lab"||t==="xyz"||t==="lch"){let{x:n,y:i,z:r}=this;if(this.space==="lab"||this.space==="lch"){let{l:f,a:w,b:y}=this;if(this.space==="lch"){const{c:ut,h:yt}=this,it=Math.PI/180;w=ut*Math.cos(it*yt),y=ut*Math.sin(it*yt)}const M=(f+16)/116,X=w/500+M,F=M-y/200,B=16/116,L=.008856,H=7.787;n=.95047*(X**3>L?X**3:(X-B)/H),i=1*(M**3>L?M**3:(M-B)/H),r=1.08883*(F**3>L?F**3:(F-B)/H)}const s=3.2406*n+-1.5372*i+-.4986*r,o=-.9689*n+1.8758*i+.0415*r,a=.0557*n+-.204*i+1.057*r,h=Math.pow,l=.0031308,d=s>l?1.055*h(s,1/2.4)-.055:12.92*s,u=o>l?1.055*h(o,1/2.4)-.055:12.92*o,c=a>l?1.055*h(a,1/2.4)-.055:12.92*a;return new N(255*d,255*u,255*c)}if(this.space==="hsl"){let{h:n,s:i,l:r}=this;if(n/=360,i/=100,r/=100,i===0)return r*=255,new N(r,r,r);const s=r<.5?r*(1+i):r+i-r*i,o=2*r-s,a=255*Le(o,s,n+1/3),h=255*Le(o,s,n),l=255*Le(o,s,n-1/3);return new N(a,h,l)}if(this.space==="cmyk"){const{c:n,m:i,y:r,k:s}=this,o=255*(1-Math.min(1,n*(1-s)+s)),a=255*(1-Math.min(1,i*(1-s)+s)),h=255*(1-Math.min(1,r*(1-s)+s));return new N(o,a,h)}return this;var t}toArray(){const{_a:t,_b:n,_c:i,_d:r,space:s}=this;return[t,n,i,r,s]}toHex(){const[t,n,i]=this._clamped().map(Xi);return`#${t}${n}${i}`}toRgb(){const[t,n,i]=this._clamped();return`rgb(${t},${n},${i})`}toString(){return this.toHex()}xyz(){const{_a:t,_b:n,_c:i}=this.rgb(),[r,s,o]=[t,n,i].map(M=>M/255),a=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,h=s>.04045?Math.pow((s+.055)/1.055,2.4):s/12.92,l=o>.04045?Math.pow((o+.055)/1.055,2.4):o/12.92,d=(.4124*a+.3576*h+.1805*l)/.95047,u=(.2126*a+.7152*h+.0722*l)/1,c=(.0193*a+.1192*h+.9505*l)/1.08883,f=d>.008856?Math.pow(d,1/3):7.787*d+16/116,w=u>.008856?Math.pow(u,1/3):7.787*u+16/116,y=c>.008856?Math.pow(c,1/3):7.787*c+16/116;return new N(f,w,y,"xyz")}_clamped(){const{_a:t,_b:n,_c:i}=this.rgb(),{max:r,min:s,round:o}=Math;return[t,n,i].map(a=>r(0,s(o(a),255)))}}class D{constructor(...t){this.init(...t)}clone(){return new D(this)}init(t,n){const s=Array.isArray(t)?{x:t[0],y:t[1]}:typeof t=="object"?{x:t.x,y:t.y}:{x:t,y:n};return this.x=s.x==null?0:s.x,this.y=s.y==null?0:s.y,this}toArray(){return[this.x,this.y]}transform(t){return this.clone().transformO(t)}transformO(t){g.isMatrixLike(t)||(t=new g(t));const{x:n,y:i}=this;return this.x=t.a*n+t.c*i+t.e,this.y=t.b*n+t.d*i+t.f,this}}function zt(e,t,n){return Math.abs(t-e)<1e-6}class g{constructor(...t){this.init(...t)}static formatTransforms(t){const n=t.flip==="both"||t.flip===!0,i=t.flip&&(n||t.flip==="x")?-1:1,r=t.flip&&(n||t.flip==="y")?-1:1,s=t.skew&&t.skew.length?t.skew[0]:isFinite(t.skew)?t.skew:isFinite(t.skewX)?t.skewX:0,o=t.skew&&t.skew.length?t.skew[1]:isFinite(t.skew)?t.skew:isFinite(t.skewY)?t.skewY:0,a=t.scale&&t.scale.length?t.scale[0]*i:isFinite(t.scale)?t.scale*i:isFinite(t.scaleX)?t.scaleX*i:i,h=t.scale&&t.scale.length?t.scale[1]*r:isFinite(t.scale)?t.scale*r:isFinite(t.scaleY)?t.scaleY*r:r,l=t.shear||0,d=t.rotate||t.theta||0,u=new D(t.origin||t.around||t.ox||t.originX,t.oy||t.originY),c=u.x,f=u.y,w=new D(t.position||t.px||t.positionX||NaN,t.py||t.positionY||NaN),y=w.x,M=w.y,X=new D(t.translate||t.tx||t.translateX,t.ty||t.translateY),F=X.x,B=X.y,L=new D(t.relative||t.rx||t.relativeX,t.ry||t.relativeY);return{scaleX:a,scaleY:h,skewX:s,skewY:o,shear:l,theta:d,rx:L.x,ry:L.y,tx:F,ty:B,ox:c,oy:f,px:y,py:M}}static fromArray(t){return{a:t[0],b:t[1],c:t[2],d:t[3],e:t[4],f:t[5]}}static isMatrixLike(t){return t.a!=null||t.b!=null||t.c!=null||t.d!=null||t.e!=null||t.f!=null}static matrixMultiply(t,n,i){const r=t.a*n.a+t.c*n.b,s=t.b*n.a+t.d*n.b,o=t.a*n.c+t.c*n.d,a=t.b*n.c+t.d*n.d,h=t.e+t.a*n.e+t.c*n.f,l=t.f+t.b*n.e+t.d*n.f;return i.a=r,i.b=s,i.c=o,i.d=a,i.e=h,i.f=l,i}around(t,n,i){return this.clone().aroundO(t,n,i)}aroundO(t,n,i){const r=t||0,s=n||0;return this.translateO(-r,-s).lmultiplyO(i).translateO(r,s)}clone(){return new g(this)}decompose(t=0,n=0){const i=this.a,r=this.b,s=this.c,o=this.d,a=this.e,h=this.f,l=i*o-r*s,d=l>0?1:-1,u=d*Math.sqrt(i*i+r*r),c=Math.atan2(d*r,d*i),f=180/Math.PI*c,w=Math.cos(c),y=Math.sin(c),M=(i*s+r*o)/l,X=s*u/(M*i-r)||o*u/(M*r+i);return{scaleX:u,scaleY:X,shear:M,rotate:f,translateX:a-t+t*w*u+n*(M*w*u-y*X),translateY:h-n+t*y*u+n*(M*y*u+w*X),originX:t,originY:n,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}equals(t){if(t===this)return!0;const n=new g(t);return zt(this.a,n.a)&&zt(this.b,n.b)&&zt(this.c,n.c)&&zt(this.d,n.d)&&zt(this.e,n.e)&&zt(this.f,n.f)}flip(t,n){return this.clone().flipO(t,n)}flipO(t,n){return t==="x"?this.scaleO(-1,1,n,0):t==="y"?this.scaleO(1,-1,0,n):this.scaleO(-1,-1,t,n||t)}init(t){const n=g.fromArray([1,0,0,1,0,0]);return t=t instanceof at?t.matrixify():typeof t=="string"?g.fromArray(t.split(lt).map(parseFloat)):Array.isArray(t)?g.fromArray(t):typeof t=="object"&&g.isMatrixLike(t)?t:typeof t=="object"?new g().transform(t):arguments.length===6?g.fromArray([].slice.call(arguments)):n,this.a=t.a!=null?t.a:n.a,this.b=t.b!=null?t.b:n.b,this.c=t.c!=null?t.c:n.c,this.d=t.d!=null?t.d:n.d,this.e=t.e!=null?t.e:n.e,this.f=t.f!=null?t.f:n.f,this}inverse(){return this.clone().inverseO()}inverseO(){const t=this.a,n=this.b,i=this.c,r=this.d,s=this.e,o=this.f,a=t*r-n*i;if(!a)throw new Error("Cannot invert "+this);const h=r/a,l=-n/a,d=-i/a,u=t/a,c=-(h*s+d*o),f=-(l*s+u*o);return this.a=h,this.b=l,this.c=d,this.d=u,this.e=c,this.f=f,this}lmultiply(t){return this.clone().lmultiplyO(t)}lmultiplyO(t){const n=t instanceof g?t:new g(t);return g.matrixMultiply(n,this,this)}multiply(t){return this.clone().multiplyO(t)}multiplyO(t){const n=t instanceof g?t:new g(t);return g.matrixMultiply(this,n,this)}rotate(t,n,i){return this.clone().rotateO(t,n,i)}rotateO(t,n=0,i=0){t=ze(t);const r=Math.cos(t),s=Math.sin(t),{a:o,b:a,c:h,d:l,e:d,f:u}=this;return this.a=o*r-a*s,this.b=a*r+o*s,this.c=h*r-l*s,this.d=l*r+h*s,this.e=d*r-u*s+i*s-n*r+n,this.f=u*r+d*s-n*s-i*r+i,this}scale(){return this.clone().scaleO(...arguments)}scaleO(t,n=t,i=0,r=0){arguments.length===3&&(r=i,i=n,n=t);const{a:s,b:o,c:a,d:h,e:l,f:d}=this;return this.a=s*t,this.b=o*n,this.c=a*t,this.d=h*n,this.e=l*t-i*t+i,this.f=d*n-r*n+r,this}shear(t,n,i){return this.clone().shearO(t,n,i)}shearO(t,n=0,i=0){const{a:r,b:s,c:o,d:a,e:h,f:l}=this;return this.a=r+s*t,this.c=o+a*t,this.e=h+l*t-i*t,this}skew(){return this.clone().skewO(...arguments)}skewO(t,n=t,i=0,r=0){arguments.length===3&&(r=i,i=n,n=t),t=ze(t),n=ze(n);const s=Math.tan(t),o=Math.tan(n),{a,b:h,c:l,d,e:u,f:c}=this;return this.a=a+h*s,this.b=h+a*o,this.c=l+d*s,this.d=d+l*o,this.e=u+c*s-r*s,this.f=c+u*o-i*o,this}skewX(t,n,i){return this.skew(t,0,n,i)}skewY(t,n,i){return this.skew(0,t,n,i)}toArray(){return[this.a,this.b,this.c,this.d,this.e,this.f]}toString(){return"matrix("+this.a+","+this.b+","+this.c+","+this.d+","+this.e+","+this.f+")"}transform(t){if(g.isMatrixLike(t))return new g(t).multiplyO(this);const n=g.formatTransforms(t),{x:i,y:r}=new D(n.ox,n.oy).transform(this),s=new g().translateO(n.rx,n.ry).lmultiplyO(this).translateO(-i,-r).scaleO(n.scaleX,n.scaleY).skewO(n.skewX,n.skewY).shearO(n.shear).rotateO(n.theta).translateO(i,r);if(isFinite(n.px)||isFinite(n.py)){const o=new D(i,r).transform(s),a=isFinite(n.px)?n.px-o.x:0,h=isFinite(n.py)?n.py-o.y:0;s.translateO(a,h)}return s.translateO(n.tx,n.ty),s}translate(t,n){return this.clone().translateO(t,n)}translateO(t,n){return this.e+=t||0,this.f+=n||0,this}valueOf(){return{a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}}function ft(){if(!ft.nodes){const e=Y().size(2,0);e.node.style.cssText=["opacity: 0","position: absolute","left: -100%","top: -100%","overflow: hidden"].join(";"),e.attr("focusable","false"),e.attr("aria-hidden","true");const t=e.path().node;ft.nodes={svg:e,path:t}}if(!ft.nodes.svg.node.parentNode){const e=E.document.body||E.document.documentElement;ft.nodes.svg.addTo(e)}return ft.nodes}function $n(e){return!(e.width||e.height||e.x||e.y)}A(g,"Matrix");class j{constructor(...t){this.init(...t)}addOffset(){return this.x+=E.window.pageXOffset,this.y+=E.window.pageYOffset,new j(this)}init(t){return t=typeof t=="string"?t.split(lt).map(parseFloat):Array.isArray(t)?t:typeof t=="object"?[t.left!=null?t.left:t.x,t.top!=null?t.top:t.y,t.width,t.height]:arguments.length===4?[].slice.call(arguments):[0,0,0,0],this.x=t[0]||0,this.y=t[1]||0,this.width=this.w=t[2]||0,this.height=this.h=t[3]||0,this.x2=this.x+this.w,this.y2=this.y+this.h,this.cx=this.x+this.w/2,this.cy=this.y+this.h/2,this}isNulled(){return $n(this)}merge(t){const n=Math.min(this.x,t.x),i=Math.min(this.y,t.y),r=Math.max(this.x+this.width,t.x+t.width)-n,s=Math.max(this.y+this.height,t.y+t.height)-i;return new j(n,i,r,s)}toArray(){return[this.x,this.y,this.width,this.height]}toString(){return this.x+" "+this.y+" "+this.width+" "+this.height}transform(t){t instanceof g||(t=new g(t));let n=1/0,i=-1/0,r=1/0,s=-1/0;return[new D(this.x,this.y),new D(this.x2,this.y),new D(this.x,this.y2),new D(this.x2,this.y2)].forEach(function(o){o=o.transform(t),n=Math.min(n,o.x),i=Math.max(i,o.x),r=Math.min(r,o.y),s=Math.max(s,o.y)}),new j(n,r,i-n,s-r)}}function Rn(e,t,n){let i;try{if(i=t(e.node),$n(i)&&(r=e.node)!==E.document&&!(E.document.documentElement.contains||function(s){for(;s.parentNode;)s=s.parentNode;return s===E.document}).call(E.document.documentElement,r))throw new Error("Element not in the dom")}catch{i=n(e)}var r;return i}_({viewbox:{viewbox(e,t,n,i){return e==null?new j(this.attr("viewBox")):this.attr("viewBox",new j(e,t,n,i))},zoom(e,t){let{width:n,height:i}=this.attr(["width","height"]);if((n||i)&&typeof n!="string"&&typeof i!="string"||(n=this.node.clientWidth,i=this.node.clientHeight),!n||!i)throw new Error("Impossible to get absolute width and height. Please provide an absolute width and height attribute on the zooming element");const r=this.viewbox(),s=n/r.width,o=i/r.height,a=Math.min(s,o);if(e==null)return a;let h=a/e;h===1/0&&(h=Number.MAX_SAFE_INTEGER/100),t=t||new D(n/2/s+r.x,i/2/o+r.y);const l=new j(r).transform(new g({scale:h,origin:t}));return this.viewbox(l)}}}),A(j,"Box");class vt extends Array{constructor(t=[],...n){if(super(t,...n),typeof t=="number")return this;this.length=0,this.push(...t)}}C([vt],{each(e,...t){return typeof e=="function"?this.map((n,i,r)=>e.call(n,n,i,r)):this.map(n=>n[e](...t))},toArray(){return Array.prototype.concat.apply([],this)}});const Di=["toArray","constructor","each"];function Nt(e,t){return new vt(Oe((t||E.document).querySelectorAll(e),function(n){return et(n)}))}vt.extend=function(e){e=e.reduce((t,n)=>(Di.includes(n)||n[0]==="_"||(n in Array.prototype&&(t["$"+n]=Array.prototype[n]),t[n]=function(...i){return this.each(n,...i)}),t),{}),C([vt],e)};let Pi=0;const In={};function Xn(e){let t=e.getEventHolder();return t===E.window&&(t=In),t.events||(t.events={}),t.events}function Ve(e){return e.getEventTarget()}function _t(e,t,n,i,r){const s=n.bind(i||e),o=Y(e),a=Xn(o),h=Ve(o);t=Array.isArray(t)?t:t.split(lt),n._svgjsListenerId||(n._svgjsListenerId=++Pi),t.forEach(function(l){const d=l.split(".")[0],u=l.split(".")[1]||"*";a[d]=a[d]||{},a[d][u]=a[d][u]||{},a[d][u][n._svgjsListenerId]=s,h.addEventListener(d,s,r||!1)})}function ot(e,t,n,i){const r=Y(e),s=Xn(r),o=Ve(r);(typeof n!="function"||(n=n._svgjsListenerId))&&(t=Array.isArray(t)?t:(t||"").split(lt)).forEach(function(a){const h=a&&a.split(".")[0],l=a&&a.split(".")[1];let d,u;if(n)s[h]&&s[h][l||"*"]&&(o.removeEventListener(h,s[h][l||"*"][n],i||!1),delete s[h][l||"*"][n]);else if(h&&l){if(s[h]&&s[h][l]){for(u in s[h][l])ot(o,[h,l].join("."),u);delete s[h][l]}}else if(l)for(a in s)for(d in s[a])l===d&&ot(o,[a,l].join("."));else if(h){if(s[h]){for(d in s[h])ot(o,[h,d].join("."));delete s[h]}}else{for(a in s)ot(o,a);(function(c){let f=c.getEventHolder();f===E.window&&(f=In),f.events&&(f.events={})})(r)}})}class Gt extends Xe{addEventListener(){}dispatch(t,n,i){return function(r,s,o,a){const h=Ve(r);return s instanceof E.window.Event||(s=new E.window.CustomEvent(s,{detail:o,cancelable:!0,...a})),h.dispatchEvent(s),s}(this,t,n,i)}dispatchEvent(t){const n=this.getEventHolder().events;if(!n)return!0;const i=n[t.type];for(const r in i)for(const s in i[r])i[r][s](t);return!t.defaultPrevented}fire(t,n,i){return this.dispatch(t,n,i),this}getEventHolder(){return this}getEventTarget(){return this}off(t,n,i){return ot(this,t,n,i),this}on(t,n,i,r){return _t(this,t,n,i,r),this}removeEventListener(){}}function Dn(){}A(Gt,"EventTarget");const Fe=400,ji=">",Li=0,Vi={"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","text-anchor":"start"};class $t extends Array{constructor(...t){super(...t),this.init(...t)}clone(){return new this.constructor(this)}init(t){return typeof t=="number"||(this.length=0,this.push(...this.parse(t))),this}parse(t=[]){return t instanceof Array?t:t.trim().split(lt).map(parseFloat)}toArray(){return Array.prototype.concat.apply([],this)}toSet(){return new Set(this)}toString(){return this.join(" ")}valueOf(){const t=[];return t.push(...this),t}}class v{constructor(...t){this.init(...t)}convert(t){return new v(this.value,t)}divide(t){return t=new v(t),new v(this/t,this.unit||t.unit)}init(t,n){return n=Array.isArray(t)?t[1]:n,t=Array.isArray(t)?t[0]:t,this.value=0,this.unit=n||"",typeof t=="number"?this.value=isNaN(t)?0:isFinite(t)?t:t<0?-34e37:34e37:typeof t=="string"?(n=t.match(An))&&(this.value=parseFloat(n[1]),n[5]==="%"?this.value/=100:n[5]==="s"&&(this.value*=1e3),this.unit=n[5]):t instanceof v&&(this.value=t.valueOf(),this.unit=t.unit),this}minus(t){return t=new v(t),new v(this-t,this.unit||t.unit)}plus(t){return t=new v(t),new v(this+t,this.unit||t.unit)}times(t){return t=new v(t),new v(this*t,this.unit||t.unit)}toArray(){return[this.value,this.unit]}toJSON(){return this.toString()}toString(){return(this.unit==="%"?~~(1e8*this.value)/1e6:this.unit==="s"?this.value/1e3:this.value)+this.unit}valueOf(){return this.value}}const Fi=new Set(["fill","stroke","color","bgcolor","stop-color","flood-color","lighting-color"]),Pn=[];class mt extends Gt{constructor(t,n){super(),this.node=t,this.type=t.nodeName,n&&t!==n&&this.attr(n)}add(t,n){return(t=Y(t)).removeNamespace&&this.node instanceof E.window.SVGElement&&t.removeNamespace(),n==null?this.node.appendChild(t.node):t.node!==this.node.childNodes[n]&&this.node.insertBefore(t.node,this.node.childNodes[n]),this}addTo(t,n){return Y(t).put(this,n)}children(){return new vt(Oe(this.node.children,function(t){return et(t)}))}clear(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this}clone(t=!0,n=!0){this.writeDataToDom();let i=this.node.cloneNode(t);return n&&(i=En(i)),new this.constructor(i)}each(t,n){const i=this.children();let r,s;for(r=0,s=i.length;r<s;r++)t.apply(i[r],[r,i]),n&&i[r].each(t,n);return this}element(t,n){return this.put(new mt(Ut(t),n))}first(){return et(this.node.firstChild)}get(t){return et(this.node.childNodes[t])}getEventHolder(){return this.node}getEventTarget(){return this.node}has(t){return this.index(t)>=0}html(t,n){return this.xml(t,n,"http://www.w3.org/1999/xhtml")}id(t){return t!==void 0||this.node.id||(this.node.id=Tn(this.type)),this.attr("id",t)}index(t){return[].slice.call(this.node.childNodes).indexOf(t.node)}last(){return et(this.node.lastChild)}matches(t){const n=this.node,i=n.matches||n.matchesSelector||n.msMatchesSelector||n.mozMatchesSelector||n.webkitMatchesSelector||n.oMatchesSelector||null;return i&&i.call(n,t)}parent(t){let n=this;if(!n.node.parentNode)return null;if(n=et(n.node.parentNode),!t)return n;do if(typeof t=="string"?n.matches(t):n instanceof t)return n;while(n=et(n.node.parentNode));return n}put(t,n){return t=Y(t),this.add(t,n),t}putIn(t,n){return Y(t).add(this,n)}remove(){return this.parent()&&this.parent().removeElement(this),this}removeElement(t){return this.node.removeChild(t.node),this}replace(t){return t=Y(t),this.node.parentNode&&this.node.parentNode.replaceChild(t.node,this.node),t}round(t=2,n=null){const i=10**t,r=this.attr(n);for(const s in r)typeof r[s]=="number"&&(r[s]=Math.round(r[s]*i)/i);return this.attr(r),this}svg(t,n){return this.xml(t,n,Re)}toString(){return this.id()}words(t){return this.node.textContent=t,this}wrap(t){const n=this.parent();if(!n)return this.addTo(t);const i=n.index(this);return n.put(t,i).put(this)}writeDataToDom(){return this.each(function(){this.writeDataToDom()}),this}xml(t,n,i){if(typeof t=="boolean"&&(i=n,n=t,t=null),t==null||typeof t=="function"){n=n==null||n,this.writeDataToDom();let a=this;if(t!=null){if(a=et(a.node.cloneNode(!0)),n){const h=t(a);if(a=h||a,h===!1)return""}a.each(function(){const h=t(this),l=h||this;h===!1?this.remove():h&&this!==l&&this.replace(l)},!0)}return n?a.node.outerHTML:a.node.innerHTML}n=n!=null&&n;const r=Ut("wrapper",i),s=E.document.createDocumentFragment();r.innerHTML=t;for(let a=r.children.length;a--;)s.appendChild(r.firstElementChild);const o=this.parent();return n?this.replace(s)&&o:this.add(s)}}C(mt,{attr:function(e,t,n){if(e==null){e={},t=this.node.attributes;for(const i of t)e[i.nodeName]=Nn.test(i.nodeValue)?parseFloat(i.nodeValue):i.nodeValue;return e}if(e instanceof Array)return e.reduce((i,r)=>(i[r]=this.attr(r),i),{});if(typeof e=="object"&&e.constructor===Object)for(t in e)this.attr(t,e[t]);else if(t===null)this.node.removeAttribute(e);else{if(t==null)return(t=this.node.getAttribute(e))==null?Vi[e]:Nn.test(t)?parseFloat(t):t;typeof(t=Pn.reduce((i,r)=>r(e,i,this),t))=="number"?t=new v(t):Fi.has(e)&&N.isColor(t)?t=new N(t):t.constructor===Array&&(t=new $t(t)),e==="leading"?this.leading&&this.leading(t):typeof n=="string"?this.node.setAttributeNS(n,e,t.toString()):this.node.setAttribute(e,t.toString()),!this.rebuild||e!=="font-size"&&e!=="x"||this.rebuild()}return this},find:function(e){return Nt(e,this.node)},findOne:function(e){return et(this.node.querySelector(e))}}),A(mt,"Dom");class at extends mt{constructor(t,n){super(t,n),this.dom={},this.node.instance=this,(t.hasAttribute("data-svgjs")||t.hasAttribute("svgjs:data"))&&this.setData(JSON.parse(t.getAttribute("data-svgjs"))??JSON.parse(t.getAttribute("svgjs:data"))??{})}center(t,n){return this.cx(t).cy(n)}cx(t){return t==null?this.x()+this.width()/2:this.x(t-this.width()/2)}cy(t){return t==null?this.y()+this.height()/2:this.y(t-this.height()/2)}defs(){const t=this.root();return t&&t.defs()}dmove(t,n){return this.dx(t).dy(n)}dx(t=0){return this.x(new v(t).plus(this.x()))}dy(t=0){return this.y(new v(t).plus(this.y()))}getEventHolder(){return this}height(t){return this.attr("height",t)}move(t,n){return this.x(t).y(n)}parents(t=this.root()){const n=typeof t=="string";n||(t=Y(t));const i=new vt;let r=this;for(;(r=r.parent())&&r.node!==E.document&&r.nodeName!=="#document-fragment"&&(i.push(r),n||r.node!==t.node)&&(!n||!r.matches(t));)if(r.node===this.root().node)return null;return i}reference(t){if(!(t=this.attr(t)))return null;const n=(t+"").match(Ni);return n?Y(n[1]):null}root(){const t=this.parent(bt[De]);return t&&t.root()}setData(t){return this.dom=t,this}size(t,n){const i=kt(this,t,n);return this.width(new v(i.width)).height(new v(i.height))}width(t){return this.attr("width",t)}writeDataToDom(){return Mn(this,this.dom),super.writeDataToDom()}x(t){return this.attr("x",t)}y(t){return this.attr("y",t)}}C(at,{bbox:function(){const e=Rn(this,t=>t.getBBox(),t=>{try{const n=t.clone().addTo(ft().svg).show(),i=n.node.getBBox();return n.remove(),i}catch(n){throw new Error(`Getting bbox of element "${t.node.nodeName}" is not possible: ${n.toString()}`)}});return new j(e)},rbox:function(e){const t=Rn(this,i=>i.getBoundingClientRect(),i=>{throw new Error(`Getting rbox of element "${i.node.nodeName}" is not possible`)}),n=new j(t);return e?n.transform(e.screenCTM().inverseO()):n.addOffset()},inside:function(e,t){const n=this.bbox();return e>n.x&&t>n.y&&e<n.x+n.width&&t<n.y+n.height},point:function(e,t){return new D(e,t).transformO(this.screenCTM().inverseO())},ctm:function(){return new g(this.node.getCTM())},screenCTM:function(){try{if(typeof this.isRoot=="function"&&!this.isRoot()){const e=this.rect(1,1),t=e.node.getScreenCTM();return e.remove(),new g(t)}return new g(this.node.getScreenCTM())}catch{return console.warn(`Cannot get CTM from SVG node ${this.node.nodeName}. Is the element rendered?`),new g}}}),A(at,"Element");const qt={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(e,t){return t==="color"?e:e+"-"+t}};["fill","stroke"].forEach(function(e){const t={};let n;t[e]=function(i){if(i===void 0)return this.attr(e);if(typeof i=="string"||i instanceof N||N.isRgb(i)||i instanceof at)this.attr(e,i);else for(n=qt[e].length-1;n>=0;n--)i[qt[e][n]]!=null&&this.attr(qt.prefix(e,qt[e][n]),i[qt[e][n]]);return this},_(["Element","Runner"],t)}),_(["Element","Runner"],{matrix:function(e,t,n,i,r,s){return e==null?new g(this):this.attr("transform",new g(e,t,n,i,r,s))},rotate:function(e,t,n){return this.transform({rotate:e,ox:t,oy:n},!0)},skew:function(e,t,n,i){return arguments.length===1||arguments.length===3?this.transform({skew:e,ox:t,oy:n},!0):this.transform({skew:[e,t],ox:n,oy:i},!0)},shear:function(e,t,n){return this.transform({shear:e,ox:t,oy:n},!0)},scale:function(e,t,n,i){return arguments.length===1||arguments.length===3?this.transform({scale:e,ox:t,oy:n},!0):this.transform({scale:[e,t],ox:n,oy:i},!0)},translate:function(e,t){return this.transform({translate:[e,t]},!0)},relative:function(e,t){return this.transform({relative:[e,t]},!0)},flip:function(e="both",t="center"){return"xybothtrue".indexOf(e)===-1&&(t=e,e="both"),this.transform({flip:e,origin:t},!0)},opacity:function(e){return this.attr("opacity",e)}}),_("radius",{radius:function(e,t=e){return(this._element||this).type==="radialGradient"?this.attr("r",new v(e)):this.rx(e).ry(t)}}),_("Path",{length:function(){return this.node.getTotalLength()},pointAt:function(e){return new D(this.node.getPointAtLength(e))}}),_(["Element","Runner"],{font:function(e,t){if(typeof e=="object"){for(t in e)this.font(t,e[t]);return this}return e==="leading"?this.leading(t):e==="anchor"?this.attr("text-anchor",t):e==="size"||e==="family"||e==="weight"||e==="stretch"||e==="variant"||e==="style"?this.attr("font-"+e,t):this.attr(e,t)}}),_("Element",["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","touchstart","touchmove","touchleave","touchend","touchcancel","contextmenu","wheel","pointerdown","pointermove","pointerup","pointerleave","pointercancel"].reduce(function(e,t){return e[t]=function(n){return n===null?this.off(t):this.on(t,n),this},e},{})),_("Element",{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split($i).slice(0,-1).map(function(e){const t=e.trim().split("(");return[t[0],t[1].split(lt).map(function(n){return parseFloat(n)})]}).reverse().reduce(function(e,t){return t[0]==="matrix"?e.lmultiply(g.fromArray(t[1])):e[t[0]].apply(e,t[1])},new g)},toParent:function(e,t){if(this===e)return this;if($e(this.node))return this.addTo(e,t);const n=this.screenCTM(),i=e.screenCTM().inverse();return this.addTo(e,t).untransform().transform(i.multiply(n)),this},toRoot:function(e){return this.toParent(this.root(),e)},transform:function(e,t){if(e==null||typeof e=="string"){const i=new g(this).decompose();return e==null?i:i[e]}g.isMatrixLike(e)||(e={...e,origin:Ne(e,this)});const n=new g(t===!0?this:t||!1).transform(e);return this.attr("transform",n)}});class G extends at{flatten(){return this.each(function(){if(this instanceof G)return this.flatten().ungroup()}),this}ungroup(t=this.parent(),n=t.index(this)){return n=n===-1?t.children().length:n,this.each(function(i,r){return r[r.length-i-1].toParent(t,n)}),this.remove()}}A(G,"Container");class Ye extends G{constructor(t,n=t){super(R("defs",t),n)}flatten(){return this}ungroup(){return this}}A(Ye,"Defs");class Q extends at{}function Be(e){return this.attr("rx",e)}function He(e){return this.attr("ry",e)}function jn(e){return e==null?this.cx()-this.rx():this.cx(e+this.rx())}function Ln(e){return e==null?this.cy()-this.ry():this.cy(e+this.ry())}function Vn(e){return this.attr("cx",e)}function Fn(e){return this.attr("cy",e)}function Yn(e){return e==null?2*this.rx():this.rx(new v(e).divide(2))}function Bn(e){return e==null?2*this.ry():this.ry(new v(e).divide(2))}A(Q,"Shape");const Yi=Object.freeze(Object.defineProperty({__proto__:null,cx:Vn,cy:Fn,height:Bn,rx:Be,ry:He,width:Yn,x:jn,y:Ln},Symbol.toStringTag,{value:"Module"}));class ue extends Q{constructor(t,n=t){super(R("ellipse",t),n)}size(t,n){const i=kt(this,t,n);return this.rx(new v(i.width).divide(2)).ry(new v(i.height).divide(2))}}C(ue,Yi),_("Container",{ellipse:I(function(e=0,t=e){return this.put(new ue).size(e,t).move(0,0)})}),A(ue,"Ellipse");class Hn extends mt{constructor(t=E.document.createDocumentFragment()){super(t)}xml(t,n,i){if(typeof t=="boolean"&&(i=n,n=t,t=null),t==null||typeof t=="function"){const r=new mt(Ut("wrapper",i));return r.add(this.node.cloneNode(!0)),r.xml(!1,i)}return super.xml(t,!1,i)}}function Un(e,t){return(this._element||this).type==="radialGradient"?this.attr({fx:new v(e),fy:new v(t)}):this.attr({x1:new v(e),y1:new v(t)})}function Gn(e,t){return(this._element||this).type==="radialGradient"?this.attr({cx:new v(e),cy:new v(t)}):this.attr({x2:new v(e),y2:new v(t)})}A(Hn,"Fragment");const Bi=Object.freeze(Object.defineProperty({__proto__:null,from:Un,to:Gn},Symbol.toStringTag,{value:"Module"}));class Zt extends G{constructor(t,n){super(R(t+"Gradient",typeof t=="string"?null:t),n)}attr(t,n,i){return t==="transform"&&(t="gradientTransform"),super.attr(t,n,i)}bbox(){return new j}targets(){return Nt("svg [fill*="+this.id()+"]")}toString(){return this.url()}update(t){return this.clear(),typeof t=="function"&&t.call(this,this),this}url(){return"url(#"+this.id()+")"}}C(Zt,Bi),_({Container:{gradient(...e){return this.defs().gradient(...e)}},Defs:{gradient:I(function(e,t){return this.put(new Zt(e)).update(t)})}}),A(Zt,"Gradient");class Wt extends G{constructor(t,n=t){super(R("pattern",t),n)}attr(t,n,i){return t==="transform"&&(t="patternTransform"),super.attr(t,n,i)}bbox(){return new j}targets(){return Nt("svg [fill*="+this.id()+"]")}toString(){return this.url()}update(t){return this.clear(),typeof t=="function"&&t.call(this,this),this}url(){return"url(#"+this.id()+")"}}_({Container:{pattern(...e){return this.defs().pattern(...e)}},Defs:{pattern:I(function(e,t,n){return this.put(new Wt).update(n).attr({x:0,y:0,width:e,height:t,patternUnits:"userSpaceOnUse"})})}}),A(Wt,"Pattern");let de=class extends Q{constructor(e,t=e){super(R("image",e),t)}load(e,t){if(!e)return this;const n=new E.window.Image;return _t(n,"load",function(i){const r=this.parent(Wt);this.width()===0&&this.height()===0&&this.size(n.width,n.height),r instanceof Wt&&r.width()===0&&r.height()===0&&r.size(this.width(),this.height()),typeof t=="function"&&t.call(this,i)},this),_t(n,"load error",function(){ot(n)}),this.attr("href",n.src=e,Ht)}};var qn;qn=function(e,t,n){return e!=="fill"&&e!=="stroke"||Ii.test(t)&&(t=n.root().defs().image(t)),t instanceof de&&(t=n.root().defs().pattern(0,0,i=>{i.add(t)})),t},Pn.push(qn),_({Container:{image:I(function(e,t){return this.put(new de).size(0,0).load(e,t)})}}),A(de,"Image");class gt extends $t{bbox(){let t=-1/0,n=-1/0,i=1/0,r=1/0;return this.forEach(function(s){t=Math.max(s[0],t),n=Math.max(s[1],n),i=Math.min(s[0],i),r=Math.min(s[1],r)}),new j(i,r,t-i,n-r)}move(t,n){const i=this.bbox();if(t-=i.x,n-=i.y,!isNaN(t)&&!isNaN(n))for(let r=this.length-1;r>=0;r--)this[r]=[this[r][0]+t,this[r][1]+n];return this}parse(t=[0,0]){const n=[];(t=t instanceof Array?Array.prototype.concat.apply([],t):t.trim().split(lt).map(parseFloat)).length%2!=0&&t.pop();for(let i=0,r=t.length;i<r;i+=2)n.push([t[i],t[i+1]]);return n}size(t,n){let i;const r=this.bbox();for(i=this.length-1;i>=0;i--)r.width&&(this[i][0]=(this[i][0]-r.x)*t/r.width+r.x),r.height&&(this[i][1]=(this[i][1]-r.y)*n/r.height+r.y);return this}toLine(){return{x1:this[0][0],y1:this[0][1],x2:this[1][0],y2:this[1][1]}}toString(){const t=[];for(let n=0,i=this.length;n<i;n++)t.push(this[n].join(","));return t.join(" ")}transform(t){return this.clone().transformO(t)}transformO(t){g.isMatrixLike(t)||(t=new g(t));for(let n=this.length;n--;){const[i,r]=this[n];this[n][0]=t.a*i+t.c*r+t.e,this[n][1]=t.b*i+t.d*r+t.f}return this}}const Ue=Object.freeze(Object.defineProperty({__proto__:null,MorphArray:gt,height:function(e){const t=this.bbox();return e==null?t.height:this.size(t.width,e)},width:function(e){const t=this.bbox();return e==null?t.width:this.size(e,t.height)},x:function(e){return e==null?this.bbox().x:this.move(e,this.bbox().y)},y:function(e){return e==null?this.bbox().y:this.move(this.bbox().x,e)}},Symbol.toStringTag,{value:"Module"}));class Qt extends Q{constructor(t,n=t){super(R("line",t),n)}array(){return new gt([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])}move(t,n){return this.attr(this.array().move(t,n).toLine())}plot(t,n,i,r){return t==null?this.array():(t=n!==void 0?{x1:t,y1:n,x2:i,y2:r}:new gt(t).toLine(),this.attr(t))}size(t,n){const i=kt(this,t,n);return this.attr(this.array().size(i.width,i.height).toLine())}}C(Qt,Ue),_({Container:{line:I(function(...e){return Qt.prototype.plot.apply(this.put(new Qt),e[0]!=null?e:[0,0,0,0])})}}),A(Qt,"Line");class ce extends G{constructor(t,n=t){super(R("marker",t),n)}height(t){return this.attr("markerHeight",t)}orient(t){return this.attr("orient",t)}ref(t,n){return this.attr("refX",t).attr("refY",n)}toString(){return"url(#"+this.id()+")"}update(t){return this.clear(),typeof t=="function"&&t.call(this,this),this}width(t){return this.attr("markerWidth",t)}}function Rt(e,t){return function(n){return n==null?this[e]:(this[e]=n,t&&t.call(this),this)}}_({Container:{marker(...e){return this.defs().marker(...e)}},Defs:{marker:I(function(e,t,n){return this.put(new ce).size(e,t).ref(e/2,t/2).viewbox(0,0,e,t).attr("orient","auto").update(n)})},marker:{marker(e,t,n,i){let r=["marker"];return e!=="all"&&r.push(e),r=r.join("-"),e=arguments[1]instanceof ce?arguments[1]:this.defs().marker(t,n,i),this.attr(r,e)}}}),A(ce,"Marker");const Hi={"-":function(e){return e},"<>":function(e){return-Math.cos(e*Math.PI)/2+.5},">":function(e){return Math.sin(e*Math.PI/2)},"<":function(e){return 1-Math.cos(e*Math.PI/2)},bezier:function(e,t,n,i){return function(r){return r<0?e>0?t/e*r:n>0?i/n*r:0:r>1?n<1?(1-i)/(1-n)*r+(i-n)/(1-n):e<1?(1-t)/(1-e)*r+(t-e)/(1-e):1:3*r*(1-r)**2*t+3*r**2*(1-r)*i+r**3}},steps:function(e,t="end"){t=t.split("-").reverse()[0];let n=e;return t==="none"?--n:t==="both"&&++n,(i,r=!1)=>{let s=Math.floor(i*e);const o=i*s%1==0;return t!=="start"&&t!=="both"||++s,r&&o&&--s,i>=0&&s<0&&(s=0),i<=1&&s>n&&(s=n),s/n}}};class Ge{done(){return!1}}class qe extends Ge{constructor(t=ji){super(),this.ease=Hi[t]||t}step(t,n,i){return typeof t!="number"?i<1?t:n:t+(n-t)*this.ease(i)}}class pe extends Ge{constructor(t){super(),this.stepper=t}done(t){return t.done}step(t,n,i,r){return this.stepper(t,n,i,r)}}function Zn(){const e=(this._duration||500)/1e3,t=this._overshoot||0,n=Math.PI,i=Math.log(t/100+1e-10),r=-i/Math.sqrt(n*n+i*i),s=3.9/(r*e);this.d=2*r*s,this.k=s*s}C(class extends pe{constructor(e=500,t=0){super(),this.duration(e).overshoot(t)}step(e,t,n,i){if(typeof e=="string")return e;if(i.done=n===1/0,n===1/0)return t;if(n===0)return e;n>100&&(n=16),n/=1e3;const r=i.velocity||0,s=-this.d*r-this.k*(e-t),o=e+r*n+s*n*n/2;return i.velocity=r+s*n,i.done=Math.abs(t-o)+Math.abs(r)<.002,i.done?t:o}},{duration:Rt("_duration",Zn),overshoot:Rt("_overshoot",Zn)}),C(class extends pe{constructor(e=.1,t=.01,n=0,i=1e3){super(),this.p(e).i(t).d(n).windup(i)}step(e,t,n,i){if(typeof e=="string")return e;if(i.done=n===1/0,n===1/0)return t;if(n===0)return e;const r=t-e;let s=(i.integral||0)+r*n;const o=(r-(i.error||0))/n,a=this._windup;return a!==!1&&(s=Math.max(-a,Math.min(s,a))),i.error=r,i.integral=s,i.done=Math.abs(r)<.001,i.done?t:e+(this.P*r+this.I*s+this.D*o)}},{windup:Rt("_windup"),p:Rt("P"),i:Rt("I"),d:Rt("D")});const Ui={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0},Ze={M:function(e,t,n){return t.x=n.x=e[0],t.y=n.y=e[1],["M",t.x,t.y]},L:function(e,t){return t.x=e[0],t.y=e[1],["L",e[0],e[1]]},H:function(e,t){return t.x=e[0],["H",e[0]]},V:function(e,t){return t.y=e[0],["V",e[0]]},C:function(e,t){return t.x=e[4],t.y=e[5],["C",e[0],e[1],e[2],e[3],e[4],e[5]]},S:function(e,t){return t.x=e[2],t.y=e[3],["S",e[0],e[1],e[2],e[3]]},Q:function(e,t){return t.x=e[2],t.y=e[3],["Q",e[0],e[1],e[2],e[3]]},T:function(e,t){return t.x=e[0],t.y=e[1],["T",e[0],e[1]]},Z:function(e,t,n){return t.x=n.x,t.y=n.y,["Z"]},A:function(e,t){return t.x=e[5],t.y=e[6],["A",e[0],e[1],e[2],e[3],e[4],e[5],e[6]]}},We="mlhvqtcsaz".split("");for(let e=0,t=We.length;e<t;++e)Ze[We[e]]=function(n){return function(i,r,s){if(n==="H")i[0]=i[0]+r.x;else if(n==="V")i[0]=i[0]+r.y;else if(n==="A")i[5]=i[5]+r.x,i[6]=i[6]+r.y;else for(let o=0,a=i.length;o<a;++o)i[o]=i[o]+(o%2?r.y:r.x);return Ze[n](i,r,s)}}(We[e].toUpperCase());function Qe(e){return e.segment.length&&e.segment.length-1===Ui[e.segment[0].toUpperCase()]}function Gi(e,t){e.inNumber&&Ct(e,!1);const n=je.test(t);if(n)e.segment=[t];else{const i=e.lastCommand,r=i.toLowerCase(),s=i===r;e.segment=[r==="m"?s?"l":"L":i]}return e.inSegment=!0,e.lastCommand=e.segment[0],n}function Ct(e,t){if(!e.inNumber)throw new Error("Parser Error");e.number&&e.segment.push(parseFloat(e.number)),e.inNumber=t,e.number="",e.pointSeen=!1,e.hasExponent=!1,Qe(e)&&Je(e)}function Je(e){e.inSegment=!1,e.absolute&&(e.segment=function(t){const n=t.segment[0];return Ze[n](t.segment.slice(1),t.p,t.p0)}(e)),e.segments.push(e.segment)}function qi(e){if(!e.segment.length)return!1;const t=e.segment[0].toUpperCase()==="A",n=e.segment.length;return t&&(n===4||n===5)}function Zi(e){return e.lastToken.toUpperCase()==="E"}const Wi=new Set([" ",",","	",`
`,"\r","\f"]);class St extends $t{bbox(){return ft().path.setAttribute("d",this.toString()),new j(ft.nodes.path.getBBox())}move(t,n){const i=this.bbox();if(t-=i.x,n-=i.y,!isNaN(t)&&!isNaN(n))for(let r,s=this.length-1;s>=0;s--)r=this[s][0],r==="M"||r==="L"||r==="T"?(this[s][1]+=t,this[s][2]+=n):r==="H"?this[s][1]+=t:r==="V"?this[s][1]+=n:r==="C"||r==="S"||r==="Q"?(this[s][1]+=t,this[s][2]+=n,this[s][3]+=t,this[s][4]+=n,r==="C"&&(this[s][5]+=t,this[s][6]+=n)):r==="A"&&(this[s][6]+=t,this[s][7]+=n);return this}parse(t="M0 0"){return Array.isArray(t)&&(t=Array.prototype.concat.apply([],t).toString()),function(n,i=!0){let r=0,s="";const o={segment:[],inNumber:!1,number:"",lastToken:"",inSegment:!1,segments:[],pointSeen:!1,hasExponent:!1,absolute:i,p0:new D,p:new D};for(;o.lastToken=s,s=n.charAt(r++);)if(o.inSegment||!Gi(o,s))if(s!==".")if(isNaN(parseInt(s)))if(Wi.has(s))o.inNumber&&Ct(o,!1);else if(s!=="-"&&s!=="+")if(s.toUpperCase()!=="E"){if(je.test(s)){if(o.inNumber)Ct(o,!1);else{if(!Qe(o))throw new Error("parser Error");Je(o)}--r}}else o.number+=s,o.hasExponent=!0;else{if(o.inNumber&&!Zi(o)){Ct(o,!1),--r;continue}o.number+=s,o.inNumber=!0}else{if(o.number==="0"||qi(o)){o.inNumber=!0,o.number=s,Ct(o,!0);continue}o.inNumber=!0,o.number+=s}else{if(o.pointSeen||o.hasExponent){Ct(o,!1),--r;continue}o.inNumber=!0,o.pointSeen=!0,o.number+=s}return o.inNumber&&Ct(o,!1),o.inSegment&&Qe(o)&&Je(o),o.segments}(t)}size(t,n){const i=this.bbox();let r,s;for(i.width=i.width===0?1:i.width,i.height=i.height===0?1:i.height,r=this.length-1;r>=0;r--)s=this[r][0],s==="M"||s==="L"||s==="T"?(this[r][1]=(this[r][1]-i.x)*t/i.width+i.x,this[r][2]=(this[r][2]-i.y)*n/i.height+i.y):s==="H"?this[r][1]=(this[r][1]-i.x)*t/i.width+i.x:s==="V"?this[r][1]=(this[r][1]-i.y)*n/i.height+i.y:s==="C"||s==="S"||s==="Q"?(this[r][1]=(this[r][1]-i.x)*t/i.width+i.x,this[r][2]=(this[r][2]-i.y)*n/i.height+i.y,this[r][3]=(this[r][3]-i.x)*t/i.width+i.x,this[r][4]=(this[r][4]-i.y)*n/i.height+i.y,s==="C"&&(this[r][5]=(this[r][5]-i.x)*t/i.width+i.x,this[r][6]=(this[r][6]-i.y)*n/i.height+i.y)):s==="A"&&(this[r][1]=this[r][1]*t/i.width,this[r][2]=this[r][2]*n/i.height,this[r][6]=(this[r][6]-i.x)*t/i.width+i.x,this[r][7]=(this[r][7]-i.y)*n/i.height+i.y);return this}toString(){return function(t){let n="";for(let i=0,r=t.length;i<r;i++)n+=t[i][0],t[i][1]!=null&&(n+=t[i][1],t[i][2]!=null&&(n+=" ",n+=t[i][2],t[i][3]!=null&&(n+=" ",n+=t[i][3],n+=" ",n+=t[i][4],t[i][5]!=null&&(n+=" ",n+=t[i][5],n+=" ",n+=t[i][6],t[i][7]!=null&&(n+=" ",n+=t[i][7])))));return n+" "}(this)}}const Wn=e=>{const t=typeof e;return t==="number"?v:t==="string"?N.isColor(e)?N:lt.test(e)?je.test(e)?St:$t:An.test(e)?v:Ke:tn.indexOf(e.constructor)>-1?e.constructor:Array.isArray(e)?$t:t==="object"?Kt:Ke};class Mt{constructor(t){this._stepper=t||new qe("-"),this._from=null,this._to=null,this._type=null,this._context=null,this._morphObj=null}at(t){return this._morphObj.morph(this._from,this._to,t,this._stepper,this._context)}done(){return this._context.map(this._stepper.done).reduce(function(t,n){return t&&n},!0)}from(t){return t==null?this._from:(this._from=this._set(t),this)}stepper(t){return t==null?this._stepper:(this._stepper=t,this)}to(t){return t==null?this._to:(this._to=this._set(t),this)}type(t){return t==null?this._type:(this._type=t,this)}_set(t){this._type||this.type(Wn(t));let n=new this._type(t);return this._type===N&&(n=this._to?n[this._to[4]]():this._from?n[this._from[4]]():n),this._type===Kt&&(n=this._to?n.align(this._to):this._from?n.align(this._from):n),n=n.toConsumable(),this._morphObj=this._morphObj||new this._type,this._context=this._context||Array.apply(null,Array(n.length)).map(Object).map(function(i){return i.done=!0,i}),n}}class Ke{constructor(...t){this.init(...t)}init(t){return t=Array.isArray(t)?t[0]:t,this.value=t,this}toArray(){return[this.value]}valueOf(){return this.value}}class Jt{constructor(...t){this.init(...t)}init(t){return Array.isArray(t)&&(t={scaleX:t[0],scaleY:t[1],shear:t[2],rotate:t[3],translateX:t[4],translateY:t[5],originX:t[6],originY:t[7]}),Object.assign(this,Jt.defaults,t),this}toArray(){const t=this;return[t.scaleX,t.scaleY,t.shear,t.rotate,t.translateX,t.translateY,t.originX,t.originY]}}Jt.defaults={scaleX:1,scaleY:1,shear:0,rotate:0,translateX:0,translateY:0,originX:0,originY:0};const Qi=(e,t)=>e[0]<t[0]?-1:e[0]>t[0]?1:0;class Kt{constructor(...t){this.init(...t)}align(t){const n=this.values;for(let i=0,r=n.length;i<r;++i){if(n[i+1]===t[i+1]){if(n[i+1]===N&&t[i+7]!==n[i+7]){const a=t[i+7],h=new N(this.values.splice(i+3,5))[a]().toArray();this.values.splice(i+3,0,...h)}i+=n[i+2]+2;continue}if(!t[i+1])return this;const s=new t[i+1]().toArray(),o=n[i+2]+3;n.splice(i,o,t[i],t[i+1],t[i+2],...s),i+=n[i+2]+2}return this}init(t){if(this.values=[],Array.isArray(t))return void(this.values=t.slice());t=t||{};const n=[];for(const i in t){const r=Wn(t[i]),s=new r(t[i]).toArray();n.push([i,r,s.length,...s])}return n.sort(Qi),this.values=n.reduce((i,r)=>i.concat(r),[]),this}toArray(){return this.values}valueOf(){const t={},n=this.values;for(;n.length;){const i=n.shift(),r=n.shift(),s=n.shift(),o=n.splice(0,s);t[i]=new r(o)}return t}}const tn=[Ke,Jt,Kt];class Tt extends Q{constructor(t,n=t){super(R("path",t),n)}array(){return this._array||(this._array=new St(this.attr("d")))}clear(){return delete this._array,this}height(t){return t==null?this.bbox().height:this.size(this.bbox().width,t)}move(t,n){return this.attr("d",this.array().move(t,n))}plot(t){return t==null?this.array():this.clear().attr("d",typeof t=="string"?t:this._array=new St(t))}size(t,n){const i=kt(this,t,n);return this.attr("d",this.array().size(i.width,i.height))}width(t){return t==null?this.bbox().width:this.size(t,this.bbox().height)}x(t){return t==null?this.bbox().x:this.move(t,this.bbox().y)}y(t){return t==null?this.bbox().y:this.move(this.bbox().x,t)}}Tt.prototype.MorphArray=St,_({Container:{path:I(function(e){return this.put(new Tt).plot(e||new St)})}}),A(Tt,"Path");const Qn=Object.freeze(Object.defineProperty({__proto__:null,array:function(){return this._array||(this._array=new gt(this.attr("points")))},clear:function(){return delete this._array,this},move:function(e,t){return this.attr("points",this.array().move(e,t))},plot:function(e){return e==null?this.array():this.clear().attr("points",typeof e=="string"?e:this._array=new gt(e))},size:function(e,t){const n=kt(this,e,t);return this.attr("points",this.array().size(n.width,n.height))}},Symbol.toStringTag,{value:"Module"}));class te extends Q{constructor(t,n=t){super(R("polygon",t),n)}}_({Container:{polygon:I(function(e){return this.put(new te).plot(e||new gt)})}}),C(te,Ue),C(te,Qn),A(te,"Polygon");class ee extends Q{constructor(t,n=t){super(R("polyline",t),n)}}_({Container:{polyline:I(function(e){return this.put(new ee).plot(e||new gt)})}}),C(ee,Ue),C(ee,Qn),A(ee,"Polyline");class ne extends Q{constructor(t,n=t){super(R("rect",t),n)}}C(ne,{rx:Be,ry:He}),_({Container:{rect:I(function(e,t){return this.put(new ne).size(e,t)})}}),A(ne,"Rect");class en{constructor(){this._first=null,this._last=null}first(){return this._first&&this._first.value}last(){return this._last&&this._last.value}push(t){const n=t.next!==void 0?t:{value:t,next:null,prev:null};return this._last?(n.prev=this._last,this._last.next=n,this._last=n):(this._last=n,this._first=n),n}remove(t){t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),t===this._last&&(this._last=t.prev),t===this._first&&(this._first=t.next),t.prev=null,t.next=null}shift(){const t=this._first;return t?(this._first=t.next,this._first&&(this._first.prev=null),this._last=this._first?this._last:null,t.value):null}}const O={nextDraw:null,frames:new en,timeouts:new en,immediates:new en,timer:()=>E.window.performance||E.window.Date,transforms:[],frame(e){const t=O.frames.push({run:e});return O.nextDraw===null&&(O.nextDraw=E.window.requestAnimationFrame(O._draw)),t},timeout(e,t){t=t||0;const n=O.timer().now()+t,i=O.timeouts.push({run:e,time:n});return O.nextDraw===null&&(O.nextDraw=E.window.requestAnimationFrame(O._draw)),i},immediate(e){const t=O.immediates.push(e);return O.nextDraw===null&&(O.nextDraw=E.window.requestAnimationFrame(O._draw)),t},cancelFrame(e){e!=null&&O.frames.remove(e)},clearTimeout(e){e!=null&&O.timeouts.remove(e)},cancelImmediate(e){e!=null&&O.immediates.remove(e)},_draw(e){let t=null;const n=O.timeouts.last();for(;(t=O.timeouts.shift())&&(e>=t.time?t.run():O.timeouts.push(t),t!==n););let i=null;const r=O.frames.last();for(;i!==r&&(i=O.frames.shift());)i.run(e);let s=null;for(;s=O.immediates.shift();)s();O.nextDraw=O.timeouts.first()||O.frames.first()?E.window.requestAnimationFrame(O._draw):null}},Ji=function(e){const t=e.start,n=e.runner.duration();return{start:t,duration:n,end:t+n,runner:e.runner}},Ki=function(){const e=E.window;return(e.performance||e.Date).now()};class Jn extends Gt{constructor(t=Ki){super(),this._timeSource=t,this.terminate()}active(){return!!this._nextFrame}finish(){return this.time(this.getEndTimeOfTimeline()+1),this.pause()}getEndTime(){const t=this.getLastRunnerInfo(),n=t?t.runner.duration():0;return(t?t.start:this._time)+n}getEndTimeOfTimeline(){const t=this._runners.map(n=>n.start+n.runner.duration());return Math.max(0,...t)}getLastRunnerInfo(){return this.getRunnerInfoById(this._lastRunnerId)}getRunnerInfoById(t){return this._runners[this._runnerIds.indexOf(t)]||null}pause(){return this._paused=!0,this._continue()}persist(t){return t==null?this._persist:(this._persist=t,this)}play(){return this._paused=!1,this.updateTime()._continue()}reverse(t){const n=this.speed();if(t==null)return this.speed(-n);const i=Math.abs(n);return this.speed(t?-i:i)}schedule(t,n,i){if(t==null)return this._runners.map(Ji);let r=0;const s=this.getEndTime();if(n=n||0,i==null||i==="last"||i==="after")r=s;else if(i==="absolute"||i==="start")r=n,n=0;else if(i==="now")r=this._time;else if(i==="relative"){const h=this.getRunnerInfoById(t.id);h&&(r=h.start+n,n=0)}else{if(i!=="with-last")throw new Error('Invalid value for the "when" parameter');{const h=this.getLastRunnerInfo();r=h?h.start:this._time}}t.unschedule(),t.timeline(this);const o=t.persist(),a={persist:o===null?this._persist:o,start:r+n,runner:t};return this._lastRunnerId=t.id,this._runners.push(a),this._runners.sort((h,l)=>h.start-l.start),this._runnerIds=this._runners.map(h=>h.runner.id),this.updateTime()._continue(),this}seek(t){return this.time(this._time+t)}source(t){return t==null?this._timeSource:(this._timeSource=t,this)}speed(t){return t==null?this._speed:(this._speed=t,this)}stop(){return this.time(0),this.pause()}time(t){return t==null?this._time:(this._time=t,this._continue(!0))}unschedule(t){const n=this._runnerIds.indexOf(t.id);return n<0||(this._runners.splice(n,1),this._runnerIds.splice(n,1),t.timeline(null)),this}updateTime(){return this.active()||(this._lastSourceTime=this._timeSource()),this}_continue(t=!1){return O.cancelFrame(this._nextFrame),this._nextFrame=null,t?this._stepImmediate():(this._paused||(this._nextFrame=O.frame(this._step)),this)}_stepFn(t=!1){const n=this._timeSource();let i=n-this._lastSourceTime;t&&(i=0);const r=this._speed*i+(this._time-this._lastStepTime);this._lastSourceTime=n,t||(this._time+=r,this._time=this._time<0?0:this._time),this._lastStepTime=this._time,this.fire("time",this._time);for(let o=this._runners.length;o--;){const a=this._runners[o],h=a.runner;this._time-a.start<=0&&h.reset()}let s=!1;for(let o=0,a=this._runners.length;o<a;o++){const h=this._runners[o],l=h.runner;let d=r;const u=this._time-h.start;if(u<=0){s=!0;continue}u<d&&(d=u),l.active()&&(l.step(d).done?h.persist!==!0&&l.duration()-l.time()+this._time+h.persist<this._time&&(l.unschedule(),--o,--a):s=!0)}return s&&!(this._speed<0&&this._time===0)||this._runnerIds.length&&this._speed<0&&this._time>0?this._continue():(this.pause(),this.fire("finished")),this}terminate(){this._startTime=0,this._speed=1,this._persist=0,this._nextFrame=null,this._paused=!0,this._runners=[],this._runnerIds=[],this._lastRunnerId=-1,this._time=0,this._lastSourceTime=0,this._lastStepTime=0,this._step=this._stepFn.bind(this,!1),this._stepImmediate=this._stepFn.bind(this,!0)}}_({Element:{timeline:function(e){return e==null?(this._timeline=this._timeline||new Jn,this._timeline):(this._timeline=e,this)}}});class J extends Gt{constructor(t){super(),this.id=J.id++,t=typeof(t=t??Fe)=="function"?new pe(t):t,this._element=null,this._timeline=null,this.done=!1,this._queue=[],this._duration=typeof t=="number"&&t,this._isDeclarative=t instanceof pe,this._stepper=this._isDeclarative?t:new qe,this._history={},this.enabled=!0,this._time=0,this._lastTime=0,this._reseted=!0,this.transforms=new g,this.transformId=1,this._haveReversed=!1,this._reverse=!1,this._loopsDone=0,this._swing=!1,this._wait=0,this._times=1,this._frameId=null,this._persist=!!this._isDeclarative||null}static sanitise(t,n,i){let r=1,s=!1,o=0;return n=n??Li,i=i||"last",typeof(t=t??Fe)!="object"||t instanceof Ge||(n=t.delay??n,i=t.when??i,s=t.swing||s,r=t.times??r,o=t.wait??o,t=t.duration??Fe),{duration:t,delay:n,swing:s,times:r,wait:o,when:i}}active(t){return t==null?this.enabled:(this.enabled=t,this)}addTransform(t){return this.transforms.lmultiplyO(t),this}after(t){return this.on("finished",t)}animate(t,n,i){const r=J.sanitise(t,n,i),s=new J(r.duration);return this._timeline&&s.timeline(this._timeline),this._element&&s.element(this._element),s.loop(r).schedule(r.delay,r.when)}clearTransform(){return this.transforms=new g,this}clearTransformsFromQueue(){this.done&&this._timeline&&this._timeline._runnerIds.includes(this.id)||(this._queue=this._queue.filter(t=>!t.isTransform))}delay(t){return this.animate(0,t)}duration(){return this._times*(this._wait+this._duration)-this._wait}during(t){return this.queue(null,t)}ease(t){return this._stepper=new qe(t),this}element(t){return t==null?this._element:(this._element=t,t._prepareRunner(),this)}finish(){return this.step(1/0)}loop(t,n,i){return typeof t=="object"&&(n=t.swing,i=t.wait,t=t.times),this._times=t||1/0,this._swing=n||!1,this._wait=i||0,this._times===!0&&(this._times=1/0),this}loops(t){const n=this._duration+this._wait;if(t==null){const s=Math.floor(this._time/n),o=(this._time-s*n)/this._duration;return Math.min(s+o,this._times)}const i=t%1,r=n*Math.floor(t)+this._duration*i;return this.time(r)}persist(t){return t==null?this._persist:(this._persist=t,this)}position(t){const n=this._time,i=this._duration,r=this._wait,s=this._times,o=this._swing,a=this._reverse;let h;if(t==null){const u=function(f){const w=o*Math.floor(f%(2*(r+i))/(r+i)),y=w&&!a||!w&&a,M=Math.pow(-1,y)*(f%(r+i))/i+y;return Math.max(Math.min(M,1),0)},c=s*(r+i)-r;return h=n<=0?Math.round(u(1e-5)):n<c?u(n):Math.round(u(c-1e-5)),h}const l=Math.floor(this.loops()),d=o&&l%2==0;return h=l+(d&&!a||a&&d?t:1-t),this.loops(h)}progress(t){return t==null?Math.min(1,this._time/this.duration()):this.time(t*this.duration())}queue(t,n,i,r){return this._queue.push({initialiser:t||Dn,runner:n||Dn,retarget:i,isTransform:r,initialised:!1,finished:!1}),this.timeline()&&this.timeline()._continue(),this}reset(){return this._reseted||(this.time(0),this._reseted=!0),this}reverse(t){return this._reverse=t??!this._reverse,this}schedule(t,n,i){if(t instanceof Jn||(i=n,n=t,t=this.timeline()),!t)throw Error("Runner cannot be scheduled without timeline");return t.schedule(this,n,i),this}step(t){if(!this.enabled)return this;t=t??16,this._time+=t;const n=this.position(),i=this._lastPosition!==n&&this._time>=0;this._lastPosition=n;const r=this.duration(),s=this._lastTime<=0&&this._time>0,o=this._lastTime<r&&this._time>=r;this._lastTime=this._time,s&&this.fire("start",this);const a=this._isDeclarative;this.done=!a&&!o&&this._time>=r,this._reseted=!1;let h=!1;return(i||a)&&(this._initialise(i),this.transforms=new g,h=this._run(a?t:n),this.fire("step",this)),this.done=this.done||h&&a,o&&this.fire("finished",this),this}time(t){if(t==null)return this._time;const n=t-this._time;return this.step(n),this}timeline(t){return t===void 0?this._timeline:(this._timeline=t,this)}unschedule(){const t=this.timeline();return t&&t.unschedule(this),this}_initialise(t){if(t||this._isDeclarative)for(let n=0,i=this._queue.length;n<i;++n){const r=this._queue[n],s=this._isDeclarative||!r.initialised&&t;t=!r.finished,s&&t&&(r.initialiser.call(this),r.initialised=!0)}}_rememberMorpher(t,n){if(this._history[t]={morpher:n,caller:this._queue[this._queue.length-1]},this._isDeclarative){const i=this.timeline();i&&i.play()}}_run(t){let n=!0;for(let i=0,r=this._queue.length;i<r;++i){const s=this._queue[i],o=s.runner.call(this,t);s.finished=s.finished||o===!0,n=n&&s.finished}return n}_tryRetarget(t,n,i){if(this._history[t]){if(!this._history[t].caller.initialised){const s=this._queue.indexOf(this._history[t].caller);return this._queue.splice(s,1),!1}this._history[t].caller.retarget?this._history[t].caller.retarget.call(this,n,i):this._history[t].morpher.to(n),this._history[t].caller.finished=!1;const r=this.timeline();return r&&r.play(),!0}return!1}}J.id=0;class fe{constructor(t=new g,n=-1,i=!0){this.transforms=t,this.id=n,this.done=i}clearTransformsFromQueue(){}}C([J,fe],{mergeWith(e){return new fe(e.transforms.lmultiply(this.transforms),e.id)}});const Kn=(e,t)=>e.lmultiplyO(t),ti=e=>e.transforms;function tr(){const e=this._transformationRunners.runners.map(ti).reduce(Kn,new g);this.transform(e),this._transformationRunners.merge(),this._transformationRunners.length()===1&&(this._frameId=null)}class er{constructor(){this.runners=[],this.ids=[]}add(t){if(this.runners.includes(t))return;const n=t.id+1;return this.runners.push(t),this.ids.push(n),this}clearBefore(t){const n=this.ids.indexOf(t+1)||1;return this.ids.splice(0,n,0),this.runners.splice(0,n,new fe).forEach(i=>i.clearTransformsFromQueue()),this}edit(t,n){const i=this.ids.indexOf(t+1);return this.ids.splice(i,1,t+1),this.runners.splice(i,1,n),this}getByID(t){return this.runners[this.ids.indexOf(t+1)]}length(){return this.ids.length}merge(){let t=null;for(let n=0;n<this.runners.length;++n){const i=this.runners[n];if(t&&i.done&&t.done&&(!i._timeline||!i._timeline._runnerIds.includes(i.id))&&(!t._timeline||!t._timeline._runnerIds.includes(t.id))){this.remove(i.id);const r=i.mergeWith(t);this.edit(t.id,r),t=r,--n}else t=i}return this}remove(t){const n=this.ids.indexOf(t+1);return this.ids.splice(n,1),this.runners.splice(n,1),this}}_({Element:{animate(e,t,n){const i=J.sanitise(e,t,n),r=this.timeline();return new J(i.duration).loop(i).element(this).timeline(r.play()).schedule(i.delay,i.when)},delay(e,t){return this.animate(0,e,t)},_clearTransformRunnersBefore(e){this._transformationRunners.clearBefore(e.id)},_currentTransform(e){return this._transformationRunners.runners.filter(t=>t.id<=e.id).map(ti).reduce(Kn,new g)},_addRunner(e){this._transformationRunners.add(e),O.cancelImmediate(this._frameId),this._frameId=O.immediate(tr.bind(this))},_prepareRunner(){this._frameId==null&&(this._transformationRunners=new er().add(new fe(new g(this))))}}}),C(J,{attr(e,t){return this.styleAttr("attr",e,t)},css(e,t){return this.styleAttr("css",e,t)},styleAttr(e,t,n){if(typeof t=="string")return this.styleAttr(e,{[t]:n});let i=t;if(this._tryRetarget(e,i))return this;let r=new Mt(this._stepper).to(i),s=Object.keys(i);return this.queue(function(){r=r.from(this.element()[e](s))},function(o){return this.element()[e](r.at(o).valueOf()),r.done()},function(o){const a=Object.keys(o),h=(l=s,a.filter(u=>!l.includes(u)));var l;if(h.length){const u=this.element()[e](h),c=new Kt(r.from()).valueOf();Object.assign(c,u),r.from(c)}const d=new Kt(r.to()).valueOf();Object.assign(d,o),r.to(d),s=a,i=o}),this._rememberMorpher(e,r),this},zoom(e,t){if(this._tryRetarget("zoom",e,t))return this;let n=new Mt(this._stepper).to(new v(e));return this.queue(function(){n=n.from(this.element().zoom())},function(i){return this.element().zoom(n.at(i),t),n.done()},function(i,r){t=r,n.to(i)}),this._rememberMorpher("zoom",n),this},transform(e,t,n){if(t=e.relative||t,this._isDeclarative&&!t&&this._tryRetarget("transform",e))return this;const i=g.isMatrixLike(e);n=e.affine!=null?e.affine:n??!i;const r=new Mt(this._stepper).type(n?Jt:g);let s,o,a,h,l;return this.queue(function(){o=o||this.element(),s=s||Ne(e,o),l=new g(t?void 0:o),o._addRunner(this),t||o._clearTransformRunnersBefore(this)},function(d){t||this.clearTransform();const{x:u,y:c}=new D(s).transform(o._currentTransform(this));let f=new g({...e,origin:[u,c]}),w=this._isDeclarative&&a?a:l;if(n){f=f.decompose(u,c),w=w.decompose(u,c);const M=f.rotate,X=w.rotate,F=[M-360,M,M+360],B=F.map(ut=>Math.abs(ut-X)),L=Math.min(...B),H=B.indexOf(L);f.rotate=F[H]}t&&(i||(f.rotate=e.rotate||0),this._isDeclarative&&h&&(w.rotate=h)),r.from(w),r.to(f);const y=r.at(d);return h=y.rotate,a=new g(y),this.addTransform(a),o._addRunner(this),r.done()},function(d){(d.origin||"center").toString()!==(e.origin||"center").toString()&&(s=Ne(d,o)),e={...d,origin:s}},!0),this._isDeclarative&&this._rememberMorpher("transform",r),this},x(e){return this._queueNumber("x",e)},y(e){return this._queueNumber("y",e)},ax(e){return this._queueNumber("ax",e)},ay(e){return this._queueNumber("ay",e)},dx(e=0){return this._queueNumberDelta("x",e)},dy(e=0){return this._queueNumberDelta("y",e)},dmove(e,t){return this.dx(e).dy(t)},_queueNumberDelta(e,t){if(t=new v(t),this._tryRetarget(e,t))return this;const n=new Mt(this._stepper).to(t);let i=null;return this.queue(function(){i=this.element()[e](),n.from(i),n.to(i+t)},function(r){return this.element()[e](n.at(r)),n.done()},function(r){n.to(i+new v(r))}),this._rememberMorpher(e,n),this},_queueObject(e,t){if(this._tryRetarget(e,t))return this;const n=new Mt(this._stepper).to(t);return this.queue(function(){n.from(this.element()[e]())},function(i){return this.element()[e](n.at(i)),n.done()}),this._rememberMorpher(e,n),this},_queueNumber(e,t){return this._queueObject(e,new v(t))},cx(e){return this._queueNumber("cx",e)},cy(e){return this._queueNumber("cy",e)},move(e,t){return this.x(e).y(t)},amove(e,t){return this.ax(e).ay(t)},center(e,t){return this.cx(e).cy(t)},size(e,t){let n;return e&&t||(n=this._element.bbox()),e||(e=n.width/n.height*t),t||(t=n.height/n.width*e),this.width(e).height(t)},width(e){return this._queueNumber("width",e)},height(e){return this._queueNumber("height",e)},plot(e,t,n,i){if(arguments.length===4)return this.plot([e,t,n,i]);if(this._tryRetarget("plot",e))return this;const r=new Mt(this._stepper).type(this._element.MorphArray).to(e);return this.queue(function(){r.from(this._element.array())},function(s){return this._element.plot(r.at(s)),r.done()}),this._rememberMorpher("plot",r),this},leading(e){return this._queueNumber("leading",e)},viewbox(e,t,n,i){return this._queueObject("viewbox",new j(e,t,n,i))},update(e){return typeof e!="object"?this.update({offset:arguments[0],color:arguments[1],opacity:arguments[2]}):(e.opacity!=null&&this.attr("stop-opacity",e.opacity),e.color!=null&&this.attr("stop-color",e.color),e.offset!=null&&this.attr("offset",e.offset),this)}}),C(J,{rx:Be,ry:He,from:Un,to:Gn}),A(J,"Runner");class me extends G{constructor(t,n=t){super(R("svg",t),n),this.namespace()}defs(){return this.isRoot()?et(this.node.querySelector("defs"))||this.put(new Ye):this.root().defs()}isRoot(){return!this.node.parentNode||!(this.node.parentNode instanceof E.window.SVGElement)&&this.node.parentNode.nodeName!=="#document-fragment"}namespace(){return this.isRoot()?this.attr({xmlns:Re,version:"1.1"}).attr("xmlns:xlink",Ht,Ie):this.root().namespace()}removeNamespace(){return this.attr({xmlns:null,version:null}).attr("xmlns:xlink",null,Ie).attr("xmlns:svgjs",null,Ie)}root(){return this.isRoot()?this:super.root()}}_({Container:{nested:I(function(){return this.put(new me)})}}),A(me,"Svg",!0);let nn=class extends G{constructor(e,t=e){super(R("symbol",e),t)}};_({Container:{symbol:I(function(){return this.put(new nn)})}}),A(nn,"Symbol");const ei=Object.freeze(Object.defineProperty({__proto__:null,amove:function(e,t){return this.ax(e).ay(t)},ax:function(e){return this.attr("x",e)},ay:function(e){return this.attr("y",e)},build:function(e){return this._build=!!e,this},center:function(e,t,n=this.bbox()){return this.cx(e,n).cy(t,n)},cx:function(e,t=this.bbox()){return e==null?t.cx:this.attr("x",this.attr("x")+e-t.cx)},cy:function(e,t=this.bbox()){return e==null?t.cy:this.attr("y",this.attr("y")+e-t.cy)},length:function(){return this.node.getComputedTextLength()},move:function(e,t,n=this.bbox()){return this.x(e,n).y(t,n)},plain:function(e){return this._build===!1&&this.clear(),this.node.appendChild(E.document.createTextNode(e)),this},x:function(e,t=this.bbox()){return e==null?t.x:this.attr("x",this.attr("x")+e-t.x)},y:function(e,t=this.bbox()){return e==null?t.y:this.attr("y",this.attr("y")+e-t.y)}},Symbol.toStringTag,{value:"Module"}));class nt extends Q{constructor(t,n=t){super(R("text",t),n),this.dom.leading=this.dom.leading??new v(1.3),this._rebuild=!0,this._build=!1}leading(t){return t==null?this.dom.leading:(this.dom.leading=new v(t),this.rebuild())}rebuild(t){if(typeof t=="boolean"&&(this._rebuild=t),this._rebuild){const n=this;let i=0;const r=this.dom.leading;this.each(function(s){if($e(this.node))return;const o=E.window.getComputedStyle(this.node).getPropertyValue("font-size"),a=r*new v(o);this.dom.newLined&&(this.attr("x",n.attr("x")),this.text()===`
`?i+=a:(this.attr("dy",s?a+i:0),i=0))}),this.fire("rebuild")}return this}setData(t){return this.dom=t,this.dom.leading=new v(t.leading||1.3),this}writeDataToDom(){return Mn(this,this.dom,{leading:1.3}),this}text(t){if(t===void 0){const n=this.node.childNodes;let i=0;t="";for(let r=0,s=n.length;r<s;++r)n[r].nodeName==="textPath"||$e(n[r])?r===0&&(i=r+1):(r!==i&&n[r].nodeType!==3&&et(n[r]).dom.newLined===!0&&(t+=`
`),t+=n[r].textContent);return t}if(this.clear().build(!0),typeof t=="function")t.call(this,this);else for(let n=0,i=(t=(t+"").split(`
`)).length;n<i;n++)this.newLine(t[n]);return this.build(!1).rebuild()}}C(nt,ei),_({Container:{text:I(function(e=""){return this.put(new nt).text(e)}),plain:I(function(e=""){return this.put(new nt).plain(e)})}}),A(nt,"Text");class ge extends Q{constructor(t,n=t){super(R("tspan",t),n),this._build=!1}dx(t){return this.attr("dx",t)}dy(t){return this.attr("dy",t)}newLine(){this.dom.newLined=!0;const t=this.parent();if(!(t instanceof nt))return this;const n=t.index(this),i=E.window.getComputedStyle(this.node).getPropertyValue("font-size"),r=t.dom.leading*new v(i);return this.dy(n?r:0).attr("x",t.x())}text(t){return t==null?this.node.textContent+(this.dom.newLined?`
`:""):(typeof t=="function"?(this.clear().build(!0),t.call(this,this),this.build(!1)):this.plain(t),this)}}C(ge,ei),_({Tspan:{tspan:I(function(e=""){const t=new ge;return this._build||this.clear(),this.put(t).text(e)})},Text:{newLine:function(e=""){return this.tspan(e).newLine()}}}),A(ge,"Tspan");class ye extends Q{constructor(t,n=t){super(R("circle",t),n)}radius(t){return this.attr("r",t)}rx(t){return this.attr("r",t)}ry(t){return this.rx(t)}size(t){return this.radius(new v(t).divide(2))}}C(ye,{x:jn,y:Ln,cx:Vn,cy:Fn,width:Yn,height:Bn}),_({Container:{circle:I(function(e=0){return this.put(new ye).size(e).move(0,0)})}}),A(ye,"Circle");class rn extends G{constructor(t,n=t){super(R("clipPath",t),n)}remove(){return this.targets().forEach(function(t){t.unclip()}),super.remove()}targets(){return Nt("svg [clip-path*="+this.id()+"]")}}_({Container:{clip:I(function(){return this.defs().put(new rn)})},Element:{clipper(){return this.reference("clip-path")},clipWith(e){const t=e instanceof rn?e:this.parent().clip().add(e);return this.attr("clip-path","url(#"+t.id()+")")},unclip(){return this.attr("clip-path",null)}}}),A(rn,"ClipPath");class sn extends at{constructor(t,n=t){super(R("foreignObject",t),n)}}_({Container:{foreignObject:I(function(e,t){return this.put(new sn).size(e,t)})}}),A(sn,"ForeignObject");const ni=Object.freeze(Object.defineProperty({__proto__:null,dmove:function(e,t){return this.children().forEach(n=>{let i;try{i=n.node instanceof E.window.SVGSVGElement?new j(n.attr(["x","y","width","height"])):n.bbox()}catch{return}const r=new g(n),s=r.translate(e,t).transform(r.inverse()),o=new D(i.x,i.y).transform(s);n.move(o.x,o.y)}),this},dx:function(e){return this.dmove(e,0)},dy:function(e){return this.dmove(0,e)},height:function(e,t=this.bbox()){return e==null?t.height:this.size(t.width,e,t)},move:function(e=0,t=0,n=this.bbox()){const i=e-n.x,r=t-n.y;return this.dmove(i,r)},size:function(e,t,n=this.bbox()){const i=kt(this,e,t,n),r=i.width/n.width,s=i.height/n.height;return this.children().forEach(o=>{const a=new D(n).transform(new g(o).inverse());o.scale(r,s,a.x,a.y)}),this},width:function(e,t=this.bbox()){return e==null?t.width:this.size(e,t.height,t)},x:function(e,t=this.bbox()){return e==null?t.x:this.move(e,t.y,t)},y:function(e,t=this.bbox()){return e==null?t.y:this.move(t.x,e,t)}},Symbol.toStringTag,{value:"Module"}));class we extends G{constructor(t,n=t){super(R("g",t),n)}}C(we,ni),_({Container:{group:I(function(){return this.put(new we)})}}),A(we,"G");class xe extends G{constructor(t,n=t){super(R("a",t),n)}target(t){return this.attr("target",t)}to(t){return this.attr("href",t,Ht)}}C(xe,ni),_({Container:{link:I(function(e){return this.put(new xe).to(e)})},Element:{unlink(){const e=this.linker();if(!e)return this;const t=e.parent();if(!t)return this.remove();const n=t.index(e);return t.add(this,n),e.remove(),this},linkTo(e){let t=this.linker();return t||(t=new xe,this.wrap(t)),typeof e=="function"?e.call(t,t):t.to(e),this},linker(){const e=this.parent();return e&&e.node.nodeName.toLowerCase()==="a"?e:null}}}),A(xe,"A");class on extends G{constructor(t,n=t){super(R("mask",t),n)}remove(){return this.targets().forEach(function(t){t.unmask()}),super.remove()}targets(){return Nt("svg [mask*="+this.id()+"]")}}_({Container:{mask:I(function(){return this.defs().put(new on)})},Element:{masker(){return this.reference("mask")},maskWith(e){const t=e instanceof on?e:this.parent().mask().add(e);return this.attr("mask","url(#"+t.id()+")")},unmask(){return this.attr("mask",null)}}}),A(on,"Mask");class ii extends at{constructor(t,n=t){super(R("stop",t),n)}update(t){return(typeof t=="number"||t instanceof v)&&(t={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),t.opacity!=null&&this.attr("stop-opacity",t.opacity),t.color!=null&&this.attr("stop-color",t.color),t.offset!=null&&this.attr("offset",new v(t.offset)),this}}_({Gradient:{stop:function(e,t,n){return this.put(new ii).update(e,t,n)}}}),A(ii,"Stop");class an extends at{constructor(t,n=t){super(R("style",t),n)}addText(t=""){return this.node.textContent+=t,this}font(t,n,i={}){return this.rule("@font-face",{fontFamily:t,src:n,...i})}rule(t,n){return this.addText(function(i,r){if(!i)return"";if(!r)return i;let s=i+"{";for(const o in r)s+=o.replace(/([A-Z])/g,function(a,h){return"-"+h.toLowerCase()})+":"+r[o]+";";return s+="}",s}(t,n))}}_("Dom",{style(e,t){return this.put(new an).rule(e,t)},fontface(e,t,n){return this.put(new an).font(e,t,n)}}),A(an,"Style");class hn extends nt{constructor(t,n=t){super(R("textPath",t),n)}array(){const t=this.track();return t?t.array():null}plot(t){const n=this.track();let i=null;return n&&(i=n.plot(t)),t==null?i:this}track(){return this.reference("href")}}_({Container:{textPath:I(function(e,t){return e instanceof nt||(e=this.text(e)),e.path(t)})},Text:{path:I(function(e,t=!0){const n=new hn;let i;if(e instanceof Tt||(e=this.defs().path(e)),n.attr("href","#"+e,Ht),t)for(;i=this.node.firstChild;)n.node.appendChild(i);return this.put(n)}),textPath(){return this.findOne("textPath")}},Path:{text:I(function(e){return e instanceof nt||(e=new nt().addTo(this.parent()).text(e)),e.path(this)}),targets(){return Nt("svg textPath").filter(e=>(e.attr("href")||"").includes(this.id()))}}}),hn.prototype.MorphArray=St,A(hn,"TextPath");class ri extends Q{constructor(t,n=t){super(R("use",t),n)}use(t,n){return this.attr("href",(n||"")+"#"+t,Ht)}}_({Container:{use:I(function(e,t){return this.put(new ri).use(e,t)})}}),A(ri,"Use");const nr=Y;C([me,nn,de,Wt,ce],U("viewbox")),C([Qt,ee,te,Tt],U("marker")),C(nt,U("Text")),C(Tt,U("Path")),C(Ye,U("Defs")),C([nt,ge],U("Tspan")),C([ne,ue,Zt,J],U("radius")),C(Gt,U("EventTarget")),C(mt,U("Dom")),C(at,U("Element")),C(Q,U("Shape")),C([G,Hn],U("Container")),C(Zt,U("Gradient")),C(J,U("Runner")),vt.extend([...new Set(_n)]),function(e=[]){tn.push(...[].concat(e))}([v,N,j,g,$t,gt,St,D]),C(tn,{to(e){return new Mt().type(this.constructor).from(this.toArray()).to(e)},fromArray(e){return this.init(e),this},toConsumable(){return this.toArray()},morph(e,t,n,i,r){return this.fromArray(e.map(function(s,o){return i.step(s,t[o],n,r[o],r)}))}});const si={width:400,height:400,contentKey:"name",nodeWidth:50,nodeHeight:30,nodeTemplate:e=>`<div style='display: flex;justify-content: center;align-items: center; text-align: center; height: 100%;'>${e}</div>`,nodeBGColor:"#FFFFFF",nodeBGColorHover:"#FFFFFF",nodeStyle:"",nodeClassName:"apextree-node",borderWidth:1,borderStyle:"solid",borderRadius:"5px",borderColor:"#BCBCBC",borderColorHover:"#5C6BC0",enableExpandCollapse:!1,siblingSpacing:50,childrenSpacing:50,direction:"top",highlightOnHover:!0,containerClassName:"root",enableTooltip:!1,tooltipId:"apextree-tooltip-container",tooltipMaxWidth:100,tooltipBorderColor:"#BCBCBC",tooltipBGColor:"#FFFFFF",fontSize:"14px",fontFamily:"",fontWeight:400,fontColor:"#000000",canvasStyle:"",enableToolbar:!1,edgeWidth:1,edgeColor:"#BCBCBC",edgeColorHover:"#5C6BC0"};var ie=function(e){return e.touches||[{clientX:e.clientX,clientY:e.clientY}]};C(me,{panZoom:function(e){var t,n,i,r,s,o,a,h,l,d,u,c,f=this;if(this.off(".panZoom"),e===!1)return this;var w,y,M=(n=(e=(t=e)!=null?t:{}).zoomFactor)!=null?n:2,X=(i=e.zoomMin)!=null?i:Number.MIN_VALUE,F=(r=e.zoomMax)!=null?r:Number.MAX_VALUE,B=(s=e.wheelZoom)==null||s,L=(o=e.pinchZoom)==null||o,H=(a=e.panning)==null||a,ut=(h=e.panButton)!=null?h:0,yt=(l=e.oneFingerPan)!=null&&l,it=(d=e.margins)!=null&&d,ln=(u=e.wheelZoomDeltaModeLinePixels)!=null?u:17,un=(c=e.wheelZoomDeltaModeScreenPixels)!=null?c:53,re=!1,rt=this.viewbox(),It=function(S){if(!it)return S;var x=it.top,T=it.left,P=it.bottom,K=it.right,st=f.attr(["width","height"]),ct=st.width,Xt=st.height,b=f.node.preserveAspectRatio.baseVal,pt=0,Dt=0,dn=0,cn=0;if(b.align!==b.SVG_PRESERVEASPECTRATIO_NONE){var Ce=ct/Xt,Se=rt.width/rt.height;if(Se!==Ce){var oi=b.meetOrSlice!==b.SVG_MEETORSLICE_SLICE,pn=Ce>Se?"width":"height",ai=pn==="width",hi=oi&&ai||!oi&&!ai,or=hi?Ce/Se:Se/Ce,xt=S[pn]-S[pn]*or;hi?b.align===b.SVG_PRESERVEASPECTRATIO_XMIDYMIN||b.align===b.SVG_PRESERVEASPECTRATIO_XMIDYMID||b.align===b.SVG_PRESERVEASPECTRATIO_XMIDYMAX?(pt=xt/2,Dt=-xt/2):b.align===b.SVG_PRESERVEASPECTRATIO_XMINYMIN||b.align===b.SVG_PRESERVEASPECTRATIO_XMINYMID||b.align===b.SVG_PRESERVEASPECTRATIO_XMINYMAX?Dt=-xt:b.align!==b.SVG_PRESERVEASPECTRATIO_XMAXYMIN&&b.align!==b.SVG_PRESERVEASPECTRATIO_XMAXYMID&&b.align!==b.SVG_PRESERVEASPECTRATIO_XMAXYMAX||(pt=xt):b.align===b.SVG_PRESERVEASPECTRATIO_XMINYMID||b.align===b.SVG_PRESERVEASPECTRATIO_XMIDYMID||b.align===b.SVG_PRESERVEASPECTRATIO_XMAXYMID?(dn=xt/2,cn=-xt/2):b.align===b.SVG_PRESERVEASPECTRATIO_XMINYMIN||b.align===b.SVG_PRESERVEASPECTRATIO_XMIDYMIN||b.align===b.SVG_PRESERVEASPECTRATIO_XMAXYMIN?cn=-xt:b.align!==b.SVG_PRESERVEASPECTRATIO_XMINYMAX&&b.align!==b.SVG_PRESERVEASPECTRATIO_XMIDYMAX&&b.align!==b.SVG_PRESERVEASPECTRATIO_XMAXYMAX||(dn=xt)}}var ar=rt.width+rt.x-T-pt,hr=rt.x+K-S.width-Dt,lr=rt.height+rt.y-x-dn,ur=rt.y+P-S.height-cn;return S.x=Math.min(ar,Math.max(hr,S.x)),S.y=Math.min(lr,Math.max(ur,S.y)),S},se=function S(x){(y=ie(x)).length<2?H&&yt&&wt.call(this,x):(H&&yt&&ve.call(this,x),x.preventDefault(),this.dispatch("pinchZoomStart",{event:x}).defaultPrevented||(this.off("touchstart.panZoom",S),re=!0,_t(document,"touchmove.panZoom",oe,this,{passive:!1}),_t(document,"touchend.panZoom",dt,this,{passive:!1})))},dt=function S(x){x.preventDefault();var T=ie(x);T.length>1||(re=!1,this.dispatch("pinchZoomEnd",{event:x}),ot(document,"touchmove.panZoom",oe),ot(document,"touchend.panZoom",S),this.on("touchstart.panZoom",se),T.length&&H&&yt&&wt.call(this,x))},oe=function(S){S.preventDefault();var x=ie(S),T=this.zoom(),P=Math.sqrt(Math.pow(y[0].clientX-y[1].clientX,2)+Math.pow(y[0].clientY-y[1].clientY,2))/Math.sqrt(Math.pow(x[0].clientX-x[1].clientX,2)+Math.pow(x[0].clientY-x[1].clientY,2));(T<X&&P>1||T>F&&P<1)&&(P=1);var K={x:x[0].clientX+.5*(x[1].clientX-x[0].clientX),y:x[0].clientY+.5*(x[1].clientY-x[0].clientY)},st=y[0].clientX+.5*(y[1].clientX-y[0].clientX),ct=y[0].clientY+.5*(y[1].clientY-y[0].clientY),Xt=this.point(K.x,K.y),b=this.point(2*K.x-st,2*K.y-ct),pt=new j(this.viewbox()).transform(new g().translate(-b.x,-b.y).scale(P,0,0).translate(Xt.x,Xt.y));It(pt),this.viewbox(pt),y=x,this.dispatch("zoom",{box:pt,focus:b})},wt=function S(x){x.type.indexOf("mouse")>-1&&x.button!==ut&&x.which!==ut+1||(x.preventDefault(),this.off("mousedown.panZoom",S),y=ie(x),re||(this.dispatch("panStart",{event:x}),w={x:y[0].clientX,y:y[0].clientY},_t(document,"touchmove.panZoom mousemove.panZoom",_e,this,{passive:!1}),_t(document,"touchend.panZoom mouseup.panZoom",ve,this,{passive:!1})))},ve=function S(x){x.preventDefault(),ot(document,"touchmove.panZoom mousemove.panZoom",_e),ot(document,"touchend.panZoom mouseup.panZoom",S),this.on("mousedown.panZoom",wt),this.dispatch("panEnd",{event:x})},_e=function(S){S.preventDefault();var x=ie(S),T={x:x[0].clientX,y:x[0].clientY},P=this.point(T.x,T.y),K=this.point(w.x,w.y),st=[K.x-P.x,K.y-P.y];if(st[0]||st[1]){var ct=new j(this.viewbox()).transform(new g().translate(st[0],st[1]));w=T,It(ct),this.dispatch("panning",{box:ct,event:S}).defaultPrevented||this.viewbox(ct)}};return B&&this.on("wheel.panZoom",function(S){var x;switch(S.preventDefault(),S.deltaMode){case 1:x=S.deltaY*ln;break;case 2:x=S.deltaY*un;break;default:x=S.deltaY}var T=Math.pow(1+M,-1*x/100)*this.zoom(),P=this.point(S.clientX,S.clientY);if(T>F&&(T=F),T<X&&(T=X),this.dispatch("zoom",{level:T,focus:P}).defaultPrevented)return this;if(this.zoom(T,P),it){var K=It(this.viewbox());this.viewbox(K)}},this,{passive:!1}),L&&this.on("touchstart.panZoom",se,this,{passive:!1}),H&&this.on("mousedown.panZoom",wt,this,{passive:!1}),this}});class Et{constructor(t,n,i,r){this.width=n,this.height=i,this.canvas=nr().addTo(t).size(n,i).viewbox(`0 0 ${n} ${i}`).panZoom({zoomFactor:.2,zoomMin:.1}).attr({style:r})}add(t){this.canvas.add(t)}resetViewBox(){this.canvas.viewbox(`0 0 ${this.width} ${this.height}`)}updateViewBox(t,n,i,r){this.canvas.viewbox(`${t} ${n} ${i} ${r}`)}zoom(t){const n=this.canvas.zoom()+t;n>=.1&&this.canvas.zoom(n)}clear(){this.canvas.clear().viewbox(`0 0 ${this.width} ${this.height}`)}static drawRect({x1:t,y1:n,width:i=0,height:r=0,radius:s=0,color:o="#fefefe",opacity:a=1}={}){const h=new ne;return h.attr({x:t??void 0,y:n??void 0,width:i,height:r,rx:s,ry:s,opacity:a}),h.fill(o),h}static drawCircle(t={}){const n=new ye;return n.attr(t),n}static drawText(t="",{x:n,y:i,dx:r,dy:s}){const o=new nt;return o.font({fill:"#f06"}),o.tspan(t),n!==void 0&&i!==void 0&&o.move(n,i),r!==void 0&&s!==void 0&&o.attr({dx:r,dy:s}),o}static drawTemplate(t,{nodeWidth:n,nodeHeight:i}={}){const r=new sn({width:n,height:i}),s=document.createElement("div");return s.innerHTML=t,s.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),r.add(s),r}static drawGroup(t=0,n=0,i,r){const s=new we;return s.attr({transform:`translate(${t}, ${n})`,"data-self":i,"data-parent":r}),s}static drawPath(t,{id:n="",borderColor:i=si.borderColor}={}){const r=new Tt({d:t});return r.id(n),r.fill("none").stroke({color:i,width:1}),r}}class ir extends Et{constructor(t,n){super(t,n.width,n.height,n.canvasStyle),this.element=t,this.options=n}construct(t){const{nodeWidth:n,nodeHeight:i,siblingSpacing:r,childrenSpacing:s}=this.options,o=gn({nodeSize:()=>le[this.options.direction].nodeFlexSize({nodeWidth:n,nodeHeight:i,siblingSpacing:r,childrenSpacing:s}),spacing:0}),a=o.hierarchy(t);this.rootNode=o(a)}renderNode(t,n){var i,r;const s=this.options,{nodeWidth:o,nodeHeight:a,nodeTemplate:h,highlightOnHover:l,borderRadius:d,enableTooltip:u,tooltipTemplate:c,enableExpandCollapse:f}=s,{tooltipId:w,tooltipMaxWidth:y,tooltipBGColor:M,tooltipBorderColor:X,fontSize:F,fontWeight:B,fontFamily:L,fontColor:H,borderWidth:ut,borderStyle:yt,borderColor:it,nodeBGColor:ln,nodeStyle:un,nodeClassName:re}={...s,...t.data.options},{x:rt,y:It}=le[s.direction].swap(t),se=this,dt=Et.drawGroup(rt,It,t.data.id,(i=t.parent)==null?void 0:i.data.id),oe=h(t.data[s.contentKey]),wt=Et.drawTemplate(oe,{nodeWidth:o,nodeHeight:a}),ve=Bt({fontSize:F,fontWeight:B,fontFamily:L,color:H}),_e=Bt({borderColor:it,borderStyle:yt,borderWidth:`${ut}px`,borderRadius:d,backgroundColor:ln,height:"100%",boxSizing:"border-box"});wt.first().attr("style",_e.concat(un)),wt.attr("class",re),dt.attr("style",ve),dt.add(wt);const S=((r=this.rootNode)==null?void 0:r.nodes)||[];if(l&&(dt.on("mouseover",function(){const x=this.node.dataset.self,T=S.find(P=>P.data.id===x);T&&Ae(S,T,!0,s)}),dt.on("mouseout",function(){const x=this.node.dataset.self,T=S.find(P=>P.data.id===x);T&&Ae(S,T,!1,s)})),u){const x=c?c(t.data[this.options.contentKey]):oe;dt.on("mousemove",function(T){const P=((K,st,ct,Xt,b,pt)=>{const Dt=["position: absolute;",`left: ${K+20}px;`,`top: ${st+20}px;`,`border: 1px solid ${Xt};`,"border-radius: 5px;",`max-width: ${ct}px;`,`background-color: ${b};`];return pt&&Dt.push("padding: 10px;"),Dt})(T.pageX,T.pageY,y,X,M,!c);vn(w,P.join(" "),x)}),dt.on("mouseout",function(T){T.relatedTarget.tagName==="svg"&&vn(w)})}if(n.add(dt),(t.children||t.hiddenChildren)&&f){const T=Et.drawGroup(rt+o/2-7,It+a-7,t.data.id),P=Et.drawCircle({cx:7,cy:7,r:7,style:"fill: #FFF; cursor: pointer;"});T.data("expanded",!1),T.add(P),t.hiddenChildren?T.add(`<svg height="14" viewBox="0 0 24 24" width="14" xmlns="http://www.w3.org/2000/svg">
  <path d="m12 0a12 12 0 1 0 12 12 12.013 12.013 0 0 0 -12-12zm0 22a10 10 0 1 1 10-10 10.011 10.011 0 0 1 -10 10zm5-10a1 1 0 0 1 -1 1h-3v3a1 1 0 0 1 -2 0v-3h-3a1 1 0 0 1 0-2h3v-3a1 1 0 0 1 2 0v3h3a1 1 0 0 1 1 1z"/>
</svg>`):T.add(`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="14" height="14">
  <path d="m12,0C5.383,0,0,5.383,0,12s5.383,12,12,12,12-5.383,12-12S18.617,0,12,0Zm0,22c-5.514,0-10-4.486-10-10S6.486,2,12,2s10,4.486,10,10-4.486,10-10,10Zm5-10c0,.552-.448,1-1,1h-8c-.552,0-1-.448-1-1s.448-1,1-1h8c.552,0,1,.448,1,1Z"/>
</svg>
`),T.on("click",function(){t.hiddenChildren?se.expand(this.node.dataset.self):se.collapse(this.node.dataset.self)}),n.add(T)}}renderEdge(t,n){var i;const{nodeWidth:r,nodeHeight:s}=this.options,o=((h,l,d,u)=>{if(!h||!h.parent)return null;const{edgeX:c,edgeY:f,edgeParentX:w,edgeParentY:y,edgeMidX:M,edgeMidY:X,calculateEdge:F,swap:B}=le[u],L=B(h),H=B(h.parent);return F({x:c({node:L,nodeWidth:l,nodeHeight:d}),y:f({node:L,nodeWidth:l,nodeHeight:d})},{x:w({parent:H,nodeWidth:l,nodeHeight:d}),y:y({parent:H,nodeWidth:l,nodeHeight:d})},{x:M({node:L,nodeWidth:l,nodeHeight:d}),y:X({node:L,nodeWidth:l,nodeHeight:d})},{sy:0})})(t,r,s,this.options.direction);if(!o)return;const a=Et.drawPath(o,{id:`${t.data.id}-${(i=t.parent)==null?void 0:i.data.id}`});t.edge=a,n.add(a)}collapse(t){var n;const i=(((n=this.rootNode)==null?void 0:n.descendants())||[]).find(r=>r.data.id===t);i!=null&&i.children&&(i.hiddenChildren=i.children,i.hiddenChildren.forEach(r=>this.collapse(r)),i.children=void 0,this.render({keepOldPosition:!0}))}expand(t){var n;const i=(((n=this.rootNode)==null?void 0:n.descendants())||[]).find(r=>r.data.id===t);i!=null&&i.hiddenChildren&&(i.children=i.hiddenChildren,i.children.forEach(r=>this.expand(r)),i.hiddenChildren=void 0,this.render({keepOldPosition:!0}))}changeLayout(t="top"){this.options={...this.options,direction:t},this.render({keepOldPosition:!1})}fitScreen(){const{childrenSpacing:t,siblingSpacing:n}=this.options,{viewBoxDimensions:i}=le[this.options.direction],{x:r,y:s,width:o,height:a}=i({rootNode:this.rootNode,childrenSpacing:t,siblingSpacing:n});this.updateViewBox(r,s,o,a)}render({keepOldPosition:t=!1}={}){var n;const i=this.canvas.viewbox();this.clear();const{containerClassName:r,enableTooltip:s,tooltipId:o,fontSize:a,fontWeight:h,fontFamily:l,fontColor:d}=this.options,u=Bt({fontSize:a,fontWeight:h,fontFamily:l,color:d}),c=Et.drawGroup(0,0,r);c.attr("style",u),c.id(r);const f=((n=this.rootNode)==null?void 0:n.nodes)||[];if(f.forEach(w=>{this.renderEdge(w,c)}),f.forEach(w=>{this.renderNode(w,c)}),this.add(c),this.fitScreen(),t&&this.updateViewBox(i.x,i.y,i.width,i.height),s){const w=((y="apextree-tooltip-container")=>{const M=document.getElementById(y)||document.createElement("div");return M.id=y,M})(o);(document.body||document.getElementsByTagName("body")[0]).append(w)}}}class rr{constructor(t){this.graph=t}getSvgString(){return this.graph.canvas.svg().replace(/(<img [\w\W]+?)(>)/g,"$1 />").replace(/(<br)(>)/g,"$1 />").replace(/(<hr)(>)/g,"$1 />")}svgUrl(){const t=this.getSvgString(),n=new Blob([t],{type:"image/svg+xml;charset=utf-8"});return URL.createObjectURL(n)}triggerDownload(t,n){const i=document.createElement("a");i.href=t,i.download=n,document.body.appendChild(i),i.click(),document.body.removeChild(i)}exportToSVG(){this.triggerDownload(this.svgUrl(),`apex-tree-${new Date().getTime()}.svg`)}}const be={"zoom-in":"data:image/svg+xml,%3csvg%20width='20px'%20height='20px'%20viewBox='0%200%2032%2032'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20xmlns:sketch='http://www.bohemiancoding.com/sketch/ns'%3e%3cg%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%3e%3cg%20transform='translate(-308.000000,%20-1139.000000)'%20fill='%23000000'%3e%3cpath%20d='M321.46,1163.45%20C315.17,1163.45%20310.07,1158.44%20310.07,1152.25%20C310.07,1146.06%20315.17,1141.04%20321.46,1141.04%20C327.75,1141.04%20332.85,1146.06%20332.85,1152.25%20C332.85,1158.44%20327.75,1163.45%20321.46,1163.45%20L321.46,1163.45%20Z%20M339.688,1169.25%20L331.429,1161.12%20C333.592,1158.77%20334.92,1155.67%20334.92,1152.25%20C334.92,1144.93%20328.894,1139%20321.46,1139%20C314.026,1139%20308,1144.93%20308,1152.25%20C308,1159.56%20314.026,1165.49%20321.46,1165.49%20C324.672,1165.49%20327.618,1164.38%20329.932,1162.53%20L338.225,1170.69%20C338.629,1171.09%20339.284,1171.09%20339.688,1170.69%20C340.093,1170.3%20340.093,1169.65%20339.688,1169.25%20L339.688,1169.25%20Z%20M326.519,1151.41%20L322.522,1151.41%20L322.522,1147.41%20C322.522,1146.85%20322.075,1146.41%20321.523,1146.41%20C320.972,1146.41%20320.524,1146.85%20320.524,1147.41%20L320.524,1151.41%20L316.529,1151.41%20C315.978,1151.41%20315.53,1151.59%20315.53,1152.14%20C315.53,1152.7%20315.978,1153.41%20316.529,1153.41%20L320.524,1153.41%20L320.524,1157.41%20C320.524,1157.97%20320.972,1158.41%20321.523,1158.41%20C322.075,1158.41%20322.522,1157.97%20322.522,1157.41%20L322.522,1153.41%20L326.519,1153.41%20C327.07,1153.41%20327.518,1152.96%20327.518,1152.41%20C327.518,1151.86%20327.07,1151.41%20326.519,1151.41%20L326.519,1151.41%20Z'%20/%3e%3c/g%3e%3c/g%3e%3c/svg%3e","zoom-out":"data:image/svg+xml,%3csvg%20width='20px'%20height='20px'%20viewBox='0%200%2032%2032'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cg%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%20%3e%3cg%20transform='translate(-360.000000,%20-1139.000000)'%20fill='%23000000'%3e%3cpath%20d='M373.46,1163.45%20C367.17,1163.45%20362.071,1158.44%20362.071,1152.25%20C362.071,1146.06%20367.17,1141.04%20373.46,1141.04%20C379.75,1141.04%20384.85,1146.06%20384.85,1152.25%20C384.85,1158.44%20379.75,1163.45%20373.46,1163.45%20L373.46,1163.45%20Z%20M391.688,1169.25%20L383.429,1161.12%20C385.592,1158.77%20386.92,1155.67%20386.92,1152.25%20C386.92,1144.93%20380.894,1139%20373.46,1139%20C366.026,1139%20360,1144.93%20360,1152.25%20C360,1159.56%20366.026,1165.49%20373.46,1165.49%20C376.672,1165.49%20379.618,1164.38%20381.932,1162.53%20L390.225,1170.69%20C390.629,1171.09%20391.284,1171.09%20391.688,1170.69%20C392.093,1170.3%20392.093,1169.65%20391.688,1169.25%20L391.688,1169.25%20Z%20M378.689,1151.41%20L368.643,1151.41%20C368.102,1151.41%20367.663,1151.84%20367.663,1152.37%20C367.663,1152.9%20368.102,1153.33%20368.643,1153.33%20L378.689,1153.33%20C379.23,1153.33%20379.669,1152.9%20379.669,1152.37%20C379.669,1151.84%20379.23,1151.41%20378.689,1151.41%20L378.689,1151.41%20Z'%20/%3e%3c/g%3e%3c/g%3e%3c/svg%3e","fit-screen":"data:image/svg+xml,%3csvg%20width='20px'%20height='20px'%20viewBox='0%200%2032%2032'%20id='icon'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpolygon%20points='8%202%202%202%202%208%204%208%204%204%208%204%208%202'/%3e%3cpolygon%20points='24%202%2030%202%2030%208%2028%208%2028%204%2024%204%2024%202'/%3e%3cpolygon%20points='8%2030%202%2030%202%2024%204%2024%204%2028%208%2028%208%2030'/%3e%3cpolygon%20points='24%2030%2030%2030%2030%2024%2028%2024%2028%2028%2024%2028%2024%2030'/%3e%3cpath%20d='M24,24H8a2.0023,2.0023,0,0,1-2-2V10A2.0023,2.0023,0,0,1,8,8H24a2.0023,2.0023,0,0,1,2,2V22A2.0023,2.0023,0,0,1,24,24ZM8,10V22H24V10Z'/%3e%3crect%20fill='none'%20width='32'%20height='32'/%3e%3c/svg%3e",export:"data:image/svg+xml,%3csvg%20fill='%23000000'%20width='20px'%20height='20px'%20viewBox='0%200%2024%2024'%20id='export-2'%20xmlns='http://www.w3.org/2000/svg'%20class='icon%20line'%3e%3cpolyline%20id='primary'%20points='15%203%2021%203%2021%209'%20style='fill:%20none;%20stroke:%20rgb(0,%200,%200);%20stroke-linecap:%20round;%20stroke-linejoin:%20round;%20stroke-width:%201.5;'%3e%3c/polyline%3e%3cpath%20id='primary-2'%20data-name='primary'%20d='M21,13v7a1,1,0,0,1-1,1H4a1,1,0,0,1-1-1V4A1,1,0,0,1,4,3h7'%20style='fill:%20none;%20stroke:%20rgb(0,%200,%200);%20stroke-linecap:%20round;%20stroke-linejoin:%20round;%20stroke-width:%201.5;'%3e%3c/path%3e%3cline%20id='primary-3'%20data-name='primary'%20x1='11'%20y1='13'%20x2='21'%20y2='3'%20style='fill:%20none;%20stroke:%20rgb(0,%200,%200);%20stroke-linecap:%20round;%20stroke-linejoin:%20round;%20stroke-width:%201.5;'%3e%3c/line%3e%3c/svg%3e"};class sr{constructor(t,n){this.element=t,this.graph=n,this.export=new rr(n)}render(){var t;const n=document.createElement("div");n.id="toolbar";const i=Bt({display:"flex",gap:"5px",position:"absolute",right:"20px",top:"20px"});n.setAttribute("style",i);const r=this.createToolbarItem("zoom-in",be["zoom-in"]),s=this.createToolbarItem("zoom-out",be["zoom-out"]),o=this.createToolbarItem("fit-screen",be["fit-screen"]),a=this.createToolbarItem("export",be.export);r.addEventListener("click",()=>{this.graph.zoom(.1)}),s.addEventListener("click",()=>{this.graph.zoom(-.1)}),o.addEventListener("click",()=>{this.graph.fitScreen()}),a.addEventListener("click",()=>{this.export.exportToSVG()}),n.append(r,s,o,a),(t=this.element)==null||t.append(n)}createToolbarItem(t,n){const i=document.createElement("div"),r=new Image;r.src=n,i.id=t,i.append(r);const s=Bt({width:"30px",height:"30px",display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid #BCBCBC",backgroundColor:"#FFFFFF",cursor:"pointer"});return i.setAttribute("style",s),i}}return class{constructor(e,t){this.element=e,this.options={...si,...t};const n=document.createElement("div");n.id="apexTreeWrapper",n.style.position="relative",this.graph=new ir(n,this.options),this.element.append(n)}render(e){if(!this.element)throw new Error("Element not found");return this.graph.construct(e),this.graph.render(),this.options.enableToolbar&&new sr(document.getElementById("apexTreeWrapper"),this.graph).render(),this.graph}}})})(ci);var _r=ci.exports;const Cr=cr(_r);const Sr={props:{node:{type:Object,default:{}},userList:{type:Array,default:[]}},data:()=>({tree:null,openMenu:!1,editUser:null,dialog:!1,dialogType:"",allTeams:[],allUsers:[],newTeam:{id:"",name:"",isTeam:!0,img:"/src/assets/images/chat/chat-icon.png"}}),computed:{isRoot(){return this.editUser.id==="root"},currentTeam(){return this.allTeams.find(p=>p.id===this.editUser.data.pid)}},watch:{node(p){p&&p.id&&p.data&&(this.drawTree(),this.allTeams=p.children.filter(m=>m.data.isTeam).map(m=>({id:m.id,name:m.data.name})))},userList(p){this.allUsers=p.map(m=>({id:m.id,name:m.username,data:{name:m.username,img:m.profile,email:m.email,role:m.role||"",pid:m.pid||""}}))}},async mounted(){if(this.node&&this.node.id&&this.node.data){const p={contentKey:"data",width:800,height:500,nodeWidth:155,nodeHeight:115,childrenSpacing:50,siblingSpacing:20,direction:"top",enableExpandCollapse:!0,nodeTemplate:m=>`
                <div class='node-content' id='${m.id}' style='display: flex; flex-direction: column; justify-content: center; align-items: center; height: 100%;'>
                    ${m.id=="root"?"":m.img?`<img class="node-content-img" src='${m.img}' />`:`<img class="node-content-img" src='src/assets/images/profile/defaultUser.png' />`}
                    <div class="node-content-text-box">
                        <div style="font-weight: bold; font-family: Arial; font-size: 14px;">${m.name}</div>
                        ${m.email?`<div style="font-family: Arial; font-size: 12px">${m.email}</div>`:""}
                        ${m.role?`<div style="font-family: Arial; color:gray; font-size: 11px">${m.role}</div>`:""}
                        <div class="node-content-btn-box">
                            ${m.id=="root"?'<img class="node-content-btn add-team-btn" src="/assets/images/icon/plus.svg" alt="Add Team">':""}
                            ${m.isTeam==!0?'<img class="node-content-btn edit-team-btn" src="/assets/images/icon/pencil.svg" alt="Edit Team">':""}
                            ${m.isTeam==!0?'<img class="node-content-btn delete-team-btn" src="/assets/images/icon/trash.svg" alt="Delete Team">':""}
                        </div>
                    </div>
                </div>
                `,enableToolbar:!0};this.tree=new Cr(document.getElementById("tree"),p),await this.drawTree(),document.addEventListener("click",m=>{m.target.classList.contains("add-team-btn")?(m.stopPropagation(),this.openDialog("addTeam")):m.target.classList.contains("edit-team-btn")?(m.stopPropagation(),this.openDialog("edit")):m.target.classList.contains("delete-team-btn")&&(m.stopPropagation(),this.openDialog("delete"))}),this.allTeams=this.node.children.filter(m=>m.data.isTeam).map(m=>({id:m.id,name:m.data.name}))}this.$refs.tree.addEventListener("click",this.handleNodeClick),this.$refs.tree.addEventListener("contextmenu",this.handleNodeClick)},methods:{drawTree(){this.tree.render(this.node)},findNodeById(p,m){if(p.id===m)return p;if(p.children)for(let V of p.children){let tt=this.findNodeById(V,m);if(tt)return tt}return null},handleNodeClick(p){p.preventDefault();const m=p.target.closest(".node-content");if(m){if(this.previousTarget&&this.previousTarget!==m){const Ft=this.previousTarget.querySelector(".node-content-text-box");Ft&&(Ft.style.backgroundColor="")}const V=this.findNodeById(this.node,m.id);V&&V.data&&(this.editUser=V,this.openMenu||(this.openMenu=!0));const tt=m.querySelector(".node-content-text-box");tt&&(tt.style.backgroundColor="rgba(var(--v-theme-primary), 0.20)"),this.previousTarget=m}else this.previousTarget&&(this.previousTarget.style.backgroundColor=""),this.openMenu=!1},openDialog(p){this.dialog=!0,this.dialogType=p,p=="addTeam"&&(this.newTeam={id:"",name:"",isTeam:!0,img:"/src/assets/images/chat/chat-icon.png"})},async updateNode(){this.dialogType=="addTeam"?this.node.children.push({id:this.newTeam.id,data:this.newTeam,children:[]}):this.dialogType=="delete"?this.node.children=await this.deleteNode(this.editUser,this.node.children):this.dialogType=="edit"&&this.editUser.data.isTeam&&this.editUser.children.forEach(p=>{p.data.pid=this.editUser.id}),await this.drawTree(),this.$emit("updateNode"),this.dialog=!1,this.dialogType=""},deleteNode(p,m){return m&&m.some(V=>V.id==p.id)?m=m.filter(V=>V.id!=p.id):m.forEach(async V=>{V.children=await this.deleteNode(p,V.children)}),m}}},Mr={style:{height:"100%"}},Tr={id:"tree",ref:"tree",class:"h-100"},Er=Vt("mdi-account-circle"),Ar={class:"d-flex mb-2"},kr={class:"text-start align-self-center ml-4"},Or={class:"text-h6 font-weight-bold"},zr={class:"text-body-1"},Nr={key:0},$r={key:1};function Rr(p,m,V,tt,Ft,At){const Yt=fr("Icons");return q(),Me("div",Mr,[ae("div",Tr,null,512),k(vr,{modelValue:p.dialog,"onUpdate:modelValue":m[9]||(m[9]=z=>p.dialog=z),"max-width":"500"},{default:$(()=>[p.dialogType=="addTeam"?(q(),ht(mn,{key:0},{default:$(()=>[k(Pt,{class:"ma-0 pa-4 pb-0"},{default:$(()=>[k(li,null,{default:$(()=>[Vt(Z(p.$t("organizationChartDefinition.addTeam")),1)]),_:1}),k(jt),k(Lt,{onClick:m[0]||(m[0]=z=>p.dialog=!1),icon:"",variant:"text",density:"comfortable"},{default:$(()=>[k(Yt,{icon:"close",size:16})]),_:1})]),_:1}),k(fn,{class:"text-center"},{default:$(()=>[k(Te,{modelValue:p.newTeam.id,"onUpdate:modelValue":m[1]||(m[1]=z=>p.newTeam.id=z),label:p.$t("organizationChartDefinition.teamId")},null,8,["modelValue","label"]),k(Te,{modelValue:p.newTeam.name,"onUpdate:modelValue":m[2]||(m[2]=z=>p.newTeam.name=z),label:p.$t("organizationChartDefinition.teamName")},null,8,["modelValue","label"])]),_:1}),k(Pt,{class:"ma-0 pa-4"},{default:$(()=>[k(jt),k(Lt,{color:"primary",rounded:"",onClick:At.updateNode},{default:$(()=>[Vt(Z(p.$t("organizationChartDefinition.add")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})):he("",!0),p.dialogType=="edit"?(q(),ht(mn,{key:1,class:"pa-4"},{default:$(()=>[p.editUser.data.isTeam?(q(),Me(mr,{key:0},[k(Pt,{class:"ma-0 pa-0 mb-2"},{default:$(()=>[k(jt),k(Lt,{onClick:m[3]||(m[3]=z=>p.dialog=!1),icon:"",variant:"text",density:"comfortable"},{default:$(()=>[k(Yt,{icon:"close",size:16})]),_:1})]),_:1}),k(Te,{modelValue:p.editUser.data.name,"onUpdate:modelValue":m[4]||(m[4]=z=>p.editUser.data.name=z),label:p.$t("organizationChartDefinition.teamName")},null,8,["modelValue","label"]),k(gr,{modelValue:p.editUser.children,"onUpdate:modelValue":m[5]||(m[5]=z=>p.editUser.children=z),items:p.allUsers,chips:"","closable-chips":"",color:"blue-grey-lighten-2","item-title":"data.name","item-value":z=>z,multiple:"",label:p.$t("organizationChartDefinition.selectTeamMember"),"small-chips":""},{chip:$(({props:z,item:W})=>[W.raw.data.img?(q(),ht(ui,Ee({key:0},z,{"prepend-avatar":W.raw.data.img,text:W.raw.data.name}),null,16,["prepend-avatar","text"])):(q(),ht(ui,Ee({key:1},z,{"prepend-icon":"mdi-account-circle",text:W.raw.data.name}),null,16,["text"]))]),item:$(({props:z,item:W})=>[W.raw.data.img?(q(),ht(di,Ee({key:0},z,{"prepend-avatar":W.raw.data.img,title:W.raw.data.name,subtitle:W.raw.data.email}),null,16,["prepend-avatar","title","subtitle"])):(q(),ht(di,Ee({key:1},z,{title:W.raw.data.name,subtitle:W.raw.data.email}),{prepend:$(()=>[k(yr,{style:{position:"relative","margin-right":"10px","margin-left":"-3px"},size:"48"},{default:$(()=>[Er]),_:1})]),_:2},1040,["title","subtitle"]))]),_:1},8,["modelValue","items","item-value","label"])],64)):(q(),ht(fn,{key:1,class:"text-center mt-5"},{default:$(()=>[ae("div",Ar,[p.editUser.data.isTeam?he("",!0):(q(),ht(wr,{key:0,color:"grey",rounded:"0",size:"100",class:"mb-5"},{default:$(()=>[p.editUser.data.img?(q(),ht(xr,{key:0,src:p.editUser.data.img},null,8,["src"])):he("",!0)]),_:1})),ae("div",kr,[ae("h6",Or,Z(p.editUser.data.name),1),ae("div",zr,Z(p.editUser.data.email),1)])]),k(br,{modelValue:p.editUser.data.pid,"onUpdate:modelValue":m[6]||(m[6]=z=>p.editUser.data.pid=z),items:p.allTeams,"item-title":"name","item-value":"id",label:p.$t("organizationChartDefinition.team")},null,8,["modelValue","items","label"]),k(Te,{modelValue:p.editUser.data.role,"onUpdate:modelValue":m[7]||(m[7]=z=>p.editUser.data.role=z),label:p.$t("organizationChartDefinition.role")},null,8,["modelValue","label"])]),_:1})),k(Pt,{class:"ma-0 pa-4"},{default:$(()=>[k(jt),k(Lt,{color:"primary",rounded:"",onClick:At.updateNode},{default:$(()=>[Vt(Z(p.$t("organizationChartDefinition.edit")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})):he("",!0),p.dialogType=="delete"?(q(),ht(mn,{key:2},{default:$(()=>[k(Pt,{class:"ma-0 pa-2"},{default:$(()=>[k(li,null,{default:$(()=>[Vt(Z(p.editUser.data.isTeam?p.$t("organizationChartDefinition.team"):p.$t("organizationChartDefinition.teamMember"))+" "+Z(p.$t("organizationChartDefinition.delete")),1)]),_:1}),k(jt),k(Lt,{onClick:m[8]||(m[8]=z=>p.dialog=!1),icon:"",variant:"text",density:"comfortable"},{default:$(()=>[k(Yt,{icon:"close",size:16})]),_:1})]),_:1}),k(fn,null,{default:$(()=>[p.editUser.data.isTeam?(q(),Me("div",Nr,"'"+Z(p.editUser.data.name)+"' "+Z(p.$t("organizationChartDefinition.deleteMessage")),1)):(q(),Me("div",$r,"'"+Z(At.currentTeam.name)+"' "+Z(p.$t("organizationChartDefinition.from"))+" '"+Z(p.editUser.data.name)+"' "+Z(p.$t("organizationChartDefinition.deleteMessage1")),1))]),_:1}),k(Pt,{class:"ma-0 pa-4"},{default:$(()=>[k(jt),k(Lt,{color:"primary",rounded:"",onClick:At.updateNode},{default:$(()=>[Vt(Z(p.$t("organizationChartDefinition.delete")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})):he("",!0)]),_:1},8,["modelValue"])])}const Dr=pr(Sr,[["render",Rr],["__scopeId","data-v-701d010f"]]);export{Dr as O};
