import{T,a as _}from"./TodoTaskColumn-5d1918c7.js";import{_ as D,B as C,r,o as i,e as l,w as d,a as c,t as E,P as I,b as n,E as N,h as g,c as O,i as P,F as w,Q as y,f as v,d as B,ao as L}from"./index-7b37f28a.js";import"./DefaultForm-027b9cf9.js";import"./DynamicForm-9e8c830e.js";import"./customizer-3521e2ce.js";const k=C.createBackend(),S={components:{TodoTaskColumn:T,TodoDialog:_},data:()=>({mode:window.$mode,todolist:[{id:"TODO",title:"todoList.todo",cardbg:"background",tasks:[]},{id:"IN_PROGRESS",title:"todoList.inProgress",cardbg:"lightsecondary",tasks:[]},{id:"PENDING",title:"todoList.pending",cardbg:"lightinfo",tasks:[]},{id:"DONE",title:"todoList.done",cardbg:"lightsuccess",tasks:[]}],dialog:!1,loading:!1,offset:10,currentPage:0}),mounted(){this.mode=window.$mode},async created(){await Promise.all([this.loadToDo(),this.loadCompletedWorkList()])},methods:{executeTask(o){var a=this;a.$router.push(`/todolist/${o.taskId}`)},loadToDo(){var o=this;o.$try({context:o,action:async()=>{let a=await k.getWorkList();a||(a=[]),a.forEach(function(t){t.status=="TODO"||t.status=="NEW"||t.status=="DRAFT"?o.todolist.find(s=>s.id=="TODO").tasks.push(t):t.status=="IN_PROGRESS"?o.todolist.find(s=>s.id=="IN_PROGRESS").tasks.push(t):t.status=="PENDING"&&o.todolist.find(s=>s.id=="PENDING").tasks.push(t)})}})},loadCompletedWorkList(){var o=this;o.$try({context:o,action:async()=>{let a=await k.getCompletedList({page:o.currentPage,size:o.offset});a||(a=[]),a.forEach(function(t){if(t.status=="DONE"||t.status=="COMPLETED"){var s=o.todolist.find(e=>e.id=="DONE").tasks,u=s.find(e=>e.taskId==t.taskId);u||s.push(t)}})}})},handleScrollBottom(){var o=this;o.$try({context:o,action:async()=>{o.loading=!0,o.currentPage++,await o.loadCompletedWorkList(),o.loading=!1}})},loadWorkItemByInstId(o){this.todolist.find(s=>s.id==="TODO").tasks.map(s=>s.instId).length!=0},openDialog(){this.dialog=!0},closeDialog(){this.dialog=!1}}},b={class:"pa-5"},V={class:"d-flex align-center justify-space-between ml-3"},x={class:"text-h5 font-weight-semibold"},R=B("할 일 등록");function $(o,a,t,s,u,e){const m=r("PlusIcon"),p=r("TodoTaskColumn"),h=r("TodoDialog");return i(),l(v,{elevation:"10"},{default:d(()=>[c("div",b,[c("div",V,[c("h5",x,E(o.$t("todoList.title")),1),o.mode==="ProcessGPT"?(i(),l(I,{key:0,size:"24",elevation:"10",class:"bg-surface d-flex align-center cursor-pointer",onClick:e.openDialog},{default:d(()=>[n(N,{activator:"parent",location:"left"},{default:d(()=>[R]),_:1}),n(m,{size:"24","stroke-width":"2"})]),_:1},8,["onClick"])):g("",!0)]),n(y,{class:"ma-0 pa-0"},{default:d(()=>[(i(!0),O(w,null,P(o.todolist,f=>(i(),l(L,{key:f.id,cols:"12",md:"3",sm:"6"},{default:d(()=>[n(p,{column:f,loading:o.loading,onExecuteTask:e.executeTask,onScrollBottom:e.handleScrollBottom},null,8,["column","loading","onExecuteTask","onScrollBottom"])]),_:2},1024))),128))]),_:1})]),o.dialog?(i(),l(h,{key:0,isOpen:o.dialog,todolist:o.todolist,onClose:e.closeDialog},null,8,["isOpen","todolist","onClose"])):g("",!0)]),_:1})}const j=D(S,[["render",$]]);export{j as default};
