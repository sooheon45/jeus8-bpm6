import{B as C,_ as w,r as u,o as m,c as h,b as t,w as s,Q as y,U as D,d as i,t as o,R as p,E as U,V as r,D as P,a as b,m as V,f as c,X as v,h as L,F as A,i as E,ao as T,ax as F,W as g,e as $}from"./index-7b37f28a.js";const k=C.createBackend(),R={name:"system-list",props:{system:{type:String,required:!0}},data:()=>({systemInfo:null,showDeleteDialog:!1}),async created(){let e=this;this.systemInfo=await k.getSystem(e.system.replace(".json",""))},mounted(){},computed:{},methods:{editSystem(){this.$emit("editSystem",this.systemInfo)},async deleteSystem(){var e=this;e.$try({context:e,action:async()=>{await k.deleteSystem(this.systemInfo),this.$emit("systemDeleted"),this.showDeleteDialog=!1},successMsg:this.$t("successMsg.delete")})}}},M={key:0},j=b("br",null,null,-1);function z(e,a,O,B,_,n){const f=u("TrashIcon"),S=u("Icons");return e.systemInfo?(m(),h("div",M,[t(c,{elevation:"10",style:{height:"200px"}},{default:s(()=>[t(y,{class:"pa-4 ma-0"},{default:s(()=>[t(D,{class:"pa-0 ma-0"},{default:s(()=>[i(o(e.systemInfo.name),1)]),_:1}),t(p),t(U,{location:"bottom"},{activator:s(({props:d})=>[t(r,P(d,{icon:"",variant:"text",type:"file",class:"text-medium-emphasis",density:"comfortable",onClick:a[0]||(a[0]=l=>e.showDeleteDialog=!0)}),{default:s(()=>[t(f,{size:"24",style:{color:"#FB977D"}})]),_:2},1040)]),default:s(()=>[b("span",null,o(e.$t("processDefinition.deleteProcess")),1)]),_:1})]),_:1}),t(V,{class:"pa-0 pl-4"},{default:s(()=>[i(o(e.$t("System.description"))+": "+o(e.systemInfo.description)+" ",1),j,i(" URL: "+o(e.systemInfo.url),1)]),_:1}),t(r,{onClick:n.editSystem,color:"primary",rounded:"",style:{position:"absolute",bottom:"10px",right:"10px"}},{default:s(()=>[i(o(e.$t("System.edit")),1)]),_:1},8,["onClick"])]),_:1}),t(v,{modelValue:e.showDeleteDialog,"onUpdate:modelValue":a[2]||(a[2]=d=>e.showDeleteDialog=d),"max-width":"400"},{default:s(()=>[t(c,{class:"pa-4"},{default:s(()=>[t(y,{class:"pa-0 ma-0 pb-4"},{default:s(()=>[t(D,{class:"pa-0"},{default:s(()=>[i(o(e.$t("System.confirmDeleteTitle")),1)]),_:1}),t(p),t(r,{onClick:a[1]||(a[1]=d=>e.showDeleteDialog=!1),icon:"",variant:"text",density:"comfortable",size:"24"},{default:s(()=>[t(S,{icon:"close",size:16})]),_:1})]),_:1}),t(V,{class:"pa-0 pb-4"},{default:s(()=>[i(o(e.systemInfo.name)+o(e.$t("System.confirmDeleteText")),1)]),_:1}),t(y,{class:"pa-0 ma-0"},{default:s(()=>[t(p),t(r,{color:"error",rounded:"",onClick:n.deleteSystem},{default:s(()=>[i(o(e.$t("System.delete")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])):L("",!0)}const J=w(R,[["render",z]]),I=C.createBackend(),q={name:"system-list",components:{System:J},data:()=>({MONACO_EDITOR_OPTIONS:{automaticLayout:!0,formatOnType:!0,formatOnPaste:!0},dialogTitle:"",dialogBtnText:"",addSystem:{},openDialog:!1,systemList:null}),async created(){await this.loadSystems()},mounted(){},computed:{},watch:{openDialog(e){e||setTimeout(()=>{this.addSystem={}},500)}},methods:{async loadSystems(){let e=await I.getSystemList();console.log(e),this.systemList=e},async putSystem(){await I.putSystem(this.addSystem),this.loadSystems(),this.openDialog=!1},editSystem(e){this.addSystem=JSON.parse(JSON.stringify(e)),this.dialogTitle=this.$t("SystemList.editDialogTitle"),this.dialogBtnText=this.$t("SystemList.edit"),this.openDialog=!0},openAddDialog(){this.addSystem={},this.dialogTitle=this.$t("SystemList.addDialogTitle"),this.dialogBtnText=this.$t("SystemList.add"),this.openDialog=!0}}},Q=i(" Open API Spec ");function W(e,a,O,B,_,n){const f=u("System"),S=u("Icons"),d=u("vue-monaco-editor");return m(),h("div",null,[t(y,{class:"ma-0 pa-0"},{default:s(()=>[(m(!0),h(A,null,E(e.systemList,l=>(m(),$(T,{key:l.name,cols:"12",sm:"6",md:"4",lg:"3"},{default:s(()=>[e.systemList?(m(),$(f,{key:0,system:l.name,onEditSystem:a[0]||(a[0]=N=>n.editSystem(N)),onSystemDeleted:n.loadSystems},null,8,["system","onSystemDeleted"])):L("",!0)]),_:2},1024))),128)),t(T,{cols:"12",sm:"6",md:"4",lg:"3"},{default:s(()=>[t(c,{elevation:"10",onClick:n.openAddDialog,style:{height:"200px",display:"flex","justify-content":"center","align-items":"center"}},{default:s(()=>[t(S,{icon:"plus"})]),_:1},8,["onClick"])]),_:1})]),_:1}),t(v,{modelValue:e.openDialog,"onUpdate:modelValue":a[5]||(a[5]=l=>e.openDialog=l),width:"auto"},{default:s(()=>[t(c,{style:{width:"70vh"}},{default:s(()=>[t(D,null,{default:s(()=>[i(o(e.dialogTitle),1)]),_:1}),t(F,null,{default:s(()=>[t(g,{modelValue:e.addSystem.name,"onUpdate:modelValue":a[1]||(a[1]=l=>e.addSystem.name=l),style:{"margin-top":"10px"},label:e.$t("SystemList.name")},null,8,["modelValue","label"]),t(g,{modelValue:e.addSystem.description,"onUpdate:modelValue":a[2]||(a[2]=l=>e.addSystem.description=l),label:e.$t("SystemList.description")},null,8,["modelValue","label"]),t(g,{modelValue:e.addSystem.url,"onUpdate:modelValue":a[3]||(a[3]=l=>e.addSystem.url=l),label:e.$t("SystemList.apiUrl")},null,8,["modelValue","label"]),Q,t(d,{style:{width:"100%",height:"100%","min-height":"300px"},value:e.addSystem.spec,"onUpdate:value":a[4]||(a[4]=l=>e.addSystem.spec=l),theme:"vs-dark",language:"json",options:e.MONACO_EDITOR_OPTIONS},null,8,["value","options"])]),_:1}),t(y,{class:"ma-0 pa-0 pt-4 pb-4 pr-5"},{default:s(()=>[t(p),t(r,{onClick:n.putSystem,color:"primary",rounded:""},{default:s(()=>[i(o(e.dialogBtnText),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const G=w(q,[["render",W]]);export{G as default};
