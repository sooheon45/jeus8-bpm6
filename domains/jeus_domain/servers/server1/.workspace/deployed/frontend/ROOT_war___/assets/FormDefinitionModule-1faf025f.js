const p={methods:{extractLastJSON(m){let c=[];if(typeof m=="string"&&m.includes("```"))c=m.split("```");else return console.warn("Invalid input string or no code blocks found"),null;for(let d=c.length-1;d>=0;d--){const r=c[d];if(!r.includes("{")||!r.includes("}")||!r.includes("htmlOutput")&&!r.includes("modifications"))continue;const o=r.includes("htmlOutput");let e="";try{const n=r.match(/\{[\s\S]*\}/)[0].replaceAll(`
`,"").replaceAll("`",'"');if(o){const t=n.match(/"htmlOutput"\s*:\s*"(.*)".*}/)[1];t.includes('\\"')?e=n:e=n.replace(t,t.replaceAll('"','\\"'))}else{const t=[...n.matchAll(/items='\[(.*?)\]'>/g)].map(l=>l[1]);if(e=n,t)for(let l=0;l<t.length;l++){const s=t[l];s.includes('\\"')||(e=e.replace(s,s.replaceAll('"','\\"')))}}const a=[...e.matchAll(/items='\[(.*?)\]'>/g)].map(t=>t[1]);if(a)for(let t=0;t<a.length;t++){const l=a[t];l.includes("'")&&(e=e.replace(l,l.replaceAll("'",'\\"')))}const i=[...e.matchAll(/<code-field .*?>(.*)<\/code-field>/g)].map(t=>t[1]);if(i)for(let t=0;t<i.length;t++){const l=i[t];l.includes("\\\\")||(e=e.replace(l,l.replaceAll("\\","\\\\")))}e=e.replace(/>\\n\\/g,">"),e=e.replace(/>\\n/g,">"),e=e.replace(/>\\/g,">")}catch(n){return console.log("### 유효 문자열을 JSON에 적합한 문자열로 변환시키는 과정에서 오류 발생! ###"),console.log(n),console.log(r),null}try{return JSON.parse(e)}catch(n){return console.log("### JSON 문자열을 최종 파싱하는 과정에서 오류 발생! ###"),console.log(n),console.log(r),console.log(e),null}}return null},keditorContentHTMLToDynamicFormHTML(m){const c=new DOMParser().parseFromString(m,"text/html"),d=new Set;c.querySelectorAll("[name]").forEach(o=>{const e=o.getAttribute("name");if(!(!e||e.length<=0)){if(d.has(e))throw new Error(`'${e}' 이름이 중복되어 있습니다.`);d.add(e)}});const r=c.querySelectorAll("div.row");for(let o=0;o<r.length;o++){const e=r[o];if(e.getAttribute("is_multidata_mode")==="true"&&e.querySelector("code-field"))throw new Error("multidataMode가 설정된 레이아웃 안에 code-field가 존재할 수 없습니다.")}return r.forEach(o=>{const e=o.getAttribute("is_multidata_mode");if(!e||e==="false"){let n=!1,a=o.parentNode;for(;a&&a.tagName.toLowerCase()!=="body";){if(a.getAttribute("is_multidata_mode")==="true"){n=!0;break}a=a.parentNode}const i=document.createElement("row-layout");i.setAttribute("name",o.getAttribute("name")??""),i.setAttribute("alias",o.getAttribute("alias")??""),i.setAttribute("is_multidata_mode",o.getAttribute("is_multidata_mode")??"false"),i.setAttribute("v-model",n?"item":"formValues"),i.setAttribute("v-slot","slotProps");const t=document.createElement("div");t.setAttribute("class","row"),Array.from(o.children).forEach(l=>{t.appendChild(l)}),$(t).children('[class^="col-sm-"]').children("[name]").each(function(){var l=$(this)[0];if(l.tagName.toLowerCase()==="code-field"){const s=l.getAttribute("name");l.setAttribute("v-model",`codeInfos['${s}']`),l.getAttribute("event_type")==="click"&&l.setAttribute("v-on:on_click",`executeCode('${s}')`)}else{const s=l.getAttribute("name");l.setAttribute("v-model",`slotProps.modelValue['${s}']`)}}),i.appendChild(t),o.parentNode.replaceChild(i,o)}else{if(!o.getAttribute("name")||o.getAttribute("name").length<=0)throw new Error("multidataMode가 설정된 레이아웃에 'name' 속성이 없습니다.");let n=!1,a=o.parentNode;for(;a&&a.tagName.toLowerCase()!=="body";){if(a.getAttribute("is_multidata_mode")==="true"){n=!0;break}a=a.parentNode}const i=document.createElement("row-layout");i.setAttribute("name",o.getAttribute("name")),i.setAttribute("alias",o.getAttribute("alias")??""),i.setAttribute("is_multidata_mode",o.getAttribute("is_multidata_mode")),i.setAttribute("v-model",n?"item":"formValues"),i.setAttribute("v-slot","slotProps");const t=document.createElement("div");t.setAttribute("v-for","(item, index) in slotProps.modelValue"),t.setAttribute(":key","index");const l=document.createElement("row-layout-item-head");l.setAttribute(":index","index"),l.setAttribute("v-on:on_delete_item","slotProps.deleteItem(index)"),t.appendChild(l);const s=document.createElement("div");s.classList.add("row"),Array.from(o.children).forEach(u=>{s.appendChild(u)}),t.appendChild(s),i.appendChild(t),$(i).children("div").children("div.row").children('[class^="col-sm-"]').children("[name]").each(function(){var u=$(this)[0];const h=u.getAttribute("name");u.setAttribute("v-model",`item['${h}']`)}),o.parentNode.replaceChild(i,o)}}),c.body.innerHTML.replace(/&quot;/g,"'").replace("<br>",`
`)}}};export{p as _};
