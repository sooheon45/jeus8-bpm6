import{_ as Fa,o as $a,c as Va}from"./index-7b37f28a.js";function Xe(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}function gf(e){return Array.prototype.concat.apply([],e)}const Jt=Object.prototype.toString,ja=Object.prototype.hasOwnProperty;function Gt(e){return e===void 0}function Ot(e){return e!==void 0}function Wa(e){return e==null}function Ce(e){return Jt.call(e)==="[object Array]"}function Ke(e){return Jt.call(e)==="[object Object]"}function Ae(e){return Jt.call(e)==="[object Number]"}function et(e){const t=Jt.call(e);return t==="[object Function]"||t==="[object AsyncFunction]"||t==="[object GeneratorFunction]"||t==="[object AsyncGeneratorFunction]"||t==="[object Proxy]"}function qe(e){return Jt.call(e)==="[object String]"}function za(e){if(!Ce(e))throw new Error("must supply array")}function At(e,t){return ja.call(e,t)}function Fe(e,t){const n=Nn(t);let r;return L(e,function(i,a){if(n(i,a))return r=i,!1}),r}function Ha(e,t){const n=Nn(t);let r=Ce(e)?-1:void 0;return L(e,function(i,a){if(n(i,a))return r=a,!1}),r}function _t(e,t){const n=Nn(t);let r=[];return L(e,function(i,a){n(i,a)&&r.push(i)}),r}function L(e,t){let n,r;if(Gt(e))return;const i=Ce(e)?Ga:qa;for(let a in e)if(At(e,a)&&(n=e[a],r=t(n,i(a)),r===!1))return n}function vf(e,t){if(Gt(e))return[];za(e);const n=Nn(t);return e.filter(function(r,i){return!n(r,i)})}function Nt(e,t,n){return L(e,function(r,i){n=t(n,r,i)}),n}function lr(e,t){return!!Nt(e,function(n,r,i){return n&&t(r,i)},!0)}function cr(e,t){return!!Fe(e,t)}function On(e,t){let n=[];return L(e,function(r,i){n.push(t(r,i))}),n}function Ua(e){return e&&Object.keys(e)||[]}function Ef(e){return Ua(e).length}function wf(e){return On(e,t=>t)}function vi(e,t,n={}){return t=fr(t),L(e,function(r){let i=t(r)||"_",a=n[i];a||(a=n[i]=[]),a.push(r)}),n}function Ya(e,...t){e=fr(e);let n={};return L(t,i=>vi(i,e,n)),On(n,function(i,a){return i[0]})}const xf=Ya;function Ka(e,t){t=fr(t);let n=[];return L(e,function(r,i){let a=t(r,i),o={d:a,v:r};for(var l=0;l<n.length;l++){let{d:c}=n[l];if(a<c){n.splice(l,0,o);return}}n.push(o)}),On(n,r=>r.v)}function Br(e){return function(t){return lr(e,function(n,r){return t[r]===n})}}function fr(e){return et(e)?e:t=>t[e]}function Nn(e){return et(e)?e:t=>t===e}function qa(e){return e}function Ga(e){return Number(e)}function Xa(e,t){let n,r,i,a;function o(v){let b=Date.now(),g=v?0:a+t-b;if(g>0)return l(g);e.apply(i,r),c()}function l(v){n=setTimeout(o,v)}function c(){n&&clearTimeout(n),n=a=r=i=void 0}function p(){n&&o(!0),c()}function d(...v){a=Date.now(),r=v,i=this,n||l(t)}return d.flush=p,d.cancel=c,d}function nt(e,t){return e.bind(t)}function H(e,...t){return Object.assign(e,...t)}function Za(e,t,n){let r=e;return L(t,function(i,a){if(typeof i!="number"&&typeof i!="string")throw new Error("illegal key type: "+typeof i+". Key should be of type number or string.");if(i==="constructor")throw new Error("illegal key: constructor");if(i==="__proto__")throw new Error("illegal key: __proto__");let o=t[a+1],l=r[i];Ot(o)&&Wa(l)&&(l=r[i]=isNaN(+o)?{}:[]),Gt(o)?Gt(n)?delete r[i]:r[i]=n:r=l}),e}function Qa(e,t){let n={},r=Object(e);return L(t,function(i){i in r&&(n[i]=e[i])}),n}function Ja(e,t){let n={},r=Object(e);return L(r,function(i,a){t.indexOf(a)===-1&&(n[a]=i)}),n}var eo=1e3;function Ze(e,t){var n=this;t=t||eo,e.on(["render.shape","render.connection"],t,function(r,i){var a=r.type,o=i.element,l=i.gfx,c=i.attrs;if(n.canRender(o))return a==="render.shape"?n.drawShape(l,o,c):n.drawConnection(l,o,c)}),e.on(["render.getShapePath","render.getConnectionPath"],t,function(r,i){if(n.canRender(i))return r.type==="render.getShapePath"?n.getShapePath(i):n.getConnectionPath(i)})}Ze.prototype.canRender=function(e){};Ze.prototype.drawShape=function(e,t){};Ze.prototype.drawConnection=function(e,t){};Ze.prototype.getShapePath=function(e){};Ze.prototype.getConnectionPath=function(e){};function D(e,t){var n=se(e);return n&&typeof n.$instanceOf=="function"&&n.$instanceOf(t)}function Xt(e,t){return cr(t,function(n){return D(e,n)})}function se(e){return e&&e.businessObject||e}function pt(e){return e&&e.di}function bt(e,t){return D(e,"bpmn:CallActivity")?!1:D(e,"bpmn:SubProcess")?(t=t||pt(e),t&&D(t,"bpmndi:BPMNPlane")?!0:t&&!!t.isExpanded):D(e,"bpmn:Participant")?!!se(e).processRef:!0}function Lr(e){if(!(!D(e,"bpmn:Participant")&&!D(e,"bpmn:Lane"))){var t=pt(e).isHorizontal;return t===void 0?!0:t}}function bf(e){return e&&se(e).isInterrupting!==!1}function to(e){return e&&!!se(e).triggeredByEvent}function pr(e,t){var n=se(e).eventDefinitions;return cr(n,function(r){return D(r,t)})}function _f(e){return pr(e,"bpmn:ErrorEventDefinition")}function Sf(e){return pr(e,"bpmn:EscalationEventDefinition")}function Af(e){return pr(e,"bpmn:CompensateEventDefinition")}function no(e){return Ke(e)&&At(e,"waypoints")}function hr(e){return Ke(e)&&At(e,"labelTarget")}var Sn={width:90,height:20},Ir=15;function ro(e){return D(e,"bpmn:Event")||D(e,"bpmn:Gateway")||D(e,"bpmn:DataStoreReference")||D(e,"bpmn:DataObjectReference")||D(e,"bpmn:DataInput")||D(e,"bpmn:DataOutput")||D(e,"bpmn:SequenceFlow")||D(e,"bpmn:MessageFlow")||D(e,"bpmn:Group")}function Rf(e){return hr(e.label)}function io(e){var t=e.length/2-1,n=e[Math.floor(t)],r=e[Math.ceil(t+.01)],i=ao(e),a=Math.atan((r.y-n.y)/(r.x-n.x)),o=i.x,l=i.y;return Math.abs(a)<Math.PI/2?l-=Ir:o+=Ir,{x:o,y:l}}function ao(e){var t=e.length/2-1,n=e[Math.floor(t)],r=e[Math.ceil(t+.01)];return{x:n.x+(r.x-n.x)/2,y:n.y+(r.y-n.y)/2}}function oo(e){return e.waypoints?io(e.waypoints):D(e,"bpmn:Group")?{x:e.x+e.width/2,y:e.y+Sn.height/2}:{x:e.x+e.width/2,y:e.y+e.height+Sn.height/2}}function so(e,t){var n,r,i,a=e.label;return a&&a.bounds?(i=a.bounds,r={width:Math.max(Sn.width,i.width),height:i.height},n={x:i.x+i.width/2,y:i.y+i.height/2}):(n=oo(t),r=Sn),H({x:n.x-r.width/2,y:n.y-r.height/2},r)}function Ei(e){if(D(e,"bpmn:FlowElement")||D(e,"bpmn:Participant")||D(e,"bpmn:Lane")||D(e,"bpmn:SequenceFlow")||D(e,"bpmn:MessageFlow")||D(e,"bpmn:DataInput")||D(e,"bpmn:DataOutput"))return"name";if(D(e,"bpmn:TextAnnotation"))return"text";if(D(e,"bpmn:Group"))return"categoryValueRef"}function uo(e){var t=e.categoryValueRef;return t&&t.value||""}function An(e){var t=e.businessObject,n=Ei(t);if(n)return n==="categoryValueRef"?uo(t):t[n]||""}function Cf(e,t){var n=e.businessObject,r=Ei(n);return r&&(r==="categoryValueRef"?n.categoryValueRef.value=t:n[r]=t),e}function lo(e,t){if(e.ownerDocument!==t.ownerDocument)try{return t.ownerDocument.importNode(e,!0)}catch{}return e}function wi(e,t){return t.appendChild(lo(e,t))}function ie(e,t){return wi(t,e),e}var Zn=2,xi={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":Zn,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":Zn,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1};function co(e,t){return xi[t]?e.style[t]:e.getAttributeNS(null,t)}function bi(e,t,n){var r=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),i=xi[r];i?(i===Zn&&typeof n=="number"&&(n=String(n)+"px"),e.style[r]=n):e.setAttributeNS(null,t,n)}function fo(e,t){var n=Object.keys(t),r,i;for(r=0,i;i=n[r];r++)bi(e,i,t[i])}function q(e,t,n){if(typeof t=="string")if(n!==void 0)bi(e,t,n);else return co(e,t);else fo(e,t);return e}const po=Object.prototype.toString;function Ie(e){return new ht(e)}function ht(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}ht.prototype.add=function(e){return this.list.add(e),this};ht.prototype.remove=function(e){return po.call(e)=="[object RegExp]"?this.removeMatching(e):(this.list.remove(e),this)};ht.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this};ht.prototype.toggle=function(e,t){return typeof t<"u"?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this};ht.prototype.array=function(){return Array.from(this.list)};ht.prototype.has=ht.prototype.contains=function(e){return this.list.contains(e)};function _i(e){for(var t;t=e.firstChild;)e.removeChild(t);return e}function Pf(e){return e.cloneNode(!0)}var dr={svg:"http://www.w3.org/2000/svg"},Fr='<svg xmlns="'+dr.svg+'"';function Si(e){var t=!1;e.substring(0,4)==="<svg"?e.indexOf(dr.svg)===-1&&(e=Fr+e.substring(4)):(e=Fr+">"+e+"</svg>",t=!0);var n=ho(e);if(!t)return n;for(var r=document.createDocumentFragment(),i=n.firstChild;i.firstChild;)r.appendChild(i.firstChild);return r}function ho(e){var t;return t=new DOMParser,t.async=!1,t.parseFromString(e,"text/xml")}function Q(e,t){var n;return e=e.trim(),e.charAt(0)==="<"?(n=Si(e).firstChild,n=document.importNode(n,!0)):n=document.createElementNS(dr.svg,e),t&&q(n,t),n}var Hn=null;function Qn(){return Hn===null&&(Hn=Q("svg")),Hn}function $r(e,t){var n,r,i=Object.keys(t);for(n=0;r=i[n];n++)e[r]=t[r];return e}function mo(e,t,n,r,i,a){var o=Qn().createSVGMatrix();switch(arguments.length){case 0:return o;case 1:return $r(o,e);case 6:return $r(o,{a:e,b:t,c:n,d:r,e:i,f:a})}}function Yt(e){return e?Qn().createSVGTransformFromMatrix(e):Qn().createSVGTransform()}var Vr=/([&<>]{1})/g,yo=/([\n\r"]{1})/g,go={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"'"};function Un(e,t){function n(r,i){return go[i]||i}return e.replace(t,n)}function Ai(e,t){var n,r,i,a,o;switch(e.nodeType){case 3:t.push(Un(e.textContent,Vr));break;case 1:if(t.push("<",e.tagName),e.hasAttributes())for(i=e.attributes,n=0,r=i.length;n<r;++n)a=i.item(n),t.push(" ",a.name,'="',Un(a.value,yo),'"');if(e.hasChildNodes()){for(t.push(">"),o=e.childNodes,n=0,r=o.length;n<r;++n)Ai(o.item(n),t);t.push("</",e.tagName,">")}else t.push("/>");break;case 8:t.push("<!--",Un(e.nodeValue,Vr),"-->");break;case 4:t.push("<![CDATA[",e.nodeValue,"]]>");break;default:throw new Error("unable to handle node "+e.nodeType)}return t}function vo(e,t){var n=Si(t);if(_i(e),!!t){wo(n)||(n=n.documentElement);for(var r=xo(n.childNodes),i=0;i<r.length;i++)wi(r[i],e)}}function Eo(e){for(var t=e.firstChild,n=[];t;)Ai(t,n),t=t.nextSibling;return n.join("")}function wo(e){return e.nodeName==="#document-fragment"}function jr(e,t){if(t!==void 0){try{vo(e,t)}catch(n){throw new Error("error parsing SVG: "+n.message)}return e}else return Eo(e)}function xo(e){return Array.prototype.slice.call(e)}function Ye(e){var t=e.parentNode;return t&&t.removeChild(e),e}function bo(e,t){return t instanceof SVGMatrix?e.createSVGTransformFromMatrix(t):t}function _o(e,t){var n,r;for(e.clear(),n=0;r=t[n];n++)e.appendItem(bo(e,r))}function Zt(e,t){var n=e.transform.baseVal;return t&&(Array.isArray(t)||(t=[t]),_o(n,t)),n.consolidate()}function Rt(e){return e.flat().join(",").replace(/,?([A-z]),?/g,"$1")}function So(e){return["M",e.x,e.y]}function Yn(e){return["L",e.x,e.y]}function Ao(e,t,n){return["C",e.x,e.y,t.x,t.y,n.x,n.y]}function Ro(e,t){const n=e.length,r=[So(e[0])];for(let i=1;i<n;i++){const a=e[i-1],o=e[i],l=e[i+1];if(!l||!t){r.push(Yn(o));continue}const c=Math.min(t,Jn(o.x-a.x,o.y-a.y),Jn(l.x-o.x,l.y-o.y));if(!c){r.push(Yn(o));continue}const p=un(o,a,c),d=un(o,a,c*.5),v=un(o,l,c),b=un(o,l,c*.5);r.push(Yn(p)),r.push(Ao(d,b,v))}return r}function un(e,t,n){const r=t.x-e.x,i=t.y-e.y,a=Jn(r,i),o=n/a;return{x:e.x+r*o,y:e.y+i*o}}function Jn(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))}function mr(e,t,n){Ae(t)&&(n=t,t=null),t||(t={});const r=Q("path",t);return Ae(n)&&(r.dataset.cornerRadius=String(n)),Ri(r,e)}function Ri(e,t){const n=parseInt(e.dataset.cornerRadius,10)||0;return q(e,{d:Rt(Ro(t,n))}),e}var er="hsl(225, 10%, 15%)",Co="white";function We(e,t){return cr(e.eventDefinitions,function(n){return n.$type===t})}function Po(e){return e.$type==="bpmn:IntermediateThrowEvent"||e.$type==="bpmn:EndEvent"}function ko(e){var t=e.dataObjectRef;return e.isCollection||t&&t.isCollection}function X(e,t,n){var r=pt(e);return n||r.get("color:background-color")||r.get("bioc:fill")||t||Co}function O(e,t,n){var r=pt(e);return n||r.get("color:border-color")||r.get("bioc:stroke")||t||er}function Wt(e,t,n,r){var i=pt(e),a=i.get("label");return r||a&&a.get("color:color")||t||O(e,n)}function Mo(e){var t=e.x+e.width/2,n=e.y+e.height/2,r=e.width/2,i=[["M",t,n],["m",0,-r],["a",r,r,0,1,1,0,2*r],["a",r,r,0,1,1,0,-2*r],["z"]];return Rt(i)}function Ci(e,t){var n=e.x,r=e.y,i=e.width,a=e.height,o=[["M",n+t,r],["l",i-t*2,0],["a",t,t,0,0,1,t,t],["l",0,a-t*2],["a",t,t,0,0,1,-t,t],["l",t*2-i,0],["a",t,t,0,0,1,-t,-t],["l",0,t*2-a],["a",t,t,0,0,1,t,-t],["z"]];return Rt(o)}function To(e){var t=e.width,n=e.height,r=e.x,i=e.y,a=t/2,o=n/2,l=[["M",r+a,i],["l",a,o],["l",-a,o],["l",-a,-o],["z"]];return Rt(l)}function Do(e){var t=e.x,n=e.y,r=e.width,i=e.height,a=[["M",t,n],["l",r,0],["l",0,i],["l",-r,0],["z"]];return Rt(a)}function zt(e,t={}){return{width:Le(e,t),height:Se(e,t)}}function Le(e,t={}){return At(t,"width")?t.width:e.width}function Se(e,t={}){return At(t,"height")?t.height:e.height}function Oo(e,t){return t.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in e)){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(e,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(e)}const No=Object.prototype.toString,Bo=Object.prototype.hasOwnProperty;function Lo(e){return e===void 0}function Io(e){return No.call(e)==="[object Array]"}function Fo(e,t){return Bo.call(e,t)}function Wr(e,t){let n,r;if(Lo(e))return;const i=Io(e)?Vo:$o;for(let a in e)if(Fo(e,a)&&(n=e[a],r=t(n,i(a)),r===!1))return n}function $o(e){return e}function Vo(e){return Number(e)}function Re(e,...t){const n=e.style;return Wr(t,function(r){r&&Wr(r,function(i,a){n[a]=i})}),e}function jo(e,t,n){return arguments.length==2?e.getAttribute(t):n===null?e.removeAttribute(t):(e.setAttribute(t,n),e)}const Wo=Object.prototype.toString;function en(e){return new dt(e)}function dt(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}dt.prototype.add=function(e){return this.list.add(e),this};dt.prototype.remove=function(e){return Wo.call(e)=="[object RegExp]"?this.removeMatching(e):(this.list.remove(e),this)};dt.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this};dt.prototype.toggle=function(e,t){return typeof t<"u"?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this};dt.prototype.array=function(){return Array.from(this.list)};dt.prototype.has=dt.prototype.contains=function(e){return this.list.contains(e)};function Pi(e){for(var t;t=e.firstChild;)e.removeChild(t);return e}function yr(e,t,n){var r=n?e:e.parentNode;return r&&typeof r.closest=="function"&&r.closest(t)||null}var Rn={},Cn,tr,gr;function ki(){Cn=window.addEventListener?"addEventListener":"attachEvent",tr=window.removeEventListener?"removeEventListener":"detachEvent",gr=Cn!=="addEventListener"?"on":""}var zo=Rn.bind=function(e,t,n,r){return Cn||ki(),e[Cn](gr+t,n,r||!1),n},Ho=Rn.unbind=function(e,t,n,r){return tr||ki(),e[tr](gr+t,n,r||!1),n},ct=Oo({__proto__:null,bind:zo,unbind:Ho,default:Rn},[Rn]),Mi=["focus","blur"];function Uo(e,t,n,r,i){return Mi.indexOf(n)!==-1&&(i=!0),ct.bind(e,n,function(a){var o=a.target||a.srcElement;a.delegateTarget=yr(o,t,!0),a.delegateTarget&&r.call(e,a)},i)}function Yo(e,t,n,r){return Mi.indexOf(t)!==-1&&(r=!0),ct.unbind(e,t,n,r)}var nr={bind:Uo,unbind:Yo},Ko=qo,Ti=!1,ln;typeof document<"u"&&(ln=document.createElement("div"),ln.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',Ti=!ln.getElementsByTagName("link").length,ln=void 0);var pe={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:Ti?[1,"X<div>","</div>"]:[0,"",""]};pe.td=pe.th=[3,"<table><tbody><tr>","</tr></tbody></table>"];pe.option=pe.optgroup=[1,'<select multiple="multiple">',"</select>"];pe.thead=pe.tbody=pe.colgroup=pe.caption=pe.tfoot=[1,"<table>","</table>"];pe.polyline=pe.ellipse=pe.polygon=pe.circle=pe.text=pe.line=pe.path=pe.rect=pe.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];function qo(e,t){if(typeof e!="string")throw new TypeError("String expected");t||(t=document);var n=/<([\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var r=n[1];if(r=="body"){var c=t.createElement("html");return c.innerHTML=e,c.removeChild(c.lastChild)}var i=Object.prototype.hasOwnProperty.call(pe,r)?pe[r]:pe._default,a=i[0],o=i[1],l=i[2],c=t.createElement("div");for(c.innerHTML=o+e+l;a--;)c=c.lastChild;if(c.firstChild==c.lastChild)return c.removeChild(c.firstChild);for(var p=t.createDocumentFragment();c.firstChild;)p.appendChild(c.removeChild(c.firstChild));return p}var Ge=Ko;function kf(e,t){return e&&typeof e.matches=="function"&&e.matches(t)||!1}function je(e,t){return t=t||document,t.querySelector(e)}function Go(e,t){return t=t||document,t.querySelectorAll(e)}function Pn(e){e.parentNode&&e.parentNode.removeChild(e)}function Kn(e,t,n,r,i){var a=Yt();a.setTranslate(t,n);var o=Yt();o.setRotate(r||0,0,0);var l=Yt();l.setScale(i||1,i||1),Zt(e,[a,o,l])}function Di(e,t,n){var r=Yt();r.setTranslate(t,n),Zt(e,r)}function Xo(e,t){var n=Yt();n.setRotate(t,0,0),Zt(e,n)}function Zo(e,t){return t={exports:{}},e(t,t.exports),t.exports}var Qo=Zo(function(e){var t=e.exports=function(n,r){if(r||(r=16),n===void 0&&(n=128),n<=0)return"0";for(var i=Math.log(Math.pow(2,n))/Math.log(r),a=2;i===1/0;a*=2)i=Math.log(Math.pow(2,n/a))/Math.log(r)*a;for(var o=i-Math.floor(i),l="",a=0;a<Math.floor(i);a++){var c=Math.floor(Math.random()*r).toString(r);l=c+l}if(o){var p=Math.pow(r,o),c=Math.floor(Math.random()*p).toString(r);l=c+l}var d=parseInt(l,r);return d!==1/0&&d>=Math.pow(2,n)?t(n,r):l};t.rack=function(n,r,i){var a=function(l){var c=0;do{if(c++>10)if(i)n+=i;else throw new Error("too many ID collisions, use more bits");var p=t(n,r)}while(Object.hasOwnProperty.call(o,p));return o[p]=l,p},o=a.hats={};return a.get=function(l){return a.hats[l]},a.set=function(l,c){return a.hats[l]=c,a},a.bits=n||128,a.base=r||16,a}});function rt(e){if(!(this instanceof rt))return new rt(e);e=e||[128,36,1],this._seed=e.length?Qo.rack(e[0],e[1],e[2]):e}rt.prototype.next=function(e){return this._seed(e||!0)};rt.prototype.nextPrefixed=function(e,t){var n;do n=e+this.next(!0);while(this.assigned(n));return this.claim(n,t),n};rt.prototype.claim=function(e,t){this._seed.set(e,t||!0)};rt.prototype.assigned=function(e){return this._seed.get(e)||!1};rt.prototype.unclaim=function(e){delete this._seed.hats[e]};rt.prototype.clear=function(){var e=this._seed.hats,t;for(t in e)this.unclaim(t)};var Jo=new rt,es=10,cn=3,ts=1.5,vn=10,Tt=.95,ns=1,rs=.25;function Ct(e,t,n,r,i,a,o){Ze.call(this,t,o);var l=e&&e.defaultFillColor,c=e&&e.defaultStrokeColor,p=e&&e.defaultLabelColor;function d(f){return n.computeStyle(f,{strokeLinecap:"round",strokeLinejoin:"round",stroke:er,strokeWidth:2,fill:"white"})}function v(f){return n.computeStyle(f,["no-fill"],{strokeLinecap:"round",strokeLinejoin:"round",stroke:er,strokeWidth:2})}function b(f,s){var{ref:u={x:0,y:0},scale:h=1,element:m,parentGfx:S=i._svg}=s,U=Q("marker",{id:f,viewBox:"0 0 20 20",refX:u.x,refY:u.y,markerWidth:20*h,markerHeight:20*h,orient:"auto"});ie(U,m);var j=je(":scope > defs",S);j||(j=Q("defs"),ie(S,j)),ie(j,U)}function g(f,s,u,h){var m=Jo.nextPrefixed("marker-");return E(f,m,s,u,h),"url(#"+m+")"}function E(f,s,u,h,m){if(u==="sequenceflow-end"){var S=Q("path",{d:"M 1 5 L 11 10 L 1 15 Z",...d({fill:m,stroke:m,strokeWidth:1})});b(s,{element:S,ref:{x:11,y:10},scale:.5,parentGfx:f})}if(u==="messageflow-start"){var U=Q("circle",{cx:6,cy:6,r:3.5,...d({fill:h,stroke:m,strokeWidth:1,strokeDasharray:[1e4,1]})});b(s,{element:U,ref:{x:6,y:6},parentGfx:f})}if(u==="messageflow-end"){var j=Q("path",{d:"m 1 5 l 0 -3 l 7 3 l -7 3 z",...d({fill:h,stroke:m,strokeWidth:1,strokeDasharray:[1e4,1]})});b(s,{element:j,ref:{x:8.5,y:5},parentGfx:f})}if(u==="association-start"){var G=Q("path",{d:"M 11 5 L 1 10 L 11 15",...v({fill:"none",stroke:m,strokeWidth:1.5,strokeDasharray:[1e4,1]})});b(s,{element:G,ref:{x:1,y:10},scale:.5,parentGfx:f})}if(u==="association-end"){var he=Q("path",{d:"M 1 5 L 11 10 L 1 15",...v({fill:"none",stroke:m,strokeWidth:1.5,strokeDasharray:[1e4,1]})});b(s,{element:he,ref:{x:11,y:10},scale:.5,parentGfx:f})}if(u==="conditional-flow-marker"){var Ne=Q("path",{d:"M 0 10 L 8 6 L 16 10 L 8 14 Z",...d({fill:h,stroke:m})});b(s,{element:Ne,ref:{x:-1,y:10},scale:.5,parentGfx:f})}if(u==="conditional-default-flow-marker"){var _e=Q("path",{d:"M 6 4 L 10 16",...d({stroke:m,fill:"none"})});b(s,{element:_e,ref:{x:0,y:10},scale:.5,parentGfx:f})}}function R(f,s,u,h,m={}){Ke(h)&&(m=h,h=0),h=h||0,m=d(m);var S=s/2,U=u/2,j=Q("circle",{cx:S,cy:U,r:Math.round((s+u)/4-h),...m});return ie(f,j),j}function T(f,s,u,h,m,S){Ke(m)&&(S=m,m=0),m=m||0,S=d(S);var U=Q("rect",{x:m,y:m,width:s-m*2,height:u-m*2,rx:h,ry:h,...S});return ie(f,U),U}function z(f,s,u,h){var m=s/2,S=u/2,U=[{x:m,y:0},{x:s,y:S},{x:m,y:u},{x:0,y:S}],j=U.map(function(he){return he.x+","+he.y}).join(" ");h=d(h);var G=Q("polygon",{...h,points:j});return ie(f,G),G}function W(f,s,u,h){u=v(u);var m=mr(s,u,h);return ie(f,m),m}function _(f,s,u){return W(f,s,u,5)}function y(f,s,u){u=v(u);var h=Q("path",{...u,d:s});return ie(f,h),h}function x(f,s,u,h){return y(s,u,H({"data-marker":f},h))}function C(f){return te[f]}function N(f){return function(s,u,h){return C(f)(s,u,h)}}var w={"bpmn:MessageEventDefinition":function(f,s,u={},h){var m=r.getScaledPath("EVENT_MESSAGE",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:s.width,containerHeight:s.height,position:{mx:.235,my:.315}}),S=h?O(s,c,u.stroke):X(s,l,u.fill),U=h?X(s,l,u.fill):O(s,c,u.stroke),j=y(f,m,{fill:S,stroke:U,strokeWidth:1});return j},"bpmn:TimerEventDefinition":function(f,s,u={}){var h=R(f,s.width,s.height,.2*s.height,{fill:X(s,l,u.fill),stroke:O(s,c,u.stroke),strokeWidth:2}),m=r.getScaledPath("EVENT_TIMER_WH",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:s.width,containerHeight:s.height,position:{mx:.5,my:.5}});y(f,m,{stroke:O(s,c,u.stroke),strokeWidth:2});for(var S=0;S<12;S++){var U=r.getScaledPath("EVENT_TIMER_LINE",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:s.width,containerHeight:s.height,position:{mx:.5,my:.5}}),j=s.width/2,G=s.height/2;y(f,U,{strokeWidth:1,stroke:O(s,c,u.stroke),transform:"rotate("+S*30+","+G+","+j+")"})}return h},"bpmn:EscalationEventDefinition":function(f,s,u={},h){var m=r.getScaledPath("EVENT_ESCALATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:.5,my:.2}}),S=h?O(s,c,u.stroke):X(s,l,u.fill);return y(f,m,{fill:S,stroke:O(s,c,u.stroke),strokeWidth:1})},"bpmn:ConditionalEventDefinition":function(f,s,u={}){var h=r.getScaledPath("EVENT_CONDITIONAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:.5,my:.222}});return y(f,h,{fill:X(s,l,u.fill),stroke:O(s,c,u.stroke),strokeWidth:1})},"bpmn:LinkEventDefinition":function(f,s,u={},h){var m=r.getScaledPath("EVENT_LINK",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:.57,my:.263}}),S=h?O(s,c,u.stroke):X(s,l,u.fill);return y(f,m,{fill:S,stroke:O(s,c,u.stroke),strokeWidth:1})},"bpmn:ErrorEventDefinition":function(f,s,u={},h){var m=r.getScaledPath("EVENT_ERROR",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:s.width,containerHeight:s.height,position:{mx:.2,my:.722}}),S=h?O(s,c,u.stroke):X(s,l,u.fill);return y(f,m,{fill:S,stroke:O(s,c,u.stroke),strokeWidth:1})},"bpmn:CancelEventDefinition":function(f,s,u={},h){var m=r.getScaledPath("EVENT_CANCEL_45",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:.638,my:-.055}}),S=h?O(s,c,u.stroke):"none",U=y(f,m,{fill:S,stroke:O(s,c,u.stroke),strokeWidth:1});return Xo(U,45),U},"bpmn:CompensateEventDefinition":function(f,s,u={},h){var m=r.getScaledPath("EVENT_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:.22,my:.5}}),S=h?O(s,c,u.stroke):X(s,l,u.fill);return y(f,m,{fill:S,stroke:O(s,c,u.stroke),strokeWidth:1})},"bpmn:SignalEventDefinition":function(f,s,u={},h){var m=r.getScaledPath("EVENT_SIGNAL",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:s.width,containerHeight:s.height,position:{mx:.5,my:.2}}),S=h?O(s,c,u.stroke):X(s,l,u.fill);return y(f,m,{strokeWidth:1,fill:S,stroke:O(s,c,u.stroke)})},"bpmn:MultipleEventDefinition":function(f,s,u={},h){var m=r.getScaledPath("EVENT_MULTIPLE",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:s.width,containerHeight:s.height,position:{mx:.222,my:.36}}),S=h?O(s,c,u.stroke):X(s,l,u.fill);return y(f,m,{fill:S,strokeWidth:1})},"bpmn:ParallelMultipleEventDefinition":function(f,s,u={}){var h=r.getScaledPath("EVENT_PARALLEL_MULTIPLE",{xScaleFactor:1.2,yScaleFactor:1.2,containerWidth:s.width,containerHeight:s.height,position:{mx:.458,my:.194}});return y(f,h,{fill:X(s,l,u.fill),stroke:O(s,c,u.stroke),strokeWidth:1})},"bpmn:TerminateEventDefinition":function(f,s,u={}){var h=R(f,s.width,s.height,8,{fill:O(s,c,u.stroke),stroke:O(s,c,u.stroke),strokeWidth:4});return h}};function M(f,s,u={}){var h=se(f),m=Po(h);return h.get("eventDefinitions")&&h.get("eventDefinitions").length>1?h.get("parallelMultiple")?w["bpmn:ParallelMultipleEventDefinition"](s,f,u,m):w["bpmn:MultipleEventDefinition"](s,f,u,m):We(h,"bpmn:MessageEventDefinition")?w["bpmn:MessageEventDefinition"](s,f,u,m):We(h,"bpmn:TimerEventDefinition")?w["bpmn:TimerEventDefinition"](s,f,u,m):We(h,"bpmn:ConditionalEventDefinition")?w["bpmn:ConditionalEventDefinition"](s,f,u,m):We(h,"bpmn:SignalEventDefinition")?w["bpmn:SignalEventDefinition"](s,f,u,m):We(h,"bpmn:EscalationEventDefinition")?w["bpmn:EscalationEventDefinition"](s,f,u,m):We(h,"bpmn:LinkEventDefinition")?w["bpmn:LinkEventDefinition"](s,f,u,m):We(h,"bpmn:ErrorEventDefinition")?w["bpmn:ErrorEventDefinition"](s,f,u,m):We(h,"bpmn:CancelEventDefinition")?w["bpmn:CancelEventDefinition"](s,f,u,m):We(h,"bpmn:CompensateEventDefinition")?w["bpmn:CompensateEventDefinition"](s,f,u,m):We(h,"bpmn:TerminateEventDefinition")?w["bpmn:TerminateEventDefinition"](s,f,u,m):null}var k={ParticipantMultiplicityMarker:function(f,s,u={}){var h=Le(s,u),m=Se(s,u),S=r.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:h,containerHeight:m,position:{mx:(h/2-6)/h,my:(m-15)/m}});x("participant-multiplicity",f,S,{strokeWidth:2,fill:X(s,l,u.fill),stroke:O(s,c,u.stroke)})},SubProcessMarker:function(f,s,u={}){var h=T(f,14,14,0,{strokeWidth:1,fill:X(s,l,u.fill),stroke:O(s,c,u.stroke)});Di(h,s.width/2-7.5,s.height-20);var m=r.getScaledPath("MARKER_SUB_PROCESS",{xScaleFactor:1.5,yScaleFactor:1.5,containerWidth:s.width,containerHeight:s.height,position:{mx:(s.width/2-7.5)/s.width,my:(s.height-20)/s.height}});x("sub-process",f,m,{fill:X(s,l,u.fill),stroke:O(s,c,u.stroke)})},ParallelMarker:function(f,s,u){var h=Le(s,u),m=Se(s,u),S=r.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:h,containerHeight:m,position:{mx:(h/2+u.parallel)/h,my:(m-20)/m}});x("parallel",f,S,{fill:X(s,l,u.fill),stroke:O(s,c,u.stroke)})},SequentialMarker:function(f,s,u){var h=r.getScaledPath("MARKER_SEQUENTIAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:(s.width/2+u.seq)/s.width,my:(s.height-19)/s.height}});x("sequential",f,h,{fill:X(s,l,u.fill),stroke:O(s,c,u.stroke)})},CompensationMarker:function(f,s,u){var h=r.getScaledPath("MARKER_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:(s.width/2+u.compensation)/s.width,my:(s.height-13)/s.height}});x("compensation",f,h,{strokeWidth:1,fill:X(s,l,u.fill),stroke:O(s,c,u.stroke)})},LoopMarker:function(f,s,u){var h=Le(s,u),m=Se(s,u),S=r.getScaledPath("MARKER_LOOP",{xScaleFactor:1,yScaleFactor:1,containerWidth:h,containerHeight:m,position:{mx:(h/2+u.loop)/h,my:(m-7)/m}});x("loop",f,S,{strokeWidth:1.5,fill:"none",stroke:O(s,c,u.stroke),strokeMiterlimit:.5})},AdhocMarker:function(f,s,u){var h=Le(s,u),m=Se(s,u),S=r.getScaledPath("MARKER_ADHOC",{xScaleFactor:1,yScaleFactor:1,containerWidth:h,containerHeight:m,position:{mx:(h/2+u.adhoc)/h,my:(m-15)/m}});x("adhoc",f,S,{strokeWidth:1,fill:O(s,c,u.stroke),stroke:O(s,c,u.stroke)})}};function I(f,s,u,h){k[f](s,u,h)}function B(f,s,u,h={}){h={fill:h.fill,stroke:h.stroke,width:Le(s,h),height:Se(s,h)};var m=se(s),S=u&&u.includes("SubProcessMarker");S?h={...h,seq:-21,parallel:-22,compensation:-42,loop:-18,adhoc:10}:h={...h,seq:-5,parallel:-6,compensation:-27,loop:0,adhoc:10},L(u,function(G){I(G,f,s,h)}),m.get("isForCompensation")&&I("CompensationMarker",f,s,h),D(m,"bpmn:AdHocSubProcess")&&I("AdhocMarker",f,s,h);var U=m.get("loopCharacteristics"),j=U&&U.get("isSequential");U&&(j===void 0&&I("LoopMarker",f,s,h),j===!1&&I("ParallelMarker",f,s,h),j===!0&&I("SequentialMarker",f,s,h))}function V(f,s,u={}){u=H({size:{width:100}},u);var h=a.createText(s||"",u);return Ie(h).add("djs-label"),ie(f,h),h}function Z(f,s,u,h={}){var m=se(s),S=zt({x:s.x,y:s.y,width:s.width,height:s.height},h);return V(f,m.name,{align:u,box:S,padding:7,style:{fill:Wt(s,p,c,h.stroke)}})}function Oe(f,s,u={}){var h={width:90,height:30,x:s.width/2+s.x,y:s.height/2+s.y};return V(f,An(s),{box:h,fitBox:!0,style:H({},a.getExternalStyle(),{fill:Wt(s,p,c,u.stroke)})})}function ae(f,s,u,h={}){var m=Lr(u),S=V(f,s,{box:{height:30,width:m?Se(u,h):Le(u,h)},align:"center-middle",style:{fill:Wt(u,p,c,h.stroke)}});if(m){var U=-1*Se(u,h);Kn(S,0,-U,270)}}function J(f,s,u={}){var{width:h,height:m}=zt(s,u);return T(f,h,m,vn,{...u,fill:X(s,l,u.fill),fillOpacity:Tt,stroke:O(s,c,u.stroke)})}function xe(f,s,u={}){var h=se(s),m=X(s,l,u.fill),S=O(s,c,u.stroke);return(h.get("associationDirection")==="One"||h.get("associationDirection")==="Both")&&(u.markerEnd=g(f,"association-end",m,S)),h.get("associationDirection")==="Both"&&(u.markerStart=g(f,"association-start",m,S)),u=ee(u,["markerStart","markerEnd"]),_(f,s.waypoints,{...u,stroke:S,strokeDasharray:"0, 5"})}function be(f,s,u={}){var h=X(s,l,u.fill),m=O(s,c,u.stroke),S=r.getScaledPath("DATA_OBJECT_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:.474,my:.296}}),U=y(f,S,{fill:h,fillOpacity:Tt,stroke:m}),j=se(s);if(ko(j)){var G=r.getScaledPath("DATA_OBJECT_COLLECTION_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:.33,my:(s.height-18)/s.height}});y(f,G,{strokeWidth:2,fill:h,stroke:m})}return U}function oe(f,s,u={}){return R(f,s.width,s.height,{fillOpacity:Tt,...u,fill:X(s,l,u.fill),stroke:O(s,c,u.stroke)})}function de(f,s,u={}){return z(f,s.width,s.height,{fill:X(s,l,u.fill),fillOpacity:Tt,stroke:O(s,c,u.stroke)})}function A(f,s,u={}){var h=T(f,Le(s,u),Se(s,u),0,{fill:X(s,l,u.fill),fillOpacity:u.fillOpacity||Tt,stroke:O(s,c,u.stroke),strokeWidth:1.5}),m=se(s);if(D(m,"bpmn:Lane")){var S=m.get("name");ae(f,S,s,u)}return h}function P(f,s,u={}){var h=J(f,s,u);to(s)&&q(h,{strokeDasharray:"0, 5.5",strokeWidth:2.5});var m=bt(s);return Z(f,s,m?"center-top":"center-middle",u),m?B(f,s,void 0,u):B(f,s,["SubProcessMarker"],u),h}function F(f,s,u={}){var h=J(f,s,u);return Z(f,s,"center-middle",u),B(f,s,void 0,u),h}var te=this.handlers={"bpmn:AdHocSubProcess":function(f,s,u={}){return bt(s)?u=ee(u,["fill","stroke","width","height"]):u=ee(u,["fill","stroke"]),P(f,s,u)},"bpmn:Association":function(f,s,u={}){return u=ee(u,["fill","stroke"]),xe(f,s,u)},"bpmn:BoundaryEvent":function(f,s,u={}){var{renderIcon:h=!0}=u;u=ee(u,["fill","stroke"]);var m=se(s),S=m.get("cancelActivity");u={strokeWidth:1.5,fill:X(s,l,u.fill),fillOpacity:ns,stroke:O(s,c,u.stroke)},S||(u.strokeDasharray="6");var U=oe(f,s,u);return R(f,s.width,s.height,cn,{...u,fill:"none"}),h&&M(s,f,u),U},"bpmn:BusinessRuleTask":function(f,s,u={}){u=ee(u,["fill","stroke"]);var h=F(f,s,u),m=r.getScaledPath("TASK_TYPE_BUSINESS_RULE_MAIN",{abspos:{x:8,y:8}}),S=y(f,m);q(S,{fill:X(s,l,u.fill),stroke:O(s,c,u.stroke),strokeWidth:1});var U=r.getScaledPath("TASK_TYPE_BUSINESS_RULE_HEADER",{abspos:{x:8,y:8}}),j=y(f,U);return q(j,{fill:O(s,c,u.stroke),stroke:O(s,c,u.stroke),strokeWidth:1}),h},"bpmn:CallActivity":function(f,s,u={}){return u=ee(u,["fill","stroke"]),P(f,s,{strokeWidth:5,...u})},"bpmn:ComplexGateway":function(f,s,u={}){u=ee(u,["fill","stroke"]);var h=de(f,s,u),m=r.getScaledPath("GATEWAY_COMPLEX",{xScaleFactor:.5,yScaleFactor:.5,containerWidth:s.width,containerHeight:s.height,position:{mx:.46,my:.26}});return y(f,m,{fill:O(s,c,u.stroke),stroke:O(s,c,u.stroke),strokeWidth:1}),h},"bpmn:DataInput":function(f,s,u={}){u=ee(u,["fill","stroke"]);var h=r.getRawPath("DATA_ARROW"),m=be(f,s,u);return y(f,h,{fill:"none",stroke:O(s,c,u.stroke),strokeWidth:1}),m},"bpmn:DataInputAssociation":function(f,s,u={}){return u=ee(u,["fill","stroke"]),xe(f,s,{...u,markerEnd:g(f,"association-end",X(s,l,u.fill),O(s,c,u.stroke))})},"bpmn:DataObject":function(f,s,u={}){return u=ee(u,["fill","stroke"]),be(f,s,u)},"bpmn:DataObjectReference":N("bpmn:DataObject"),"bpmn:DataOutput":function(f,s,u={}){u=ee(u,["fill","stroke"]);var h=r.getRawPath("DATA_ARROW"),m=be(f,s,u);return y(f,h,{strokeWidth:1,fill:X(s,l,u.fill),stroke:O(s,c,u.stroke)}),m},"bpmn:DataOutputAssociation":function(f,s,u={}){return u=ee(u,["fill","stroke"]),xe(f,s,{...u,markerEnd:g(f,"association-end",X(s,l,u.fill),O(s,c,u.stroke))})},"bpmn:DataStoreReference":function(f,s,u={}){u=ee(u,["fill","stroke"]);var h=r.getScaledPath("DATA_STORE",{xScaleFactor:1,yScaleFactor:1,containerWidth:s.width,containerHeight:s.height,position:{mx:0,my:.133}});return y(f,h,{fill:X(s,l,u.fill),fillOpacity:Tt,stroke:O(s,c,u.stroke),strokeWidth:2})},"bpmn:EndEvent":function(f,s,u={}){var{renderIcon:h=!0}=u;u=ee(u,["fill","stroke"]);var m=oe(f,s,{...u,strokeWidth:4});return h&&M(s,f,u),m},"bpmn:EventBasedGateway":function(f,s,u={}){u=ee(u,["fill","stroke"]);var h=se(s),m=de(f,s,u);R(f,s.width,s.height,s.height*.2,{fill:X(s,"none",u.fill),stroke:O(s,c,u.stroke),strokeWidth:1});var S=h.get("eventGatewayType"),U=!!h.get("instantiate");function j(){var he=r.getScaledPath("GATEWAY_EVENT_BASED",{xScaleFactor:.18,yScaleFactor:.18,containerWidth:s.width,containerHeight:s.height,position:{mx:.36,my:.44}});y(f,he,{fill:"none",stroke:O(s,c,u.stroke),strokeWidth:2})}if(S==="Parallel"){var G=r.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:s.width,containerHeight:s.height,position:{mx:.474,my:.296}});y(f,G,{fill:"none",stroke:O(s,c,u.stroke),strokeWidth:1})}else S==="Exclusive"&&(U||R(f,s.width,s.height,s.height*.26,{fill:"none",stroke:O(s,c,u.stroke),strokeWidth:1}),j());return m},"bpmn:ExclusiveGateway":function(f,s,u={}){u=ee(u,["fill","stroke"]);var h=de(f,s,u),m=r.getScaledPath("GATEWAY_EXCLUSIVE",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:s.width,containerHeight:s.height,position:{mx:.32,my:.3}}),S=pt(s);return S.get("isMarkerVisible")&&y(f,m,{fill:O(s,c,u.stroke),stroke:O(s,c,u.stroke),strokeWidth:1}),h},"bpmn:Gateway":function(f,s,u={}){return u=ee(u,["fill","stroke"]),de(f,s,u)},"bpmn:Group":function(f,s,u={}){return u=ee(u,["fill","stroke","width","height"]),T(f,s.width,s.height,vn,{stroke:O(s,c,u.stroke),strokeWidth:1.5,strokeDasharray:"10, 6, 0, 6",fill:"none",pointerEvents:"none",width:Le(s,u),height:Se(s,u)})},"bpmn:InclusiveGateway":function(f,s,u={}){u=ee(u,["fill","stroke"]);var h=de(f,s,u);return R(f,s.width,s.height,s.height*.24,{fill:X(s,l,u.fill),stroke:O(s,c,u.stroke),strokeWidth:2.5}),h},"bpmn:IntermediateEvent":function(f,s,u={}){var{renderIcon:h=!0}=u;u=ee(u,["fill","stroke"]);var m=oe(f,s,{...u,strokeWidth:1.5});return R(f,s.width,s.height,cn,{fill:"none",stroke:O(s,c,u.stroke),strokeWidth:1.5}),h&&M(s,f,u),m},"bpmn:IntermediateCatchEvent":N("bpmn:IntermediateEvent"),"bpmn:IntermediateThrowEvent":N("bpmn:IntermediateEvent"),"bpmn:Lane":function(f,s,u={}){return u=ee(u,["fill","stroke","width","height"]),A(f,s,{...u,fillOpacity:rs})},"bpmn:ManualTask":function(f,s,u={}){u=ee(u,["fill","stroke"]);var h=F(f,s,u),m=r.getScaledPath("TASK_TYPE_MANUAL",{abspos:{x:17,y:15}});return y(f,m,{fill:X(s,l,u.fill),stroke:O(s,c,u.stroke),strokeWidth:.5}),h},"bpmn:MessageFlow":function(f,s,u={}){u=ee(u,["fill","stroke"]);var h=se(s),m=pt(s),S=X(s,l,u.fill),U=O(s,c,u.stroke),j=_(f,s.waypoints,{markerEnd:g(f,"messageflow-end",S,U),markerStart:g(f,"messageflow-start",S,U),stroke:U,strokeDasharray:"10, 11",strokeWidth:1.5});if(h.get("messageRef")){var G=j.getPointAtLength(j.getTotalLength()/2),he=r.getScaledPath("MESSAGE_FLOW_MARKER",{abspos:{x:G.x,y:G.y}}),Ne={strokeWidth:1};m.get("messageVisibleKind")==="initiating"?(Ne.fill=S,Ne.stroke=U):(Ne.fill=U,Ne.stroke=S);var _e=y(f,he,Ne),le=h.get("messageRef"),Be=le.get("name"),ne=V(f,Be,{align:"center-top",fitBox:!0,style:{fill:U}}),ot=_e.getBBox(),sn=ne.getBBox(),ke=G.x-sn.width/2,Y=G.y+ot.height/2+es;Kn(ne,ke,Y,0)}return j},"bpmn:ParallelGateway":function(f,s,u={}){u=ee(u,["fill","stroke"]);var h=de(f,s,u),m=r.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.6,yScaleFactor:.6,containerWidth:s.width,containerHeight:s.height,position:{mx:.46,my:.2}});return y(f,m,{fill:O(s,c,u.stroke),stroke:O(s,c,u.stroke),strokeWidth:1}),h},"bpmn:Participant":function(f,s,u={}){u=ee(u,["fill","stroke","width","height"]);var h=A(f,s,u),m=bt(s),S=Lr(s),U=se(s),j=U.get("name");if(m){var G=S?[{x:30,y:0},{x:30,y:Se(s,u)}]:[{x:0,y:30},{x:Le(s,u),y:30}];W(f,G,{stroke:O(s,c,u.stroke),strokeWidth:ts}),ae(f,j,s,u)}else{var he=zt(s,u);S||(he.height=Le(s,u),he.width=Se(s,u));var Ne=V(f,j,{box:he,align:"center-middle",style:{fill:Wt(s,p,c,u.stroke)}});if(!S){var _e=-1*Se(s,u);Kn(Ne,0,-_e,270)}}return U.get("participantMultiplicity")&&I("ParticipantMultiplicityMarker",f,s,u),h},"bpmn:ReceiveTask":function(f,s,u={}){u=ee(u,["fill","stroke"]);var h=se(s),m=F(f,s,u),S;return h.get("instantiate")?(R(f,28,28,20*.22,{fill:X(s,l,u.fill),stroke:O(s,c,u.stroke),strokeWidth:1}),S=r.getScaledPath("TASK_TYPE_INSTANTIATING_SEND",{abspos:{x:7.77,y:9.52}})):S=r.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:21,containerHeight:14,position:{mx:.3,my:.4}}),y(f,S,{fill:X(s,l,u.fill),stroke:O(s,c,u.stroke),strokeWidth:1}),m},"bpmn:ScriptTask":function(f,s,u={}){u=ee(u,["fill","stroke"]);var h=F(f,s,u),m=r.getScaledPath("TASK_TYPE_SCRIPT",{abspos:{x:15,y:20}});return y(f,m,{fill:X(s,l,u.fill),stroke:O(s,c,u.stroke),strokeWidth:1}),h},"bpmn:SendTask":function(f,s,u={}){u=ee(u,["fill","stroke"]);var h=F(f,s,u),m=r.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:1,yScaleFactor:1,containerWidth:21,containerHeight:14,position:{mx:.285,my:.357}});return y(f,m,{fill:O(s,c,u.stroke),stroke:X(s,l,u.fill),strokeWidth:1}),h},"bpmn:SequenceFlow":function(f,s,u={}){u=ee(u,["fill","stroke"]);var h=X(s,l,u.fill),m=O(s,c,u.stroke),S=_(f,s.waypoints,{markerEnd:g(f,"sequenceflow-end",h,m),stroke:m}),U=se(s),{source:j}=s;if(j){var G=se(j);U.get("conditionExpression")&&D(G,"bpmn:Activity")&&q(S,{markerStart:g(f,"conditional-flow-marker",h,m)}),G.get("default")&&(D(G,"bpmn:Gateway")||D(G,"bpmn:Activity"))&&G.get("default")===U&&q(S,{markerStart:g(f,"conditional-default-flow-marker",h,m)})}return S},"bpmn:ServiceTask":function(f,s,u={}){u=ee(u,["fill","stroke"]);var h=F(f,s,u);R(f,10,10,{fill:X(s,l,u.fill),stroke:"none",transform:"translate(6, 6)"});var m=r.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:12,y:18}});y(f,m,{fill:X(s,l,u.fill),stroke:O(s,c,u.stroke),strokeWidth:1}),R(f,10,10,{fill:X(s,l,u.fill),stroke:"none",transform:"translate(11, 10)"});var S=r.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:17,y:22}});return y(f,S,{fill:X(s,l,u.fill),stroke:O(s,c,u.stroke),strokeWidth:1}),h},"bpmn:StartEvent":function(f,s,u={}){var{renderIcon:h=!0}=u;u=ee(u,["fill","stroke"]);var m=se(s);m.get("isInterrupting")||(u={...u,strokeDasharray:"6"});var S=oe(f,s,u);return h&&M(s,f,u),S},"bpmn:SubProcess":function(f,s,u={}){return bt(s)?u=ee(u,["fill","stroke","width","height"]):u=ee(u,["fill","stroke"]),P(f,s,u)},"bpmn:Task":function(f,s,u={}){return u=ee(u,["fill","stroke"]),F(f,s,u)},"bpmn:TextAnnotation":function(f,s,u={}){u=ee(u,["fill","stroke","width","height"]);var{width:h,height:m}=zt(s,u),S=T(f,h,m,0,0,{fill:"none",stroke:"none"}),U=r.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:h,containerHeight:m,position:{mx:0,my:0}});y(f,U,{stroke:O(s,c,u.stroke)});var j=se(s),G=j.get("text")||"";return V(f,G,{align:"left-top",box:zt(s,u),padding:7,style:{fill:Wt(s,p,c,u.stroke)}}),S},"bpmn:Transaction":function(f,s,u={}){bt(s)?u=ee(u,["fill","stroke","width","height"]):u=ee(u,["fill","stroke"]);var h=P(f,s,{strokeWidth:1.5,...u}),m=n.style(["no-fill","no-events"],{stroke:O(s,c,u.stroke),strokeWidth:1.5}),S=bt(s);return S||(u={}),T(f,Le(s,u),Se(s,u),vn-cn,cn,m),h},"bpmn:UserTask":function(f,s,u={}){u=ee(u,["fill","stroke"]);var h=F(f,s,u),m=15,S=12,U=r.getScaledPath("TASK_TYPE_USER_1",{abspos:{x:m,y:S}});y(f,U,{fill:X(s,l,u.fill),stroke:O(s,c,u.stroke),strokeWidth:.5});var j=r.getScaledPath("TASK_TYPE_USER_2",{abspos:{x:m,y:S}});y(f,j,{fill:X(s,l,u.fill),stroke:O(s,c,u.stroke),strokeWidth:.5});var G=r.getScaledPath("TASK_TYPE_USER_3",{abspos:{x:m,y:S}});return y(f,G,{fill:O(s,c,u.stroke),stroke:O(s,c,u.stroke),strokeWidth:.5}),h},label:function(f,s,u={}){return Oe(f,s,u)}};this._drawPath=y,this._renderer=C}Xe(Ct,Ze);Ct.$inject=["config.bpmnRenderer","eventBus","styles","pathMap","canvas","textRenderer"];Ct.prototype.canRender=function(e){return D(e,"bpmn:BaseElement")};Ct.prototype.drawShape=function(e,t,n={}){var{type:r}=t,i=this._renderer(r);return i(e,t,n)};Ct.prototype.drawConnection=function(e,t,n={}){var{type:r}=t,i=this._renderer(r);return i(e,t,n)};Ct.prototype.getShapePath=function(e){return D(e,"bpmn:Event")?Mo(e):D(e,"bpmn:Activity")?Ci(e,vn):D(e,"bpmn:Gateway")?To(e):Do(e)};function ee(e,t=[]){return t.reduce((n,r)=>(e[r]&&(n[r]=e[r]),n),{})}var is=0,as={width:150,height:50};function os(e){var t=e.split("-");return{horizontal:t[0]||"center",vertical:t[1]||"top"}}function ss(e){return Ke(e)?H({top:0,left:0,right:0,bottom:0},e):{top:e,left:e,right:e,bottom:e}}function us(e,t){t.textContent=e;var n;try{var r,i=e==="";return t.textContent=i?"dummy":e,n=t.getBBox(),r={width:n.width+n.x*2,height:n.height},i&&(r.width=0),r}catch{return{width:0,height:0}}}function ls(e,t,n){for(var r=e.shift(),i=r,a;;){if(a=us(i,n),a.width=i?a.width:0,i===" "||i===""||a.width<Math.round(t)||i.length<2)return cs(e,i,r,a);i=ps(i,a.width,t)}}function cs(e,t,n,r){if(t.length<n.length){var i=n.slice(t.length).trim();e.unshift(i)}return{width:r.width,height:r.height,text:t}}var zr="­";function fs(e,t){var n=e.split(/(\s|-|\u00AD)/g),r,i=[],a=0;if(n.length>1)for(;r=n.shift();)if(r.length+a<t)i.push(r),a+=r.length;else{(r==="-"||r===zr)&&i.pop();break}var o=i[i.length-1];return o&&o===zr&&(i[i.length-1]="-"),i.join("")}function ps(e,t,n){var r=Math.max(e.length*(n/t),1),i=fs(e,r);return i||(i=e.slice(0,Math.max(Math.round(r-1),1))),i}function hs(){var e=document.getElementById("helper-svg");return e||(e=Q("svg"),q(e,{id:"helper-svg"}),Re(e,{visibility:"hidden",position:"fixed",width:0,height:0}),document.body.appendChild(e)),e}function Bn(e){this._config=H({},{size:as,padding:is,style:{},align:"center-top"},e||{})}Bn.prototype.createText=function(e,t){return this.layoutText(e,t).element};Bn.prototype.getDimensions=function(e,t){return this.layoutText(e,t).dimensions};Bn.prototype.layoutText=function(e,t){var n=H({},this._config.size,t.box),r=H({},this._config.style,t.style),i=os(t.align||this._config.align),a=ss(t.padding!==void 0?t.padding:this._config.padding),o=t.fitBox||!1,l=ds(r),c=e.split(/\u00AD?\r?\n/),p=[],d=n.width-a.left-a.right,v=Q("text");q(v,{x:0,y:0}),q(v,r);var b=hs();for(ie(b,v);c.length;)p.push(ls(c,d,v));i.vertical==="middle"&&(a.top=a.bottom=0);var g=Nt(p,function(W,_,y){return W+(l||_.height)},0)+a.top+a.bottom,E=Nt(p,function(W,_,y){return _.width>W?_.width:W},0),R=a.top;i.vertical==="middle"&&(R+=(n.height-g)/2),R-=(l||p[0].height)/4;var T=Q("text");q(T,r),L(p,function(W){var _;switch(R+=l||W.height,i.horizontal){case"left":_=a.left;break;case"right":_=(o?E:d)-a.right-W.width;break;default:_=Math.max(((o?E:d)-W.width)/2+a.left,0)}var y=Q("tspan");q(y,{x:_,y:R}),y.textContent=W.text,ie(T,y)}),Ye(v);var z={width:E,height:g};return{dimensions:z,element:T}};function ds(e){if("fontSize"in e&&"lineHeight"in e)return e.lineHeight*parseInt(e.fontSize,10)}var ms=12,ys=1.2,gs=30;function Oi(e){var t=H({fontFamily:"Arial, sans-serif",fontSize:ms,fontWeight:"normal",lineHeight:ys},e&&e.defaultStyle||{}),n=parseInt(t.fontSize,10)-1,r=H({},t,{fontSize:n},e&&e.externalStyle||{}),i=new Bn({style:t});this.getExternalLabelBounds=function(a,o){var l=i.getDimensions(o,{box:{width:90,height:30},style:r});return{x:Math.round(a.x+a.width/2-l.width/2),y:Math.round(a.y),width:Math.ceil(l.width),height:Math.ceil(l.height)}},this.getTextAnnotationBounds=function(a,o){var l=i.getDimensions(o,{box:a,style:t,align:"left-top",padding:5});return{x:a.x,y:a.y,width:a.width,height:Math.max(gs,Math.round(l.height))}},this.createText=function(a,o){return i.createText(a,o||{})},this.getDefaultStyle=function(){return t},this.getExternalStyle=function(){return r}}Oi.$inject=["config.textRenderer"];function vs(){this.pathMap={EVENT_MESSAGE:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:36,width:36,heightElements:[6,14],widthElements:[10.5,21]},EVENT_SIGNAL:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x1},0 Z",height:36,width:36,heightElements:[18],widthElements:[10,20]},EVENT_ESCALATION:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x0},-{e.y1} l -{e.x0},{e.y1} Z",height:36,width:36,heightElements:[20,7],widthElements:[8]},EVENT_CONDITIONAL:{d:"M {e.x0},{e.y0} l {e.x1},0 l 0,{e.y2} l -{e.x1},0 Z M {e.x2},{e.y3} l {e.x0},0 M {e.x2},{e.y4} l {e.x0},0 M {e.x2},{e.y5} l {e.x0},0 M {e.x2},{e.y6} l {e.x0},0 M {e.x2},{e.y7} l {e.x0},0 M {e.x2},{e.y8} l {e.x0},0 ",height:36,width:36,heightElements:[8.5,14.5,18,11.5,14.5,17.5,20.5,23.5,26.5],widthElements:[10.5,14.5,12.5]},EVENT_LINK:{d:"m {mx},{my} 0,{e.y0} -{e.x1},0 0,{e.y1} {e.x1},0 0,{e.y0} {e.x0},-{e.y2} -{e.x0},-{e.y2} z",height:36,width:36,heightElements:[4.4375,6.75,7.8125],widthElements:[9.84375,13.5]},EVENT_ERROR:{d:"m {mx},{my} {e.x0},-{e.y0} {e.x1},-{e.y1} {e.x2},{e.y2} {e.x3},-{e.y3} -{e.x4},{e.y4} -{e.x5},-{e.y5} z",height:36,width:36,heightElements:[.023,8.737,8.151,16.564,10.591,8.714],widthElements:[.085,6.672,6.97,4.273,5.337,6.636]},EVENT_CANCEL_45:{d:"m {mx},{my} -{e.x1},0 0,{e.x0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:36,width:36,heightElements:[4.75,8.5],widthElements:[4.75,8.5]},EVENT_COMPENSATION:{d:"m {mx},{my} {e.x0},-{e.y0} 0,{e.y1} z m {e.x1},-{e.y2} {e.x2},-{e.y3} 0,{e.y1} -{e.x2},-{e.y3} z",height:36,width:36,heightElements:[6.5,13,.4,6.1],widthElements:[9,9.3,8.7]},EVENT_TIMER_WH:{d:"M {mx},{my} l {e.x0},-{e.y0} m -{e.x0},{e.y0} l {e.x1},{e.y1} ",height:36,width:36,heightElements:[10,2],widthElements:[3,7]},EVENT_TIMER_LINE:{d:"M {mx},{my} m {e.x0},{e.y0} l -{e.x1},{e.y1} ",height:36,width:36,heightElements:[10,3],widthElements:[0,0]},EVENT_MULTIPLE:{d:"m {mx},{my} {e.x1},-{e.y0} {e.x1},{e.y0} -{e.x0},{e.y1} -{e.x2},0 z",height:36,width:36,heightElements:[6.28099,12.56199],widthElements:[3.1405,9.42149,12.56198]},EVENT_PARALLEL_MULTIPLE:{d:"m {mx},{my} {e.x0},0 0,{e.y1} {e.x1},0 0,{e.y0} -{e.x1},0 0,{e.y1} -{e.x0},0 0,-{e.y1} -{e.x1},0 0,-{e.y0} {e.x1},0 z",height:36,width:36,heightElements:[2.56228,7.68683],widthElements:[2.56228,7.68683]},GATEWAY_EXCLUSIVE:{d:"m {mx},{my} {e.x0},{e.y0} {e.x1},{e.y0} {e.x2},0 {e.x4},{e.y2} {e.x4},{e.y1} {e.x2},0 {e.x1},{e.y3} {e.x0},{e.y3} {e.x3},0 {e.x5},{e.y1} {e.x5},{e.y2} {e.x3},0 z",height:17.5,width:17.5,heightElements:[8.5,6.5312,-6.5312,-8.5],widthElements:[6.5,-6.5,3,-3,5,-5]},GATEWAY_PARALLEL:{d:"m {mx},{my} 0,{e.y1} -{e.x1},0 0,{e.y0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:30,width:30,heightElements:[5,12.5],widthElements:[5,12.5]},GATEWAY_EVENT_BASED:{d:"m {mx},{my} {e.x0},{e.y0} {e.x0},{e.y1} {e.x1},{e.y2} {e.x2},0 z",height:11,width:11,heightElements:[-6,6,12,-12],widthElements:[9,-3,-12]},GATEWAY_COMPLEX:{d:"m {mx},{my} 0,{e.y0} -{e.x0},-{e.y1} -{e.x1},{e.y2} {e.x0},{e.y1} -{e.x2},0 0,{e.y3} {e.x2},0  -{e.x0},{e.y1} l {e.x1},{e.y2} {e.x0},-{e.y1} 0,{e.y0} {e.x3},0 0,-{e.y0} {e.x0},{e.y1} {e.x1},-{e.y2} -{e.x0},-{e.y1} {e.x2},0 0,-{e.y3} -{e.x2},0 {e.x0},-{e.y1} -{e.x1},-{e.y2} -{e.x0},{e.y1} 0,-{e.y0} -{e.x3},0 z",height:17.125,width:17.125,heightElements:[4.875,3.4375,2.125,3],widthElements:[3.4375,2.125,4.875,3]},DATA_OBJECT_PATH:{d:"m 0,0 {e.x1},0 {e.x0},{e.y0} 0,{e.y1} -{e.x2},0 0,-{e.y2} {e.x1},0 0,{e.y0} {e.x0},0",height:61,width:51,heightElements:[10,50,60],widthElements:[10,40,50,60]},DATA_OBJECT_COLLECTION_PATH:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},DATA_ARROW:{d:"m 5,9 9,0 0,-3 5,5 -5,5 0,-3 -9,0 z",height:61,width:51,heightElements:[],widthElements:[]},DATA_STORE:{d:"m  {mx},{my} l  0,{e.y2} c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 l  0,-{e.y2} c -{e.x0},-{e.y1} -{e.x1},-{e.y1} -{e.x2},0c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1} {e.x2},0m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0",height:61,width:61,heightElements:[7,10,45],widthElements:[2,58,60]},TEXT_ANNOTATION:{d:"m {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0",height:30,width:10,heightElements:[30],widthElements:[10]},MARKER_SUB_PROCESS:{d:"m{mx},{my} m 7,2 l 0,10 m -5,-5 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_PARALLEL:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},MARKER_SEQUENTIAL:{d:"m{mx},{my} m 0,3 l 10,0 m -10,3 l 10,0 m -10,3 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_COMPENSATION:{d:"m {mx},{my} 7,-5 0,10 z m 7.1,-0.3 6.9,-4.7 0,10 -6.9,-4.7 z",height:10,width:21,heightElements:[],widthElements:[]},MARKER_LOOP:{d:"m {mx},{my} c 3.526979,0 6.386161,-2.829858 6.386161,-6.320661 0,-3.490806 -2.859182,-6.320661 -6.386161,-6.320661 -3.526978,0 -6.38616,2.829855 -6.38616,6.320661 0,1.745402 0.714797,3.325567 1.870463,4.469381 0.577834,0.571908 1.265885,1.034728 2.029916,1.35457 l -0.718163,-3.909793 m 0.718163,3.909793 -3.885211,0.802902",height:13.9,width:13.7,heightElements:[],widthElements:[]},MARKER_ADHOC:{d:"m {mx},{my} m 0.84461,2.64411 c 1.05533,-1.23780996 2.64337,-2.07882 4.29653,-1.97997996 2.05163,0.0805 3.85579,1.15803 5.76082,1.79107 1.06385,0.34139996 2.24454,0.1438 3.18759,-0.43767 0.61743,-0.33642 1.2775,-0.64078 1.7542,-1.17511 0,0.56023 0,1.12046 0,1.6807 -0.98706,0.96237996 -2.29792,1.62393996 -3.6918,1.66181996 -1.24459,0.0927 -2.46671,-0.2491 -3.59505,-0.74812 -1.35789,-0.55965 -2.75133,-1.33436996 -4.27027,-1.18121996 -1.37741,0.14601 -2.41842,1.13685996 -3.44288,1.96782996 z",height:4,width:15,heightElements:[],widthElements:[]},TASK_TYPE_SEND:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:14,width:21,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_SCRIPT:{d:"m {mx},{my} c 9.966553,-6.27276 -8.000926,-7.91932 2.968968,-14.938 l -8.802728,0 c -10.969894,7.01868 6.997585,8.66524 -2.968967,14.938 z m -7,-12 l 5,0 m -4.5,3 l 4.5,0 m -3,3 l 5,0m -4,3 l 5,0",height:15,width:12.6,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_USER_1:{d:"m {mx},{my} c 0.909,-0.845 1.594,-2.049 1.594,-3.385 0,-2.554 -1.805,-4.62199999 -4.357,-4.62199999 -2.55199998,0 -4.28799998,2.06799999 -4.28799998,4.62199999 0,1.348 0.974,2.562 1.89599998,3.405 -0.52899998,0.187 -5.669,2.097 -5.794,4.7560005 v 6.718 h 17 v -6.718 c 0,-2.2980005 -5.5279996,-4.5950005 -6.0509996,-4.7760005 zm -8,6 l 0,5.5 m 11,0 l 0,-5"},TASK_TYPE_USER_2:{d:"m {mx},{my} m 2.162,1.009 c 0,2.4470005 -2.158,4.4310005 -4.821,4.4310005 -2.66499998,0 -4.822,-1.981 -4.822,-4.4310005 "},TASK_TYPE_USER_3:{d:"m {mx},{my} m -6.9,-3.80 c 0,0 2.25099998,-2.358 4.27399998,-1.177 2.024,1.181 4.221,1.537 4.124,0.965 -0.098,-0.57 -0.117,-3.79099999 -4.191,-4.13599999 -3.57499998,0.001 -4.20799998,3.36699999 -4.20699998,4.34799999 z"},TASK_TYPE_MANUAL:{d:"m {mx},{my} c 0.234,-0.01 5.604,0.008 8.029,0.004 0.808,0 1.271,-0.172 1.417,-0.752 0.227,-0.898 -0.334,-1.314 -1.338,-1.316 -2.467,-0.01 -7.886,-0.004 -8.108,-0.004 -0.014,-0.079 0.016,-0.533 0,-0.61 0.195,-0.042 8.507,0.006 9.616,0.002 0.877,-0.007 1.35,-0.438 1.353,-1.208 0.003,-0.768 -0.479,-1.09 -1.35,-1.091 -2.968,-0.002 -9.619,-0.013 -9.619,-0.013 v -0.591 c 0,0 5.052,-0.016 7.225,-0.016 0.888,-0.002 1.354,-0.416 1.351,-1.193 -0.006,-0.761 -0.492,-1.196 -1.361,-1.196 -3.473,-0.005 -10.86,-0.003 -11.0829995,-0.003 -0.022,-0.047 -0.045,-0.094 -0.069,-0.139 0.3939995,-0.319 2.0409995,-1.626 2.4149995,-2.017 0.469,-0.4870005 0.519,-1.1650005 0.162,-1.6040005 -0.414,-0.511 -0.973,-0.5 -1.48,-0.236 -1.4609995,0.764 -6.5999995,3.6430005 -7.7329995,4.2710005 -0.9,0.499 -1.516,1.253 -1.882,2.19 -0.37000002,0.95 -0.17,2.01 -0.166,2.979 0.004,0.718 -0.27300002,1.345 -0.055,2.063 0.629,2.087 2.425,3.312 4.859,3.318 4.6179995,0.014 9.2379995,-0.139 13.8569995,-0.158 0.755,-0.004 1.171,-0.301 1.182,-1.033 0.012,-0.754 -0.423,-0.969 -1.183,-0.973 -1.778,-0.01 -5.824,-0.004 -6.04,-0.004 10e-4,-0.084 0.003,-0.586 10e-4,-0.67 z"},TASK_TYPE_INSTANTIATING_SEND:{d:"m {mx},{my} l 0,8.4 l 12.6,0 l 0,-8.4 z l 6.3,3.6 l 6.3,-3.6"},TASK_TYPE_SERVICE:{d:"m {mx},{my} v -1.71335 c 0.352326,-0.0705 0.703932,-0.17838 1.047628,-0.32133 0.344416,-0.14465 0.665822,-0.32133 0.966377,-0.52145 l 1.19431,1.18005 1.567487,-1.57688 -1.195028,-1.18014 c 0.403376,-0.61394 0.683079,-1.29908 0.825447,-2.01824 l 1.622133,-0.01 v -2.2196 l -1.636514,0.01 c -0.07333,-0.35153 -0.178319,-0.70024 -0.323564,-1.04372 -0.145244,-0.34406 -0.321407,-0.6644 -0.522735,-0.96217 l 1.131035,-1.13631 -1.583305,-1.56293 -1.129598,1.13589 c -0.614052,-0.40108 -1.302883,-0.68093 -2.022633,-0.82247 l 0.0093,-1.61852 h -2.241173 l 0.0042,1.63124 c -0.353763,0.0736 -0.705369,0.17977 -1.049785,0.32371 -0.344415,0.14437 -0.665102,0.32092 -0.9635006,0.52046 l -1.1698628,-1.15823 -1.5667691,1.5792 1.1684265,1.15669 c -0.4026573,0.61283 -0.68308,1.29797 -0.8247287,2.01713 l -1.6588041,0.003 v 2.22174 l 1.6724648,-0.006 c 0.073327,0.35077 0.1797598,0.70243 0.3242851,1.04472 0.1452428,0.34448 0.3214064,0.6644 0.5227339,0.96066 l -1.1993431,1.19723 1.5840256,1.56011 1.1964668,-1.19348 c 0.6140517,0.40346 1.3028827,0.68232 2.0233517,0.82331 l 7.19e-4,1.69892 h 2.226848 z m 0.221462,-3.9957 c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_SERVICE_FILL:{d:"m {mx},{my} c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_BUSINESS_RULE_HEADER:{d:"m {mx},{my} 0,4 20,0 0,-4 z"},TASK_TYPE_BUSINESS_RULE_MAIN:{d:"m {mx},{my} 0,12 20,0 0,-12 zm 0,8 l 20,0 m -13,-4 l 0,8"},MESSAGE_FLOW_MARKER:{d:"m {mx},{my} m -10.5 ,-7 l 0,14 l 21,0 l 0,-14 z l 10.5,6 l 10.5,-6"}},this.getRawPath=function(t){return this.pathMap[t].d},this.getScaledPath=function(t,n){var r=this.pathMap[t],i,a;n.abspos?(i=n.abspos.x,a=n.abspos.y):(i=n.containerWidth*n.position.mx,a=n.containerHeight*n.position.my);var o={};if(n.position){for(var l=n.containerHeight/r.height*n.yScaleFactor,c=n.containerWidth/r.width*n.xScaleFactor,p=0;p<r.heightElements.length;p++)o["y"+p]=r.heightElements[p]*l;for(var d=0;d<r.widthElements.length;d++)o["x"+d]=r.widthElements[d]*c}var v=bs(r.d,{mx:i,my:a,e:o});return v}}var Es=/\{([^{}]+)\}/g,ws=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g;function xs(e,t,n){var r=n;return t.replace(ws,function(i,a,o,l,c){a=a||l,r&&(a in r&&(r=r[a]),typeof r=="function"&&c&&(r=r()))}),r=(r==null||r==n?e:r)+"",r}function bs(e,t){return String(e).replace(Es,function(n,r){return xs(n,r,t)})}const _s={__init__:["bpmnRenderer"],bpmnRenderer:["type",Ct],textRenderer:["type",Oi],pathMap:["type",vs]};function Ss(e,t){return t=t||{},e.replace(/{([^}]+)}/g,function(n,r){return t[r]||"{"+r+"}"})}const Ni={translate:["value",Ss]};function vr(e,t){return!e||!t?-1:Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function As(e,t,n,r){if(typeof r>"u"&&(r=5),!e||!t||!n)return!1;var i=(t.x-e.x)*(n.y-e.y)-(t.y-e.y)*(n.x-e.x),a=vr(e,t);return Math.abs(i/a)<=r}var Rs=2;function Mf(e,t){var n=Array.from(arguments).flat();const r={x:"v",y:"h"};for(const[i,a]of Object.entries(r))if(Cs(i,n))return a;return!1}function Cs(e,t){const n=t[0];return lr(t,function(r){return Math.abs(n[e]-r[e])<=Rs})}function Tf(e,t,n){return n=n||0,e.x>t.x-n&&e.y>t.y-n&&e.x<t.x+t.width+n&&e.y<t.y+t.height+n}function Df(e,t){return{x:Math.round(e.x+(t.x-e.x)/2),y:Math.round(e.y+(t.y-e.y)/2)}}var Ps=/,?([a-z]),?/gi,Hr=parseFloat,ce=Math,st=ce.PI,ze=ce.min,He=ce.max,Ur=ce.pow,ft=ce.abs,ks=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?[\s]*,?[\s]*)+)/ig,Ms=/(-?\d*\.?\d*(?:e[-+]?\d+)?)[\s]*,?[\s]*/ig,kn=Array.isArray||function(e){return e instanceof Array};function Er(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Kt(e){if(typeof e=="function"||Object(e)!==e)return e;var t=new e.constructor;for(var n in e)Er(e,n)&&(t[n]=Kt(e[n]));return t}function Ts(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return e.push(e.splice(n,1)[0])}function Ds(e){function t(){var n=Array.prototype.slice.call(arguments,0),r=n.join("␀"),i=t.cache=t.cache||{},a=t.count=t.count||[];return Er(i,r)?(Ts(a,r),i[r]):(a.length>=1e3&&delete i[a.shift()],a.push(r),i[r]=e(...arguments),i[r])}return t}function Os(e){if(!e)return null;var t=Bt(e);if(t.arr)return Kt(t.arr);var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},r=[];return kn(e)&&kn(e[0])&&(r=Kt(e)),r.length||String(e).replace(ks,function(i,a,o){var l=[],c=a.toLowerCase();for(o.replace(Ms,function(p,d){d&&l.push(+d)}),c=="m"&&l.length>2&&(r.push([a,...l.splice(0,2)]),c="l",a=a=="m"?"l":"L");l.length>=n[c]&&(r.push([a,...l.splice(0,n[c])]),!!n[c]););}),r.toString=Bt.toString,t.arr=Kt(r),r}function Bt(e){var t=Bt.ps=Bt.ps||{};return t[e]?t[e].sleep=100:t[e]={sleep:100},setTimeout(function(){for(var n in t)Er(t,n)&&n!=e&&(t[n].sleep--,!t[n].sleep&&delete t[n])}),t[e]}function rr(e,t,n,r){return arguments.length===1&&(t=e.y,n=e.width,r=e.height,e=e.x),{x:e,y:t,width:n,height:r,x2:e+n,y2:t+r}}function Bi(){return this.join(",").replace(Ps,"$1")}function Mn(e){var t=Kt(e);return t.toString=Bi,t}function Yr(e,t,n,r,i,a,o,l,c){var p=1-c,d=Ur(p,3),v=Ur(p,2),b=c*c,g=b*c,E=d*e+v*3*c*n+p*3*c*c*i+g*o,R=d*t+v*3*c*r+p*3*c*c*a+g*l;return{x:Tn(E),y:Tn(R)}}function Kr(e){var t=$s(...e);return rr(t.x0,t.y0,t.x1-t.x0,t.y1-t.y0)}function ut(e,t,n){return t>=e.x&&t<=e.x+e.width&&n>=e.y&&n<=e.y+e.height}function Ns(e,t){return e=rr(e),t=rr(t),ut(t,e.x,e.y)||ut(t,e.x2,e.y)||ut(t,e.x,e.y2)||ut(t,e.x2,e.y2)||ut(e,t.x,t.y)||ut(e,t.x2,t.y)||ut(e,t.x,t.y2)||ut(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)}function qr(e,t,n,r,i){var a=-3*t+9*n-9*r+3*i,o=e*a+6*t-12*n+6*r;return e*o-3*t+3*n}function Gr(e,t,n,r,i,a,o,l,c){c==null&&(c=1),c=c>1?1:c<0?0:c;for(var p=c/2,d=12,v=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],b=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],g=0,E=0;E<d;E++){var R=p*v[E]+p,T=qr(R,e,n,i,o),z=qr(R,t,r,a,l),W=T*T+z*z;g+=b[E]*ce.sqrt(W)}return p*g}function Bs(e,t,n,r,i,a,o,l){if(!(He(e,n)<ze(i,o)||ze(e,n)>He(i,o)||He(t,r)<ze(a,l)||ze(t,r)>He(a,l))){var c=(e*r-t*n)*(i-o)-(e-n)*(i*l-a*o),p=(e*r-t*n)*(a-l)-(t-r)*(i*l-a*o),d=(e-n)*(a-l)-(t-r)*(i-o);if(d){var v=Tn(c/d),b=Tn(p/d),g=+v.toFixed(2),E=+b.toFixed(2);if(!(g<+ze(e,n).toFixed(2)||g>+He(e,n).toFixed(2)||g<+ze(i,o).toFixed(2)||g>+He(i,o).toFixed(2)||E<+ze(t,r).toFixed(2)||E>+He(t,r).toFixed(2)||E<+ze(a,l).toFixed(2)||E>+He(a,l).toFixed(2)))return{x:v,y:b}}}}function Tn(e){return Math.round(e*1e11)/1e11}function Ls(e,t,n){var r=Kr(e),i=Kr(t);if(!Ns(r,i))return n?0:[];for(var a=Gr(...e),o=Gr(...t),l=Xr(e)?1:~~(a/5)||1,c=Xr(t)?1:~~(o/5)||1,p=[],d=[],v={},b=n?0:[],g=0;g<l+1;g++){var E=Yr(...e,g/l);p.push({x:E.x,y:E.y,t:g/l})}for(g=0;g<c+1;g++)E=Yr(...t,g/c),d.push({x:E.x,y:E.y,t:g/c});for(g=0;g<l;g++)for(var R=0;R<c;R++){var T=p[g],z=p[g+1],W=d[R],_=d[R+1],y=ft(z.x-T.x)<.01?"y":"x",x=ft(_.x-W.x)<.01?"y":"x",C=Bs(T.x,T.y,z.x,z.y,W.x,W.y,_.x,_.y),N;if(C){if(N=C.x.toFixed(9)+"#"+C.y.toFixed(9),v[N])continue;v[N]=!0;var w=T.t+ft((C[y]-T[y])/(z[y]-T[y]))*(z.t-T.t),M=W.t+ft((C[x]-W[x])/(_[x]-W[x]))*(_.t-W.t);w>=0&&w<=1&&M>=0&&M<=1&&(n?b++:b.push({x:C.x,y:C.y,t1:w,t2:M}))}}return b}function Is(e,t,n){e=Qr(e),t=Qr(t);for(var r,i,a,o,l,c,p,d,v,b,g=n?0:[],E=0,R=e.length;E<R;E++){var T=e[E];if(T[0]=="M")r=l=T[1],i=c=T[2];else{T[0]=="C"?(v=[r,i,...T.slice(1)],r=v[6],i=v[7]):(v=[r,i,r,i,l,c,l,c],r=l,i=c);for(var z=0,W=t.length;z<W;z++){var _=t[z];if(_[0]=="M")a=p=_[1],o=d=_[2];else{_[0]=="C"?(b=[a,o,..._.slice(1)],a=b[6],o=b[7]):(b=[a,o,a,o,p,d,p,d],a=p,o=d);var y=Ls(v,b,n);if(n)g+=y;else{for(var x=0,C=y.length;x<C;x++)y[x].segment1=E,y[x].segment2=z,y[x].bez1=v,y[x].bez2=b;g=g.concat(y)}}}}}return g}function Fs(e){var t=Bt(e);if(t.abs)return Mn(t.abs);if((!kn(e)||!kn(e&&e[0]))&&(e=Os(e)),!e||!e.length)return[["M",0,0]];var n=[],r=0,i=0,a=0,o=0,l=0,c;e[0][0]=="M"&&(r=+e[0][1],i=+e[0][2],a=r,o=i,l++,n[0]=["M",r,i]);for(var p,d,v=l,b=e.length;v<b;v++){if(n.push(p=[]),d=e[v],c=d[0],c!=c.toUpperCase())switch(p[0]=c.toUpperCase(),p[0]){case"A":p[1]=d[1],p[2]=d[2],p[3]=d[3],p[4]=d[4],p[5]=d[5],p[6]=+d[6]+r,p[7]=+d[7]+i;break;case"V":p[1]=+d[1]+i;break;case"H":p[1]=+d[1]+r;break;case"M":a=+d[1]+r,o=+d[2]+i;default:for(var g=1,E=d.length;g<E;g++)p[g]=+d[g]+(g%2?r:i)}else for(var R=0,T=d.length;R<T;R++)p[R]=d[R];switch(c=c.toUpperCase(),p[0]){case"Z":r=+a,i=+o;break;case"H":r=p[1];break;case"V":i=p[1];break;case"M":a=p[p.length-2],o=p[p.length-1];default:r=p[p.length-2],i=p[p.length-1]}}return n.toString=Bi,t.abs=Mn(n),n}function Xr(e){return e[0]===e[2]&&e[1]===e[3]&&e[4]===e[6]&&e[5]===e[7]}function fn(e,t,n,r){return[e,t,n,r,n,r]}function Zr(e,t,n,r,i,a){var o=.3333333333333333,l=2/3;return[o*e+l*n,o*t+l*r,o*i+l*n,o*a+l*r,i,a]}function Li(e,t,n,r,i,a,o,l,c,p){var d=st*120/180,v=st/180*(+i||0),b=[],g,E=Ds(function(s,u,h){var m=s*ce.cos(h)-u*ce.sin(h),S=s*ce.sin(h)+u*ce.cos(h);return{x:m,y:S}});if(p)N=p[0],w=p[1],x=p[2],C=p[3];else{g=E(e,t,-v),e=g.x,t=g.y,g=E(l,c,-v),l=g.x,c=g.y;var R=(e-l)/2,T=(t-c)/2,z=R*R/(n*n)+T*T/(r*r);z>1&&(z=ce.sqrt(z),n=z*n,r=z*r);var W=n*n,_=r*r,y=(a==o?-1:1)*ce.sqrt(ft((W*_-W*T*T-_*R*R)/(W*T*T+_*R*R))),x=y*n*T/r+(e+l)/2,C=y*-r*R/n+(t+c)/2,N=ce.asin(((t-C)/r).toFixed(9)),w=ce.asin(((c-C)/r).toFixed(9));N=e<x?st-N:N,w=l<x?st-w:w,N<0&&(N=st*2+N),w<0&&(w=st*2+w),o&&N>w&&(N=N-st*2),!o&&w>N&&(w=w-st*2)}var M=w-N;if(ft(M)>d){var k=w,I=l,B=c;w=N+d*(o&&w>N?1:-1),l=x+n*ce.cos(w),c=C+r*ce.sin(w),b=Li(l,c,n,r,i,0,o,I,B,[w,k,x,C])}M=w-N;var V=ce.cos(N),Z=ce.sin(N),Oe=ce.cos(w),ae=ce.sin(w),J=ce.tan(M/4),xe=4/3*n*J,be=4/3*r*J,oe=[e,t],de=[e+xe*Z,t-be*V],A=[l+xe*ae,c-be*Oe],P=[l,c];if(de[0]=2*oe[0]-de[0],de[1]=2*oe[1]-de[1],p)return[de,A,P].concat(b);b=[de,A,P].concat(b).join().split(",");for(var F=[],te=0,f=b.length;te<f;te++)F[te]=te%2?E(b[te-1],b[te],v).y:E(b[te],b[te+1],v).x;return F}function $s(e,t,n,r,i,a,o,l){for(var c=[],p=[[],[]],d,v,b,g,E,R,T,z,W=0;W<2;++W){if(W==0?(v=6*e-12*n+6*i,d=-3*e+9*n-9*i+3*o,b=3*n-3*e):(v=6*t-12*r+6*a,d=-3*t+9*r-9*a+3*l,b=3*r-3*t),ft(d)<1e-12){if(ft(v)<1e-12)continue;g=-b/v,0<g&&g<1&&c.push(g);continue}T=v*v-4*b*d,z=ce.sqrt(T),!(T<0)&&(E=(-v+z)/(2*d),0<E&&E<1&&c.push(E),R=(-v-z)/(2*d),0<R&&R<1&&c.push(R))}for(var _=c.length,y=_,x;_--;)g=c[_],x=1-g,p[0][_]=x*x*x*e+3*x*x*g*n+3*x*g*g*i+g*g*g*o,p[1][_]=x*x*x*t+3*x*x*g*r+3*x*g*g*a+g*g*g*l;return p[0][y]=e,p[1][y]=t,p[0][y+1]=o,p[1][y+1]=l,p[0].length=p[1].length=y+2,{x0:ze(...p[0]),y0:ze(...p[1]),x1:He(...p[0]),y1:He(...p[1])}}function Qr(e){var t=Bt(e);if(t.curve)return Mn(t.curve);for(var n=Fs(e),r={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},i=function(g,E,R){var T,z;if(!g)return["C",E.x,E.y,E.x,E.y,E.x,E.y];switch(!(g[0]in{T:1,Q:1})&&(E.qx=E.qy=null),g[0]){case"M":E.X=g[1],E.Y=g[2];break;case"A":g=["C",...Li(E.x,E.y,...g.slice(1))];break;case"S":R=="C"||R=="S"?(T=E.x*2-E.bx,z=E.y*2-E.by):(T=E.x,z=E.y),g=["C",T,z,...g.slice(1)];break;case"T":R=="Q"||R=="T"?(E.qx=E.x*2-E.qx,E.qy=E.y*2-E.qy):(E.qx=E.x,E.qy=E.y),g=["C",...Zr(E.x,E.y,E.qx,E.qy,g[1],g[2])];break;case"Q":E.qx=g[1],E.qy=g[2],g=["C",...Zr(E.x,E.y,g[1],g[2],g[3],g[4])];break;case"L":g=["C",...fn(E.x,E.y,g[1],g[2])];break;case"H":g=["C",...fn(E.x,E.y,g[1],E.y)];break;case"V":g=["C",...fn(E.x,E.y,E.x,g[1])];break;case"Z":g=["C",...fn(E.x,E.y,E.X,E.Y)];break}return g},a=function(g,E){if(g[E].length>7){g[E].shift();for(var R=g[E];R.length;)o[E]="A",g.splice(E++,0,["C",...R.splice(0,6)]);g.splice(E,1),d=n.length}},o=[],l="",c="",p=0,d=n.length;p<d;p++){n[p]&&(l=n[p][0]),l!="C"&&(o[p]=l,p&&(c=o[p-1])),n[p]=i(n[p],r,c),o[p]!="A"&&l=="C"&&(o[p]="C"),a(n,p);var v=n[p],b=v.length;r.x=v[b-2],r.y=v[b-1],r.bx=Hr(v[b-4])||r.x,r.by=Hr(v[b-3])||r.y}return t.curve=Mn(n),n}function Of(e){return{x:Math.round(e.x),y:Math.round(e.y),width:Math.round(e.width),height:Math.round(e.height)}}function En(e){return{x:Math.round(e.x),y:Math.round(e.y)}}function Qt(e){return{top:e.y,right:e.x+(e.width||0),bottom:e.y+(e.height||0),left:e.x}}function Vs(e){return{x:e.left,y:e.top,width:e.right-e.left,height:e.bottom-e.top}}function js(e){return En({x:e.x+(e.width||0)/2,y:e.y+(e.height||0)/2})}function Ws(e){for(var t=e.waypoints,n=t.reduce(function(p,d,v){var b=t[v-1];if(b){var g=p[p.length-1],E=g&&g.endLength||0,R=Hs(b,d);p.push({start:b,end:d,startLength:E,endLength:E+R,length:R})}return p},[]),r=n.reduce(function(p,d){return p+d.length},0),i=r/2,a=0,o=n[a];o.endLength<i;)o=n[++a];var l=(i-o.startLength)/o.length,c={x:o.start.x+(o.end.x-o.start.x)*l,y:o.start.y+(o.end.y-o.start.y)*l};return c}function ir(e){return no(e)?Ws(e):js(e)}function Nf(e,t,n){n=n||0,Ke(n)||(n={x:n,y:n});var r=Qt(e),i=Qt(t),a=r.bottom+n.y<=i.top,o=r.left-n.x>=i.right,l=r.top-n.y>=i.bottom,c=r.right+n.x<=i.left,p=a?"top":l?"bottom":null,d=c?"left":o?"right":null;return d&&p?p+"-"+d:d||p||"intersect"}function Bf(e,t,n){var r=zs(e,t);return r.length===1||r.length===2&&vr(r[0],r[1])<1?En(r[0]):r.length>1?(r=Ka(r,function(i){var a=Math.floor(i.t2*100)||1;return a=100-a,a=(a<10?"0":"")+a,i.segment2+"#"+a}),En(r[n?0:r.length-1])):null}function zs(e,t){return Is(e,t)}function Lf(e){e=e.slice();for(var t=0,n,r,i;e[t];)n=e[t],r=e[t-1],i=e[t+1],vr(n,i)===0||As(r,i,n)?e.splice(t,1):t++;return e}function Hs(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function ye(e){return e?"<"+e.$type+(e.id?' id="'+e.id:"")+'" />':"<null>"}function wn(e,t,n){return H({id:e.id,type:e.$type,businessObject:e,di:t},n)}function Us(e,t,n){var r=e.waypoint;return!r||r.length<2?[ir(t),ir(n)]:r.map(function(i){return{x:i.x,y:i.y}})}function Ii(e,t,n){return new Error(`element ${ye(t)} referenced by ${ye(e)}#${n} not yet drawn`)}function it(e,t,n,r,i){this._eventBus=e,this._canvas=t,this._elementFactory=n,this._elementRegistry=r,this._textRenderer=i}it.$inject=["eventBus","canvas","elementFactory","elementRegistry","textRenderer"];it.prototype.add=function(e,t,n){var r,i,a;if(D(t,"bpmndi:BPMNPlane")){var o=D(e,"bpmn:SubProcess")?{id:e.id+"_plane"}:{};r=this._elementFactory.createRoot(wn(e,t,o)),this._canvas.addRootElement(r)}else if(D(t,"bpmndi:BPMNShape")){var l=!bt(e,t),c=Ks(e);i=n&&(n.hidden||n.collapsed);var p=t.bounds;r=this._elementFactory.createShape(wn(e,t,{collapsed:l,hidden:i,x:Math.round(p.x),y:Math.round(p.y),width:Math.round(p.width),height:Math.round(p.height),isFrame:c})),D(e,"bpmn:BoundaryEvent")&&this._attachBoundary(e,r),D(e,"bpmn:Lane")&&(a=0),D(e,"bpmn:DataStoreReference")&&(Ys(n,ir(p))||(n=this._canvas.findRoot(n))),this._canvas.addShape(r,n,a)}else if(D(t,"bpmndi:BPMNEdge")){var d=this._getSource(e),v=this._getTarget(e);i=n&&(n.hidden||n.collapsed),r=this._elementFactory.createConnection(wn(e,t,{hidden:i,source:d,target:v,waypoints:Us(t,d,v)})),D(e,"bpmn:DataAssociation")&&(n=this._canvas.findRoot(n)),this._canvas.addConnection(r,n,a)}else throw new Error(`unknown di ${ye(t)} for element ${ye(e)}`);return ro(e)&&An(r)&&this.addLabel(e,t,r),this._eventBus.fire("bpmnElement.added",{element:r}),r};it.prototype._attachBoundary=function(e,t){var n=e.attachedToRef;if(!n)throw new Error(`missing ${ye(e)}#attachedToRef`);var r=this._elementRegistry.get(n.id),i=r&&r.attachers;if(!r)throw Ii(e,n,"attachedToRef");t.host=r,i||(r.attachers=i=[]),i.indexOf(t)===-1&&i.push(t)};it.prototype.addLabel=function(e,t,n){var r,i,a;return r=so(t,n),i=An(n),i&&(r=this._textRenderer.getExternalLabelBounds(r,i)),a=this._elementFactory.createLabel(wn(e,t,{id:e.id+"_label",labelTarget:n,type:"label",hidden:n.hidden||!An(n),x:Math.round(r.x),y:Math.round(r.y),width:Math.round(r.width),height:Math.round(r.height)})),this._canvas.addShape(a,n.parent)};it.prototype._getConnectedElement=function(e,t){var n,r,i=e.$type;if(r=e[t+"Ref"],t==="source"&&i==="bpmn:DataInputAssociation"&&(r=r&&r[0]),(t==="source"&&i==="bpmn:DataOutputAssociation"||t==="target"&&i==="bpmn:DataInputAssociation")&&(r=e.$parent),n=r&&this._getElement(r),n)return n;throw r?Ii(e,r,t+"Ref"):new Error(`${ye(e)}#${t} Ref not specified`)};it.prototype._getSource=function(e){return this._getConnectedElement(e,"source")};it.prototype._getTarget=function(e){return this._getConnectedElement(e,"target")};it.prototype._getElement=function(e){return this._elementRegistry.get(e.id)};function Ys(e,t){var n=t.x,r=t.y;return n>=e.x&&n<=e.x+e.width&&r>=e.y&&r<=e.y+e.height}function Ks(e){return D(e,"bpmn:Group")}const qs={__depends__:[Ni],bpmnImporter:["type",it]},Gs={__depends__:[_s,qs]};function If(e){return _t(e,function(t){return!Fe(e,function(n){return n!==t&&Fi(t,n)})})}function Fi(e,t){if(t){if(e===t)return t;if(e.parent)return Fi(e.parent,t)}}function Jr(e,t,n){var r=!n||e.indexOf(t)===-1;return r&&e.push(t),r}function wr(e,t,n){n=n||0,Ce(e)||(e=[e]),L(e,function(r,i){var a=t(r,i,n);Ce(a)&&a.length&&wr(a,t,n+1)})}function Xs(e,t,n){var r=[],i=[];return wr(e,function(a,o,l){Jr(r,a,t);var c=a.children;if((n===-1||l<n)&&c&&Jr(i,c,t))return c}),r}function Ff(e,t){return Xs(e,!t,-1)}function $f(e,t,n){Gt(t)&&(t=!0),Ke(t)&&(n=t,t=!0),n=n||{};var r=Ht(n.allShapes),i=Ht(n.allConnections),a=Ht(n.enclosedElements),o=Ht(n.enclosedConnections),l=Ht(n.topLevel,t&&vi(e,function(d){return d.id}));function c(d){l[d.source.id]&&l[d.target.id]&&(l[d.id]=[d]),r[d.source.id]&&r[d.target.id]&&(o[d.id]=a[d.id]=d),i[d.id]=d}function p(d){if(a[d.id]=d,d.waypoints)o[d.id]=i[d.id]=d;else return r[d.id]=d,L(d.incoming,c),L(d.outgoing,c),d.children}return wr(e,p),{allShapes:r,allConnections:i,topLevel:l,enclosedConnections:o,enclosedElements:a}}function mt(e,t){t=!!t,Ce(e)||(e=[e]);var n,r,i,a;return L(e,function(o){var l=o;o.waypoints&&!t&&(l=mt(o.waypoints,!0));var c=l.x,p=l.y,d=l.height||0,v=l.width||0;(c<n||n===void 0)&&(n=c),(p<r||r===void 0)&&(r=p),(c+v>i||i===void 0)&&(i=c+v),(p+d>a||a===void 0)&&(a=p+d)}),{x:n,y:r,height:a-r,width:i-n}}function Vf(e,t){var n={};return L(e,function(r){var i=r;i.waypoints&&(i=mt(i)),!Ae(t.y)&&i.x>t.x&&(n[r.id]=r),!Ae(t.x)&&i.y>t.y&&(n[r.id]=r),i.x>t.x&&i.y>t.y&&(Ae(t.width)&&Ae(t.height)&&i.width+i.x<t.width+t.x&&i.height+i.y<t.height+t.y||!Ae(t.width)||!Ae(t.height))&&(n[r.id]=r)}),n}function $i(e){return"waypoints"in e?"connection":"x"in e?"shape":"root"}function Vi(e){return!!(e&&e.isFrame)}function Ht(e,t){return H({},e||{},t||{})}function ji(e){this._counter=0,this._prefix=(e?e+"-":"")+Math.floor(Math.random()*1e9)+"-"}ji.prototype.next=function(){return this._prefix+ ++this._counter};var Zs=new ji("ov"),Qs=500;function me(e,t,n,r){this._eventBus=t,this._canvas=n,this._elementRegistry=r,this._ids=Zs,this._overlayDefaults=H({show:null,scale:!0},e&&e.defaults),this._overlays={},this._overlayContainers=[],this._overlayRoot=Js(n.getContainer()),this._init()}me.$inject=["config.overlays","eventBus","canvas","elementRegistry"];me.prototype.get=function(e){if(qe(e)&&(e={id:e}),qe(e.element)&&(e.element=this._elementRegistry.get(e.element)),e.element){var t=this._getOverlayContainer(e.element,!0);return t?e.type?_t(t.overlays,Br({type:e.type})):t.overlays.slice():[]}else return e.type?_t(this._overlays,Br({type:e.type})):e.id?this._overlays[e.id]:null};me.prototype.add=function(e,t,n){if(Ke(t)&&(n=t,t=null),e.id||(e=this._elementRegistry.get(e)),!n.position)throw new Error("must specifiy overlay position");if(!n.html)throw new Error("must specifiy overlay html");if(!e)throw new Error("invalid element specified");var r=this._ids.next();return n=H({},this._overlayDefaults,n,{id:r,type:t,element:e,html:n.html}),this._addOverlay(n),r};me.prototype.remove=function(e){var t=this.get(e)||[];Ce(t)||(t=[t]);var n=this;L(t,function(r){var i=n._getOverlayContainer(r.element,!0);if(r&&(Pn(r.html),Pn(r.htmlContainer),delete r.htmlContainer,delete r.element,delete n._overlays[r.id]),i){var a=i.overlays.indexOf(r);a!==-1&&i.overlays.splice(a,1)}})};me.prototype.isShown=function(){return this._overlayRoot.style.display!=="none"};me.prototype.show=function(){Ln(this._overlayRoot)};me.prototype.hide=function(){Ln(this._overlayRoot,!1)};me.prototype.clear=function(){this._overlays={},this._overlayContainers=[],Pi(this._overlayRoot)};me.prototype._updateOverlayContainer=function(e){var t=e.element,n=e.html,r=t.x,i=t.y;if(t.waypoints){var a=mt(t);r=a.x,i=a.y}Wi(n,r,i),jo(e.html,"data-container-id",t.id)};me.prototype._updateOverlay=function(e){var t=e.position,n=e.htmlContainer,r=e.element,i=t.left,a=t.top;if(t.right!==void 0){var o;r.waypoints?o=mt(r).width:o=r.width,i=t.right*-1+o}if(t.bottom!==void 0){var l;r.waypoints?l=mt(r).height:l=r.height,a=t.bottom*-1+l}Wi(n,i||0,a||0),this._updateOverlayVisibilty(e,this._canvas.viewbox())};me.prototype._createOverlayContainer=function(e){var t=Ge('<div class="djs-overlays" />');Re(t,{position:"absolute"}),this._overlayRoot.appendChild(t);var n={html:t,element:e,overlays:[]};return this._updateOverlayContainer(n),this._overlayContainers.push(n),n};me.prototype._updateRoot=function(e){var t=e.scale||1,n="matrix("+[t,0,0,t,-1*e.x*t,-1*e.y*t].join(",")+")";zi(this._overlayRoot,n)};me.prototype._getOverlayContainer=function(e,t){var n=Fe(this._overlayContainers,function(r){return r.element===e});return!n&&!t?this._createOverlayContainer(e):n};me.prototype._addOverlay=function(e){var t=e.id,n=e.element,r=e.html,i,a;r.get&&r.constructor.prototype.jquery&&(r=r.get(0)),qe(r)&&(r=Ge(r)),a=this._getOverlayContainer(n),i=Ge('<div class="djs-overlay" data-overlay-id="'+t+'">'),Re(i,{position:"absolute"}),i.appendChild(r),e.type&&en(i).add("djs-overlay-"+e.type);var o=this._canvas.findRoot(n),l=this._canvas.getRootElement();Ln(i,o===l),e.htmlContainer=i,a.overlays.push(e),a.html.appendChild(i),this._overlays[t]=e,this._updateOverlay(e),this._updateOverlayVisibilty(e,this._canvas.viewbox())};me.prototype._updateOverlayVisibilty=function(e,t){var n=e.show,r=this._canvas.findRoot(e.element),i=n&&n.minZoom,a=n&&n.maxZoom,o=e.htmlContainer,l=this._canvas.getRootElement(),c=!0;(r!==l||n&&(Ot(i)&&i>t.scale||Ot(a)&&a<t.scale))&&(c=!1),Ln(o,c),this._updateOverlayScale(e,t)};me.prototype._updateOverlayScale=function(e,t){var n=e.scale,r,i,a=e.htmlContainer,o,l="";n!==!0&&(n===!1?(r=1,i=1):(r=n.min,i=n.max),Ot(r)&&t.scale<r&&(o=(1/t.scale||1)*r),Ot(i)&&t.scale>i&&(o=(1/t.scale||1)*i)),Ot(o)&&(l="scale("+o+","+o+")"),zi(a,l)};me.prototype._updateOverlaysVisibilty=function(e){var t=this;L(this._overlays,function(n){t._updateOverlayVisibilty(n,e)})};me.prototype._init=function(){var e=this._eventBus,t=this;function n(r){t._updateRoot(r),t._updateOverlaysVisibilty(r),t.show()}e.on("canvas.viewbox.changing",function(r){t.hide()}),e.on("canvas.viewbox.changed",function(r){n(r.viewbox)}),e.on(["shape.remove","connection.remove"],function(r){var i=r.element,a=t.get({element:i});L(a,function(c){t.remove(c.id)});var o=t._getOverlayContainer(i);if(o){Pn(o.html);var l=t._overlayContainers.indexOf(o);l!==-1&&t._overlayContainers.splice(l,1)}}),e.on("element.changed",Qs,function(r){var i=r.element,a=t._getOverlayContainer(i,!0);a&&(L(a.overlays,function(o){t._updateOverlay(o)}),t._updateOverlayContainer(a))}),e.on("element.marker.update",function(r){var i=t._getOverlayContainer(r.element,!0);i&&en(i.html)[r.add?"add":"remove"](r.marker)}),e.on("root.set",function(){t._updateOverlaysVisibilty(t._canvas.viewbox())}),e.on("diagram.clear",this.clear,this)};function Js(e){var t=Ge('<div class="djs-overlay-container" />');return Re(t,{position:"absolute",width:0,height:0}),e.insertBefore(t,e.firstChild),t}function Wi(e,t,n){Re(e,{left:t+"px",top:n+"px"})}function Ln(e,t){e.style.display=t===!1?"none":""}function zi(e,t){e.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach(function(n){e.style[n+"transform"]=t})}const Hi={__init__:["overlays"],overlays:["type",me]};function Ui(e,t,n,r){e.on("element.changed",function(i){var a=i.element;(a.parent||a===t.getRootElement())&&(i.gfx=n.getGraphics(a)),i.gfx&&e.fire($i(a)+".changed",i)}),e.on("elements.changed",function(i){var a=i.elements;a.forEach(function(o){e.fire("element.changed",{element:o})}),r.updateContainments(a)}),e.on("shape.changed",function(i){r.update("shape",i.element,i.gfx)}),e.on("connection.changed",function(i){r.update("connection",i.element,i.gfx)})}Ui.$inject=["eventBus","canvas","elementRegistry","graphicsFactory"];const eu={__init__:["changeSupport"],changeSupport:["type",Ui]};var tu=1e3;function we(e){this._eventBus=e}we.$inject=["eventBus"];function nu(e,t){return function(n){return e.call(t||null,n.context,n.command,n)}}we.prototype.on=function(e,t,n,r,i,a){if((et(t)||Ae(t))&&(a=i,i=r,r=n,n=t,t=null),et(n)&&(a=i,i=r,r=n,n=tu),Ke(i)&&(a=i,i=!1),!et(r))throw new Error("handlerFn must be a function");Ce(e)||(e=[e]);var o=this._eventBus;L(e,function(l){var c=["commandStack",l,t].filter(function(p){return p}).join(".");o.on(c,n,i?nu(r,a):r,a)})};we.prototype.canExecute=at("canExecute");we.prototype.preExecute=at("preExecute");we.prototype.preExecuted=at("preExecuted");we.prototype.execute=at("execute");we.prototype.executed=at("executed");we.prototype.postExecute=at("postExecute");we.prototype.postExecuted=at("postExecuted");we.prototype.revert=at("revert");we.prototype.reverted=at("reverted");function at(e){return function(n,r,i,a,o){(et(n)||Ae(n))&&(o=a,a=i,i=r,r=n,n=null),this.on(n,e,r,i,a,o)}}function xr(e,t){t.invoke(we,this),this.executed(function(n){var r=n.context;r.rootElement?e.setRootElement(r.rootElement):r.rootElement=e.getRootElement()}),this.revert(function(n){var r=n.context;r.rootElement&&e.setRootElement(r.rootElement)})}Xe(xr,we);xr.$inject=["canvas","injector"];const ru={__init__:["rootElementsBehavior"],rootElementsBehavior:["type",xr]};function jf(e){return CSS.escape(e)}var iu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function au(e){return e=""+e,e&&e.replace(/[&<>"']/g,function(t){return iu[t]})}var Yi="_plane";function Wf(e){var t=e.id;return ou(t)}function br(e){var t=e.id;return D(e,"bpmn:SubProcess")?Ki(t):t}function zf(e){return Ki(e)}function Hf(e){var t=pt(e);return D(t,"bpmndi:BPMNPlane")}function Ki(e){return e+Yi}function ou(e){return e.replace(new RegExp(Yi+"$"),"")}var su="bjs-breadcrumbs-shown";function qi(e,t,n){var r=Ge('<ul class="bjs-breadcrumbs"></ul>'),i=n.getContainer(),a=en(i);i.appendChild(r);var o=[];e.on("element.changed",function(c){var p=c.element,d=se(p),v=Fe(o,function(b){return b===d});v&&l()});function l(c){c&&(o=uu(c));var p=o.flatMap(function(v){var b=n.findRoot(br(v))||n.findRoot(v.id);if(!b&&D(v,"bpmn:Process")){var g=t.find(function(T){var z=se(T);return z&&z.get("processRef")===v});b=g&&n.findRoot(g.id)}if(!b)return[];var E=au(v.name||v.id),R=Ge('<li><span class="bjs-crumb"><a title="'+E+'">'+E+"</a></span></li>");return R.addEventListener("click",function(){n.setRootElement(b)}),R});r.innerHTML="";var d=p.length>1;a.toggle(su,d),p.forEach(function(v){r.appendChild(v)})}e.on("root.set",function(c){l(c.element)})}qi.$inject=["eventBus","elementRegistry","canvas"];function uu(e){for(var t=se(e),n=[],r=t;r;r=r.$parent)(D(r,"bpmn:SubProcess")||D(r,"bpmn:Process"))&&n.push(r);return n.reverse()}function Gi(e,t){var n=null,r=new lu;e.on("root.set",function(i){var a=i.element,o=t.viewbox(),l=r.get(a);if(r.set(n,{x:o.x,y:o.y,zoom:o.scale}),n=a,!(!D(a,"bpmn:SubProcess")&&!l)){l=l||{x:0,y:0,zoom:1};var c=(o.x-l.x)*o.scale,p=(o.y-l.y)*o.scale;(c!==0||p!==0)&&t.scroll({dx:c,dy:p}),l.zoom!==o.scale&&t.zoom(l.zoom,{x:0,y:0})}}),e.on("diagram.clear",function(){r.clear(),n=null})}Gi.$inject=["eventBus","canvas"];function lu(){this._entries=[],this.set=function(e,t){var n=!1;for(var r in this._entries)if(this._entries[r][0]===e){this._entries[r][1]=t,n=!0;break}n||this._entries.push([e,t])},this.get=function(e){for(var t in this._entries)if(this._entries[t][0]===e)return this._entries[t][1];return null},this.clear=function(){this._entries.length=0},this.remove=function(e){var t=-1;for(var n in this._entries)if(this._entries[n][0]===e){t=n;break}t!==-1&&this._entries.splice(t,1)}}var ei={x:180,y:160};function Pt(e,t){this._eventBus=e,this._moddle=t;var n=this;e.on("import.render.start",1500,function(r,i){n._handleImport(i.definitions)})}Pt.prototype._handleImport=function(e){if(e.diagrams){var t=this;this._definitions=e,this._processToDiagramMap={},e.diagrams.forEach(function(r){!r.plane||!r.plane.bpmnElement||(t._processToDiagramMap[r.plane.bpmnElement.id]=r)});var n=e.diagrams.filter(r=>r.plane).flatMap(r=>t._createNewDiagrams(r.plane));n.forEach(function(r){t._movePlaneElementsToOrigin(r.plane)})}};Pt.prototype._createNewDiagrams=function(e){var t=this,n=[],r=[];e.get("planeElement").forEach(function(a){var o=a.bpmnElement;if(o){var l=o.$parent;D(o,"bpmn:SubProcess")&&!a.isExpanded&&n.push(o),fu(o,e)&&r.push({diElement:a,parent:l})}});var i=[];return n.forEach(function(a){if(!t._processToDiagramMap[a.id]){var o=t._createDiagram(a);t._processToDiagramMap[a.id]=o,i.push(o)}}),r.forEach(function(a){for(var o=a.diElement,l=a.parent;l&&n.indexOf(l)===-1;)l=l.$parent;if(l){var c=t._processToDiagramMap[l.id];t._moveToDiPlane(o,c.plane)}}),i};Pt.prototype._movePlaneElementsToOrigin=function(e){var t=e.get("planeElement"),n=cu(e),r={x:n.x-ei.x,y:n.y-ei.y};t.forEach(function(i){i.waypoint?i.waypoint.forEach(function(a){a.x=a.x-r.x,a.y=a.y-r.y}):i.bounds&&(i.bounds.x=i.bounds.x-r.x,i.bounds.y=i.bounds.y-r.y)})};Pt.prototype._moveToDiPlane=function(e,t){var n=Xi(e),r=n.plane.get("planeElement");r.splice(r.indexOf(e),1),t.get("planeElement").push(e)};Pt.prototype._createDiagram=function(e){var t=this._moddle.create("bpmndi:BPMNPlane",{bpmnElement:e}),n=this._moddle.create("bpmndi:BPMNDiagram",{plane:t});return t.$parent=n,t.bpmnElement=e,n.$parent=this._definitions,this._definitions.diagrams.push(n),n};Pt.$inject=["eventBus","moddle"];function Xi(e){return D(e,"bpmndi:BPMNDiagram")?e:Xi(e.$parent)}function cu(e){var t={top:1/0,right:-1/0,bottom:-1/0,left:1/0};return e.planeElement.forEach(function(n){if(n.bounds){var r=Qt(n.bounds);t.top=Math.min(r.top,t.top),t.left=Math.min(r.left,t.left)}}),Vs(t)}function fu(e,t){var n=e.$parent;return!(!D(n,"bpmn:SubProcess")||n===t.bpmnElement||Xt(e,["bpmn:DataInputAssociation","bpmn:DataOutputAssociation"]))}var pn=250,pu='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4.81801948,3.50735931 L10.4996894,9.1896894 L10.5,4 L12,4 L12,12 L4,12 L4,10.5 L9.6896894,10.4996894 L3.75735931,4.56801948 C3.46446609,4.27512627 3.46446609,3.80025253 3.75735931,3.50735931 C4.05025253,3.21446609 4.52512627,3.21446609 4.81801948,3.50735931 Z"/></svg>',hu="bjs-drilldown-empty";function gt(e,t,n,r,i){we.call(this,t),this._canvas=e,this._eventBus=t,this._elementRegistry=n,this._overlays=r,this._translate=i;var a=this;this.executed("shape.toggleCollapse",pn,function(o){var l=o.shape;a._canDrillDown(l)?a._addOverlay(l):a._removeOverlay(l)},!0),this.reverted("shape.toggleCollapse",pn,function(o){var l=o.shape;a._canDrillDown(l)?a._addOverlay(l):a._removeOverlay(l)},!0),this.executed(["shape.create","shape.move","shape.delete"],pn,function(o){var l=o.oldParent,c=o.newParent||o.parent,p=o.shape;a._canDrillDown(p)&&a._addOverlay(p),a._updateDrilldownOverlay(l),a._updateDrilldownOverlay(c),a._updateDrilldownOverlay(p)},!0),this.reverted(["shape.create","shape.move","shape.delete"],pn,function(o){var l=o.oldParent,c=o.newParent||o.parent,p=o.shape;a._canDrillDown(p)&&a._addOverlay(p),a._updateDrilldownOverlay(l),a._updateDrilldownOverlay(c),a._updateDrilldownOverlay(p)},!0),t.on("import.render.complete",function(){n.filter(function(o){return a._canDrillDown(o)}).map(function(o){a._addOverlay(o)})})}Xe(gt,we);gt.prototype._updateDrilldownOverlay=function(e){var t=this._canvas;if(e){var n=t.findRoot(e);n&&this._updateOverlayVisibility(n)}};gt.prototype._canDrillDown=function(e){var t=this._canvas;return D(e,"bpmn:SubProcess")&&t.findRoot(br(e))};gt.prototype._updateOverlayVisibility=function(e){var t=this._overlays,n=se(e),r=t.get({element:n.id,type:"drilldown"})[0];if(r){var i=n&&n.get("flowElements")&&n.get("flowElements").length;en(r.html).toggle(hu,!i)}};gt.prototype._addOverlay=function(e){var t=this._canvas,n=this._overlays,r=se(e),i=n.get({element:e,type:"drilldown"});i.length&&this._removeOverlay(e);var a=Ge('<button type="button" class="bjs-drilldown">'+pu+"</button>"),o=r.get("name")||r.get("id"),l=this._translate("Open {element}",{element:o});a.setAttribute("title",l),a.addEventListener("click",function(){t.setRootElement(t.findRoot(br(e)))}),n.add(e,"drilldown",{position:{bottom:-7,right:-8},html:a}),this._updateOverlayVisibility(e)};gt.prototype._removeOverlay=function(e){var t=this._overlays;t.remove({element:e,type:"drilldown"})};gt.$inject=["canvas","eventBus","elementRegistry","overlays","translate"];const du={__depends__:[Hi,eu,ru],__init__:["drilldownBreadcrumbs","drilldownOverlayBehavior","drilldownCentering","subprocessCompatibility"],drilldownBreadcrumbs:["type",qi],drilldownCentering:["type",Gi],drilldownOverlayBehavior:["type",gt],subprocessCompatibility:["type",Pt]};var mu=500,yu=1e3;function kt(e,t){this._eventBus=e,this.offset=5;var n=t.cls("djs-outline",["no-fill"]),r=this;function i(a){var o=Q("rect");return q(o,H({x:0,y:0,rx:4,width:100,height:100},n)),o}e.on(["shape.added","shape.changed"],mu,function(a){var o=a.element,l=a.gfx,c=je(".djs-outline",l);c||(c=r.getOutline(o)||i(),ie(l,c)),r.updateShapeOutline(c,o)}),e.on(["connection.added","connection.changed"],function(a){var o=a.element,l=a.gfx,c=je(".djs-outline",l);c||(c=i(),ie(l,c)),r.updateConnectionOutline(c,o)})}kt.prototype.updateShapeOutline=function(e,t){var n=!1,r=this._getProviders();r.length&&L(r,function(i){n=n||i.updateOutline(t,e)}),n||q(e,{x:-this.offset,y:-this.offset,width:t.width+this.offset*2,height:t.height+this.offset*2})};kt.prototype.updateConnectionOutline=function(e,t){var n=mt(t);q(e,{x:n.x-this.offset,y:n.y-this.offset,width:n.width+this.offset*2,height:n.height+this.offset*2})};kt.prototype.registerProvider=function(e,t){t||(t=e,e=yu),this._eventBus.on("outline.getProviders",e,function(n){n.providers.push(t)})};kt.prototype._getProviders=function(){var e=this._eventBus.createEvent({type:"outline.getProviders",providers:[]});return this._eventBus.fire(e),e.providers};kt.prototype.getOutline=function(e){var t,n=this._getProviders();return L(n,function(r){et(r.getOutline)&&(t=t||r.getOutline(e))}),t};kt.$inject=["eventBus","styles","elementRegistry"];const Zi={__init__:["outline"],outline:["type",kt]},gu="M44.7648 11.3263L36.9892 2.64074C36.0451 1.58628 34.5651 0.988708 33.1904 0.988708H5.98667C3.22688 0.988708 0.989624 3.34892 0.989624 6.26039V55.0235C0.989624 57.9349 3.22688 60.2952 5.98667 60.2952H40.966C43.7257 60.2952 45.963 57.9349 45.963 55.0235V14.9459C45.963 13.5998 45.6407 12.3048 44.7648 11.3263Z",vu="M1.03845 48.1347C1.03845 49.3511 1.07295 50.758 1.38342 52.064C1.69949 53.3938 2.32428 54.7154 3.56383 55.6428C6.02533 57.4841 10.1161 58.7685 14.8212 59.6067C19.5772 60.4538 25.1388 60.8738 30.6831 60.8738C36.2276 60.8738 41.7891 60.4538 46.545 59.6067C51.2504 58.7687 55.3412 57.4842 57.8028 55.6429C59.0424 54.7156 59.6673 53.3938 59.9834 52.064C60.2938 50.7579 60.3285 49.351 60.3285 48.1344V13.8415C60.3285 12.6249 60.2938 11.218 59.9834 9.91171C59.6673 8.58194 59.0423 7.2602 57.8027 6.33294C55.341 4.49168 51.2503 3.20723 46.545 2.36914C41.7891 1.522 36.2276 1.10204 30.6831 1.10205C25.1388 1.10206 19.5772 1.52206 14.8213 2.36923C10.1162 3.20734 6.02543 4.49183 3.5639 6.33314C2.32433 7.26038 1.69951 8.58206 1.38343 9.91181C1.07295 11.2179 1.03845 12.6247 1.03845 13.8411V48.1347Z",Eu={width:36,height:50},wu={width:50,height:50};function ti(e,t,n){return Q("path",{d:e,strokeWidth:2,transform:`translate(${t.x}, ${t.y})`,...n})}const lt=5;function In(e,t){this._styles=t,e.registerProvider(this)}In.$inject=["outline","styles"];In.prototype.getOutline=function(e){const t=this._styles.cls("djs-outline",["no-fill"]);var n;if(!hr(e))return D(e,"bpmn:Gateway")?(n=Q("rect"),H(n.style,{"transform-box":"fill-box",transform:"rotate(45deg)","transform-origin":"center"}),q(n,H({x:2,y:2,rx:4,width:e.width-4,height:e.height-4},t))):Xt(e,["bpmn:Task","bpmn:SubProcess","bpmn:Group","bpmn:CallActivity"])?(n=Q("rect"),q(n,H({x:-lt,y:-lt,rx:14,width:e.width+lt*2,height:e.height+lt*2},t))):D(e,"bpmn:EndEvent")?(n=Q("circle"),q(n,H({cx:e.width/2,cy:e.height/2,r:e.width/2+lt+1},t))):D(e,"bpmn:Event")?(n=Q("circle"),q(n,H({cx:e.width/2,cy:e.height/2,r:e.width/2+lt},t))):D(e,"bpmn:DataObjectReference")&&ni(e,"bpmn:DataObjectReference")?n=ti(gu,{x:-6,y:-6},t):D(e,"bpmn:DataStoreReference")&&ni(e,"bpmn:DataStoreReference")&&(n=ti(vu,{x:-6,y:-6},t)),n};In.prototype.updateOutline=function(e,t){if(!hr(e))return Xt(e,["bpmn:SubProcess","bpmn:Group"])?(q(t,{width:e.width+lt*2,height:e.height+lt*2}),!0):!!Xt(e,["bpmn:Event","bpmn:Gateway","bpmn:DataStoreReference","bpmn:DataObjectReference"])};function ni(e,t){var n;return t==="bpmn:DataObjectReference"?n=Eu:t==="bpmn:DataStoreReference"&&(n=wu),e.width===n.width&&e.height===n.height}const xu={__depends__:[Zi],__init__:["outlineProvider"],outlineProvider:["type",In]};function ri(e){!e||typeof e.stopPropagation!="function"||e.stopPropagation()}function Fn(e){return e.originalEvent||e.srcEvent}function Uf(e){ri(e),ri(Fn(e))}function ii(e){return e.pointers&&e.pointers.length&&(e=e.pointers[0]),e.touches&&e.touches.length&&(e=e.touches[0]),e?{x:e.clientX,y:e.clientY}:null}function Qi(){return/mac/i.test(navigator.platform)}function Ji(e,t){return(Fn(e)||e).button===t}function tn(e){return Ji(e,0)}function bu(e){return Ji(e,1)}function Yf(e){var t=Fn(e)||e;return tn(e)?Qi()?t.metaKey:t.ctrlKey:!1}function _u(e){var t=Fn(e)||e;return tn(e)&&t.shiftKey}function Su(e){return!0}function hn(e){return tn(e)||bu(e)}var ai=500;function ea(e,t,n){var r=this;function i(w,M,k){if(!l(w,M)){var I,B,V;k?B=t.getGraphics(k):(I=M.delegateTarget||M.target,I&&(B=I,k=t.get(B))),!(!B||!k)&&(V=e.fire(w,{element:k,gfx:B,originalEvent:M}),V===!1&&(M.stopPropagation(),M.preventDefault()))}}var a={};function o(w){return a[w]}function l(w,M){var k=p[w]||tn;return!k(M)}var c={click:"element.click",contextmenu:"element.contextmenu",dblclick:"element.dblclick",mousedown:"element.mousedown",mousemove:"element.mousemove",mouseover:"element.hover",mouseout:"element.out",mouseup:"element.mouseup"},p={"element.contextmenu":Su,"element.mousedown":hn,"element.mouseup":hn,"element.click":hn,"element.dblclick":hn};function d(w,M,k){var I=c[w];if(!I)throw new Error("unmapped DOM event name <"+w+">");return i(I,M,k)}var v="svg, .djs-element";function b(w,M,k,I){var B=a[k]=function(V){i(k,V)};I&&(p[k]=I),B.$delegate=nr.bind(w,v,M,B)}function g(w,M,k){var I=o(k);I&&nr.unbind(w,M,I.$delegate)}function E(w){L(c,function(M,k){b(w,k,M)})}function R(w){L(c,function(M,k){g(w,k,M)})}e.on("canvas.destroy",function(w){R(w.svg)}),e.on("canvas.init",function(w){E(w.svg)}),e.on(["shape.added","connection.added"],function(w){var M=w.element,k=w.gfx;e.fire("interactionEvents.createHit",{element:M,gfx:k})}),e.on(["shape.changed","connection.changed"],ai,function(w){var M=w.element,k=w.gfx;e.fire("interactionEvents.updateHit",{element:M,gfx:k})}),e.on("interactionEvents.createHit",ai,function(w){var M=w.element,k=w.gfx;r.createDefaultHit(M,k)}),e.on("interactionEvents.updateHit",function(w){var M=w.element,k=w.gfx;r.updateDefaultHit(M,k)});var T=x("djs-hit djs-hit-stroke"),z=x("djs-hit djs-hit-click-stroke"),W=x("djs-hit djs-hit-all"),_=x("djs-hit djs-hit-no-move"),y={all:W,"click-stroke":z,stroke:T,"no-move":_};function x(w,M){return M=H({stroke:"white",strokeWidth:15},M||{}),n.cls(w,["no-fill","no-border"],M)}function C(w,M){var k=y[M];if(!k)throw new Error("invalid hit type <"+M+">");return q(w,k),w}function N(w,M){ie(w,M)}this.removeHits=function(w){var M=Go(".djs-hit",w);L(M,Ye)},this.createDefaultHit=function(w,M){var k=w.waypoints,I=w.isFrame,B;return k?this.createWaypointsHit(M,k):(B=I?"stroke":"all",this.createBoxHit(M,B,{width:w.width,height:w.height}))},this.createWaypointsHit=function(w,M){var k=mr(M);return C(k,"stroke"),N(w,k),k},this.createBoxHit=function(w,M,k){k=H({x:0,y:0},k);var I=Q("rect");return C(I,M),q(I,k),N(w,I),I},this.updateDefaultHit=function(w,M){var k=je(".djs-hit",M);if(k)return w.waypoints?Ri(k,w.waypoints):q(k,{width:w.width,height:w.height}),k},this.fire=i,this.triggerMouseEvent=d,this.mouseHandler=o,this.registerEvent=b,this.unregisterEvent=g}ea.$inject=["eventBus","elementRegistry","styles"];const Au={__init__:["interactionEvents"],interactionEvents:["type",ea]};function Ft(e,t){this._eventBus=e,this._canvas=t,this._selectedElements=[];var n=this;e.on(["shape.remove","connection.remove"],function(r){var i=r.element;n.deselect(i)}),e.on(["diagram.clear","root.set"],function(r){n.select(null)})}Ft.$inject=["eventBus","canvas"];Ft.prototype.deselect=function(e){var t=this._selectedElements,n=t.indexOf(e);if(n!==-1){var r=t.slice();t.splice(n,1),this._eventBus.fire("selection.changed",{oldSelection:r,newSelection:t})}};Ft.prototype.get=function(){return this._selectedElements};Ft.prototype.isSelected=function(e){return this._selectedElements.indexOf(e)!==-1};Ft.prototype.select=function(e,t){var n=this._selectedElements,r=n.slice();Ce(e)||(e=e?[e]:[]);var i=this._canvas,a=i.getRootElement();e=e.filter(function(o){var l=i.findRoot(o);return a===l}),t?L(e,function(o){n.indexOf(o)===-1&&n.push(o)}):this._selectedElements=n=e.slice(),this._eventBus.fire("selection.changed",{oldSelection:r,newSelection:n})};var oi="hover",si="selected",dn=6;function _r(e,t,n){this._canvas=e;var r=this;this._multiSelectionBox=null;function i(o,l){e.addMarker(o,l)}function a(o,l){e.removeMarker(o,l)}t.on("element.hover",function(o){i(o.element,oi)}),t.on("element.out",function(o){a(o.element,oi)}),t.on("selection.changed",function(o){function l(v){a(v,si)}function c(v){i(v,si)}var p=o.oldSelection,d=o.newSelection;L(p,function(v){d.indexOf(v)===-1&&l(v)}),L(d,function(v){p.indexOf(v)===-1&&c(v)}),r._updateSelectionOutline(d)}),t.on("element.changed",function(o){n.isSelected(o.element)&&r._updateSelectionOutline(n.get())})}_r.$inject=["canvas","eventBus","selection"];_r.prototype._updateSelectionOutline=function(e){var t=this._canvas.getLayer("selectionOutline");_i(t);var n=e.length>1,r=this._canvas.getContainer();if(Ie(r)[n?"add":"remove"]("djs-multi-select"),!!n){var i=Ru(mt(e)),a=Q("rect");q(a,H({rx:3},i)),Ie(a).add("djs-selection-outline"),ie(t,a)}};function Ru(e){return{x:e.x-dn,y:e.y-dn,width:e.width+dn*2,height:e.height+dn*2}}function ta(e,t,n,r){e.on("create.end",500,function(i){var a=i.context,o=a.canExecute,l=a.elements,c=a.hints||{},p=c.autoSelect;if(o){if(p===!1)return;Ce(p)?t.select(p):t.select(l.filter(Cu))}}),e.on("connect.end",500,function(i){var a=i.context,o=a.connection;o&&t.select(o)}),e.on("shape.move.end",500,function(i){var a=i.previousSelection||[],o=r.get(i.context.shape.id),l=Fe(a,function(c){return o.id===c.id});l||t.select(o)}),e.on("element.click",function(i){if(tn(i)){var a=i.element;a===n.getRootElement()&&(a=null);var o=t.isSelected(a),l=t.get().length>1,c=_u(i);if(o&&l)return c?t.deselect(a):t.select(a);o?t.deselect(a):t.select(a,c)}})}ta.$inject=["eventBus","selection","canvas","elementRegistry"];function Cu(e){return!e.hidden}const Pu={__init__:["selectionVisuals","selectionBehavior"],__depends__:[Au,Zi],selection:["type",Ft],selectionVisuals:["type",_r],selectionBehavior:["type",ta]},ku=/^class[ {]/;function Mu(e){return ku.test(e.toString())}function Sr(e){return Array.isArray(e)}function qn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function xn(...e){e.length===1&&Sr(e[0])&&(e=e[0]),e=[...e];const t=e.pop();return t.$inject=e,t}const Tu=/constructor\s*[^(]*\(\s*([^)]*)\)/m,Du=/^(?:async\s+)?(?:function\s*[^(]*)?(?:\(\s*([^)]*)\)|(\w+))/m,Ou=/\/\*([^*]*)\*\//m;function Nu(e){if(typeof e!="function")throw new Error(`Cannot annotate "${e}". Expected a function!`);const t=e.toString().match(Mu(e)?Tu:Du);if(!t)return[];const n=t[1]||t[2];return n&&n.split(",").map(r=>{const i=r.match(Ou);return(i&&i[1]||r).trim()})||[]}function na(e,t){const n=t||{get:function(_,y){if(r.push(_),y===!1)return null;throw l(`No provider for "${_}"!`)}},r=[],i=this._providers=Object.create(n._providers||null),a=this._instances=Object.create(null),o=a.injector=this,l=function(_){const y=r.join(" -> ");return r.length=0,new Error(y?`${_} (Resolving: ${y})`:_)};function c(_,y){if(!i[_]&&_.includes(".")){const x=_.split(".");let C=c(x.shift());for(;x.length;)C=C[x.shift()];return C}if(qn(a,_))return a[_];if(qn(i,_)){if(r.indexOf(_)!==-1)throw r.push(_),l("Cannot resolve circular dependency!");return r.push(_),a[_]=i[_][0](i[_][1]),r.pop(),a[_]}return n.get(_,y)}function p(_,y){if(typeof y>"u"&&(y={}),typeof _!="function")if(Sr(_))_=xn(_.slice());else throw l(`Cannot invoke "${_}". Expected a function!`);const C=(_.$inject||Nu(_)).map(N=>qn(y,N)?y[N]:c(N));return{fn:_,dependencies:C}}function d(_){const{fn:y,dependencies:x}=p(_),C=Function.prototype.bind.call(y,null,...x);return new C}function v(_,y,x){const{fn:C,dependencies:N}=p(_,x);return C.apply(y,N)}function b(_){return xn(y=>_.get(y))}function g(_,y){if(y&&y.length){const x=Object.create(null),C=Object.create(null),N=[],w=[],M=[];let k,I,B,V;for(let Z in i)k=i[Z],y.indexOf(Z)!==-1&&(k[2]==="private"?(I=N.indexOf(k[3]),I===-1?(B=k[3].createChild([],y),V=b(B),N.push(k[3]),w.push(B),M.push(V),x[Z]=[V,Z,"private",B]):x[Z]=[M[I],Z,"private",w[I]]):x[Z]=[k[2],k[1]],C[Z]=!0),(k[2]==="factory"||k[2]==="type")&&k[1].$scope&&y.forEach(Oe=>{k[1].$scope.indexOf(Oe)!==-1&&(x[Z]=[k[2],k[1]],C[Oe]=!0)});y.forEach(Z=>{if(!C[Z])throw new Error('No provider for "'+Z+'". Cannot use provider from the parent!')}),_.unshift(x)}return new na(_,o)}const E={factory:v,type:d,value:function(_){return _}};function R(_,y){const x=_.__init__||[];return function(){x.forEach(C=>{typeof C=="string"?y.get(C):y.invoke(C)})}}function T(_){const y=_.__exports__;if(y){const x=_.__modules__,C=Object.keys(_).reduce((I,B)=>(B!=="__exports__"&&B!=="__modules__"&&B!=="__init__"&&B!=="__depends__"&&(I[B]=_[B]),I),Object.create(null)),N=(x||[]).concat(C),w=g(N),M=xn(function(I){return w.get(I)});y.forEach(function(I){i[I]=[M,I,"private",w]});const k=(_.__init__||[]).slice();return k.unshift(function(){w.init()}),_=Object.assign({},_,{__init__:k}),R(_,w)}return Object.keys(_).forEach(function(x){if(x==="__init__"||x==="__depends__")return;const C=_[x];if(C[2]==="private"){i[x]=C;return}const N=C[0],w=C[1];i[x]=[E[N],Bu(N,w),N]}),R(_,o)}function z(_,y){return _.indexOf(y)!==-1||(_=(y.__depends__||[]).reduce(z,_),_.indexOf(y)!==-1)?_:_.concat(y)}function W(_){const y=_.reduce(z,[]).map(T);let x=!1;return function(){x||(x=!0,y.forEach(C=>C()))}}this.get=c,this.invoke=v,this.instantiate=d,this.createChild=g,this.init=W(e)}function Bu(e,t){return e!=="value"&&Sr(t)&&(t=xn(t.slice())),t}var Lu=1;function vt(e,t){Ze.call(this,e,Lu),this.CONNECTION_STYLE=t.style(["no-fill"],{strokeWidth:5,stroke:"fuchsia"}),this.SHAPE_STYLE=t.style({fill:"white",stroke:"fuchsia",strokeWidth:2}),this.FRAME_STYLE=t.style(["no-fill"],{stroke:"fuchsia",strokeDasharray:4,strokeWidth:2})}Xe(vt,Ze);vt.prototype.canRender=function(){return!0};vt.prototype.drawShape=function(t,n,r){var i=Q("rect");return q(i,{x:0,y:0,width:n.width||0,height:n.height||0}),Vi(n)?q(i,H({},this.FRAME_STYLE,r||{})):q(i,H({},this.SHAPE_STYLE,r||{})),ie(t,i),i};vt.prototype.drawConnection=function(t,n,r){var i=mr(n.waypoints,H({},this.CONNECTION_STYLE,r||{}));return ie(t,i),i};vt.prototype.getShapePath=function(t){var n=t.x,r=t.y,i=t.width,a=t.height,o=[["M",n,r],["l",i,0],["l",0,a],["l",-i,0],["z"]];return Rt(o)};vt.prototype.getConnectionPath=function(t){var n=t.waypoints,r,i,a=[];for(r=0;i=n[r];r++)i=i.original||i,a.push([r===0?"M":"L",i.x,i.y]);return Rt(a)};vt.$inject=["eventBus","styles"];function Iu(){var e={"no-fill":{fill:"none"},"no-border":{strokeOpacity:0},"no-events":{pointerEvents:"none"}},t=this;this.cls=function(n,r,i){var a=this.style(r,i);return H(a,{class:n})},this.style=function(n,r){!Ce(n)&&!r&&(r=n,n=[]);var i=Nt(n,function(a,o){return H(a,e[o]||{})},{});return r?H(i,r):i},this.computeStyle=function(n,r,i){return Ce(r)||(i=r,r=[]),t.style(r||[],H({},i,n||{}))}}const Fu={__init__:["defaultRenderer"],defaultRenderer:["type",vt],styles:["type",Iu]};function $u(e,t){if(!e||!t)return-1;var n=e.indexOf(t);return n!==-1&&e.splice(n,1),n}function Vu(e,t,n){if(!(!e||!t)){typeof n!="number"&&(n=-1);var r=e.indexOf(t);if(r!==-1){if(r===n)return;if(n!==-1)e.splice(r,1);else return}n!==-1?e.splice(n,0,t):e.push(t)}}function Kf(e,t){return!e||!t?-1:e.indexOf(t)}function bn(e,t){return Math.round(e*t)/t}function ui(e){return Ae(e)?e+"px":e}function ju(e){for(;e.parent;)e=e.parent;return e}function Wu(e){e=H({},{width:"100%",height:"100%"},e);const t=e.container||document.body,n=document.createElement("div");return n.setAttribute("class","djs-container djs-parent"),Re(n,{position:"relative",overflow:"hidden",width:ui(e.width),height:ui(e.height)}),t.appendChild(n),n}function ra(e,t,n){const r=Q("g");Ie(r).add(t);const i=n!==void 0?n:e.childNodes.length-1;return e.insertBefore(r,e.childNodes[i]||null),r}const zu="base",ia=0,Hu=1,Uu={shape:["x","y","width","height"],connection:["waypoints"]};function K(e,t,n,r){this._eventBus=t,this._elementRegistry=r,this._graphicsFactory=n,this._rootsIdx=0,this._layers={},this._planes=[],this._rootElement=null,this._init(e||{})}K.$inject=["config.canvas","eventBus","graphicsFactory","elementRegistry"];K.prototype._init=function(e){const t=this._eventBus,n=this._container=Wu(e),r=this._svg=Q("svg");q(r,{width:"100%",height:"100%"}),ie(n,r);const i=this._viewport=ra(r,"viewport");e.deferUpdate&&(this._viewboxChanged=Xa(nt(this._viewboxChanged,this),300)),t.on("diagram.init",()=>{t.fire("canvas.init",{svg:r,viewport:i})}),t.on(["shape.added","connection.added","shape.removed","connection.removed","elements.changed","root.set"],()=>{delete this._cachedViewbox}),t.on("diagram.destroy",500,this._destroy,this),t.on("diagram.clear",500,this._clear,this)};K.prototype._destroy=function(){this._eventBus.fire("canvas.destroy",{svg:this._svg,viewport:this._viewport});const e=this._container.parentNode;e&&e.removeChild(this._container),delete this._svg,delete this._container,delete this._layers,delete this._planes,delete this._rootElement,delete this._viewport};K.prototype._clear=function(){this._elementRegistry.getAll().forEach(t=>{const n=$i(t);n==="root"?this.removeRootElement(t):this._removeElement(t,n)}),this._planes=[],this._rootElement=null,delete this._cachedViewbox};K.prototype.getDefaultLayer=function(){return this.getLayer(zu,ia)};K.prototype.getLayer=function(e,t){if(!e)throw new Error("must specify a name");let n=this._layers[e];if(n||(n=this._layers[e]=this._createLayer(e,t)),typeof t<"u"&&n.index!==t)throw new Error("layer <"+e+"> already created at index <"+t+">");return n.group};K.prototype._getChildIndex=function(e){return Nt(this._layers,function(t,n){return n.visible&&e>=n.index&&t++,t},0)};K.prototype._createLayer=function(e,t){typeof t>"u"&&(t=Hu);const n=this._getChildIndex(t);return{group:ra(this._viewport,"layer-"+e,n),index:t,visible:!0}};K.prototype.showLayer=function(e){if(!e)throw new Error("must specify a name");const t=this._layers[e];if(!t)throw new Error("layer <"+e+"> does not exist");const n=this._viewport,r=t.group,i=t.index;if(t.visible)return r;const a=this._getChildIndex(i);return n.insertBefore(r,n.childNodes[a]||null),t.visible=!0,r};K.prototype.hideLayer=function(e){if(!e)throw new Error("must specify a name");const t=this._layers[e];if(!t)throw new Error("layer <"+e+"> does not exist");const n=t.group;return t.visible&&(Ye(n),t.visible=!1),n};K.prototype._removeLayer=function(e){const t=this._layers[e];t&&(delete this._layers[e],Ye(t.group))};K.prototype.getActiveLayer=function(){const e=this._findPlaneForRoot(this.getRootElement());return e?e.layer:null};K.prototype.findRoot=function(e){return typeof e=="string"&&(e=this._elementRegistry.get(e)),e?(this._findPlaneForRoot(ju(e))||{}).rootElement:void 0};K.prototype.getRootElements=function(){return this._planes.map(function(e){return e.rootElement})};K.prototype._findPlaneForRoot=function(e){return Fe(this._planes,function(t){return t.rootElement===e})};K.prototype.getContainer=function(){return this._container};K.prototype._updateMarker=function(e,t,n){let r;e.id||(e=this._elementRegistry.get(e)),e.markers=e.markers||new Set,r=this._elementRegistry._elements[e.id],r&&(L([r.gfx,r.secondaryGfx],function(i){i&&(n?(e.markers.add(t),Ie(i).add(t)):(e.markers.delete(t),Ie(i).remove(t)))}),this._eventBus.fire("element.marker.update",{element:e,gfx:r.gfx,marker:t,add:!!n}))};K.prototype.addMarker=function(e,t){this._updateMarker(e,t,!0)};K.prototype.removeMarker=function(e,t){this._updateMarker(e,t,!1)};K.prototype.hasMarker=function(e,t){return e.id||(e=this._elementRegistry.get(e)),e.markers?e.markers.has(t):!1};K.prototype.toggleMarker=function(e,t){this.hasMarker(e,t)?this.removeMarker(e,t):this.addMarker(e,t)};K.prototype.getRootElement=function(){const e=this._rootElement;return e||this._planes.length?e:this.setRootElement(this.addRootElement(null))};K.prototype.addRootElement=function(e){const t=this._rootsIdx++;e||(e={id:"__implicitroot_"+t,children:[],isImplicit:!0});const n=e.layer="root-"+t;this._ensureValid("root",e);const r=this.getLayer(n,ia);return this.hideLayer(n),this._addRoot(e,r),this._planes.push({rootElement:e,layer:r}),e};K.prototype.removeRootElement=function(e){if(typeof e=="string"&&(e=this._elementRegistry.get(e)),!!this._findPlaneForRoot(e))return this._removeRoot(e),this._removeLayer(e.layer),this._planes=this._planes.filter(function(n){return n.rootElement!==e}),this._rootElement===e&&(this._rootElement=null),e};K.prototype.setRootElement=function(e){if(e===this._rootElement)return e;let t;if(!e)throw new Error("rootElement required");return t=this._findPlaneForRoot(e),t||(e=this.addRootElement(e)),this._setRoot(e),e};K.prototype._removeRoot=function(e){const t=this._elementRegistry,n=this._eventBus;n.fire("root.remove",{element:e}),n.fire("root.removed",{element:e}),t.remove(e)};K.prototype._addRoot=function(e,t){const n=this._elementRegistry,r=this._eventBus;r.fire("root.add",{element:e}),n.add(e,t),r.fire("root.added",{element:e,gfx:t})};K.prototype._setRoot=function(e,t){const n=this._rootElement;n&&(this._elementRegistry.updateGraphics(n,null,!0),this.hideLayer(n.layer)),e&&(t||(t=this._findPlaneForRoot(e).layer),this._elementRegistry.updateGraphics(e,this._svg,!0),this.showLayer(e.layer)),this._rootElement=e,this._eventBus.fire("root.set",{element:e})};K.prototype._ensureValid=function(e,t){if(!t.id)throw new Error("element must have an id");if(this._elementRegistry.get(t.id))throw new Error("element <"+t.id+"> already exists");const n=Uu[e];if(!lr(n,function(i){return typeof t[i]<"u"}))throw new Error("must supply { "+n.join(", ")+" } with "+e)};K.prototype._setParent=function(e,t,n){Vu(t.children,e,n),e.parent=t};K.prototype._addElement=function(e,t,n,r){n=n||this.getRootElement();const i=this._eventBus,a=this._graphicsFactory;this._ensureValid(e,t),i.fire(e+".add",{element:t,parent:n}),this._setParent(t,n,r);const o=a.create(e,t,r);return this._elementRegistry.add(t,o),a.update(e,t,o),i.fire(e+".added",{element:t,gfx:o}),t};K.prototype.addShape=function(e,t,n){return this._addElement("shape",e,t,n)};K.prototype.addConnection=function(e,t,n){return this._addElement("connection",e,t,n)};K.prototype._removeElement=function(e,t){const n=this._elementRegistry,r=this._graphicsFactory,i=this._eventBus;if(e=n.get(e.id||e),!!e)return i.fire(t+".remove",{element:e}),r.remove(e),$u(e.parent&&e.parent.children,e),e.parent=null,i.fire(t+".removed",{element:e}),n.remove(e),e};K.prototype.removeShape=function(e){return this._removeElement(e,"shape")};K.prototype.removeConnection=function(e){return this._removeElement(e,"connection")};K.prototype.getGraphics=function(e,t){return this._elementRegistry.getGraphics(e,t)};K.prototype._changeViewbox=function(e){this._eventBus.fire("canvas.viewbox.changing"),e.apply(this),this._cachedViewbox=null,this._viewboxChanged()};K.prototype._viewboxChanged=function(){this._eventBus.fire("canvas.viewbox.changed",{viewbox:this.viewbox()})};K.prototype.viewbox=function(e){if(e===void 0&&this._cachedViewbox)return this._cachedViewbox;const t=this._viewport,n=this.getSize();let r,i,a,o,l,c,p;if(e)this._changeViewbox(function(){l=Math.min(n.width/e.width,n.height/e.height);const d=this._svg.createSVGMatrix().scale(l).translate(-e.x,-e.y);Zt(t,d)});else return a=this._rootElement?this.getActiveLayer():null,r=a&&a.getBBox()||{},o=Zt(t),i=o?o.matrix:mo(),l=bn(i.a,1e3),c=bn(-i.e||0,1e3),p=bn(-i.f||0,1e3),e=this._cachedViewbox={x:c?c/l:0,y:p?p/l:0,width:n.width/l,height:n.height/l,scale:l,inner:{width:r.width||0,height:r.height||0,x:r.x||0,y:r.y||0},outer:n},e;return e};K.prototype.scroll=function(e){const t=this._viewport;let n=t.getCTM();return e&&this._changeViewbox(function(){e=H({dx:0,dy:0},e||{}),n=this._svg.createSVGMatrix().translate(e.dx,e.dy).multiply(n),aa(t,n)}),{x:n.e,y:n.f}};K.prototype.scrollToElement=function(e,t){let n=100;typeof e=="string"&&(e=this._elementRegistry.get(e));const r=this.findRoot(e);if(r!==this.getRootElement()&&this.setRootElement(r),r===e)return;t||(t={}),typeof t=="number"&&(n=t),t={top:t.top||n,right:t.right||n,bottom:t.bottom||n,left:t.left||n};const i=mt(e),a=Qt(i),o=this.viewbox(),l=this.zoom();let c,p;o.y+=t.top/l,o.x+=t.left/l,o.width-=(t.right+t.left)/l,o.height-=(t.bottom+t.top)/l;const d=Qt(o);if(!(i.width<o.width&&i.height<o.height))c=i.x-o.x,p=i.y-o.y;else{const b=Math.max(0,a.right-d.right),g=Math.min(0,a.left-d.left),E=Math.max(0,a.bottom-d.bottom),R=Math.min(0,a.top-d.top);c=b||g,p=E||R}this.scroll({dx:-c*l,dy:-p*l})};K.prototype.zoom=function(e,t){if(!e)return this.viewbox(e).scale;if(e==="fit-viewport")return this._fitViewport(t);let n,r;return this._changeViewbox(function(){typeof t!="object"&&(n=this.viewbox().outer,t={x:n.width/2,y:n.height/2}),r=this._setZoom(e,t)}),bn(r.a,1e3)};function aa(e,t){const n="matrix("+t.a+","+t.b+","+t.c+","+t.d+","+t.e+","+t.f+")";e.setAttribute("transform",n)}K.prototype._fitViewport=function(e){const t=this.viewbox(),n=t.outer,r=t.inner;let i,a;return r.x>=0&&r.y>=0&&r.x+r.width<=n.width&&r.y+r.height<=n.height&&!e?a={x:0,y:0,width:Math.max(r.width+r.x,n.width),height:Math.max(r.height+r.y,n.height)}:(i=Math.min(1,n.width/r.width,n.height/r.height),a={x:r.x+(e?r.width/2-n.width/i/2:0),y:r.y+(e?r.height/2-n.height/i/2:0),width:n.width/i,height:n.height/i}),this.viewbox(a),this.viewbox(!1).scale};K.prototype._setZoom=function(e,t){const n=this._svg,r=this._viewport,i=n.createSVGMatrix(),a=n.createSVGPoint();let o,l,c,p,d;c=r.getCTM();const v=c.a;return t?(o=H(a,t),l=o.matrixTransform(c.inverse()),p=i.translate(l.x,l.y).scale(1/v*e).translate(-l.x,-l.y),d=c.multiply(p)):d=i.scale(e),aa(this._viewport,d),d};K.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}};K.prototype.getAbsoluteBBox=function(e){const t=this.viewbox();let n;e.waypoints?n=this.getGraphics(e).getBBox():n=e;const r=n.x*t.scale-t.x*t.scale,i=n.y*t.scale-t.y*t.scale,a=n.width*t.scale,o=n.height*t.scale;return{x:r,y:i,width:a,height:o}};K.prototype.resized=function(){delete this._cachedViewbox,this._eventBus.fire("canvas.resized")};var Lt="data-element-id";function Me(e){this._elements={},this._eventBus=e}Me.$inject=["eventBus"];Me.prototype.add=function(e,t,n){var r=e.id;this._validateId(r),q(t,Lt,r),n&&q(n,Lt,r),this._elements[r]={element:e,gfx:t,secondaryGfx:n}};Me.prototype.remove=function(e){var t=this._elements,n=e.id||e,r=n&&t[n];r&&(q(r.gfx,Lt,""),r.secondaryGfx&&q(r.secondaryGfx,Lt,""),delete t[n])};Me.prototype.updateId=function(e,t){this._validateId(t),typeof e=="string"&&(e=this.get(e)),this._eventBus.fire("element.updateId",{element:e,newId:t});var n=this.getGraphics(e),r=this.getGraphics(e,!0);this.remove(e),e.id=t,this.add(e,n,r)};Me.prototype.updateGraphics=function(e,t,n){var r=e.id||e,i=this._elements[r];return n?i.secondaryGfx=t:i.gfx=t,t&&q(t,Lt,r),t};Me.prototype.get=function(e){var t;typeof e=="string"?t=e:t=e&&q(e,Lt);var n=this._elements[t];return n&&n.element};Me.prototype.filter=function(e){var t=[];return this.forEach(function(n,r){e(n,r)&&t.push(n)}),t};Me.prototype.find=function(e){for(var t=this._elements,n=Object.keys(t),r=0;r<n.length;r++){var i=n[r],a=t[i],o=a.element,l=a.gfx;if(e(o,l))return o}};Me.prototype.getAll=function(){return this.filter(function(e){return e})};Me.prototype.forEach=function(e){var t=this._elements;Object.keys(t).forEach(function(n){var r=t[n],i=r.element,a=r.gfx;return e(i,a)})};Me.prototype.getGraphics=function(e,t){var n=e.id||e,r=this._elements[n];return r&&(t?r.secondaryGfx:r.gfx)};Me.prototype._validateId=function(e){if(!e)throw new Error("element must have an id");if(this._elements[e])throw new Error("element with id "+e+" already added")};function Yu(e,t,n,r){var i=n.inverse;return Object.defineProperty(e,"remove",{value:function(a){var o=this.indexOf(a);return o!==-1&&(this.splice(o,1),t.unset(a,i,r)),a}}),Object.defineProperty(e,"contains",{value:function(a){return this.indexOf(a)!==-1}}),Object.defineProperty(e,"add",{value:function(a,o){var l=this.indexOf(a);if(typeof o>"u"){if(l!==-1)return;o=this.length}l!==-1&&this.splice(l,1),this.splice(o,0,a),l===-1&&t.set(a,i,r)}}),Object.defineProperty(e,"__refs_collection",{value:!0}),e}function Ku(e){return e.__refs_collection===!0}function qu(e,t){return Object.prototype.hasOwnProperty.call(e,t.name||t)}function oa(e,t,n){var r=Yu(n[t.name]||[],e,t,n);Object.defineProperty(n,t.name,{enumerable:t.enumerable,value:r}),r.length&&r.forEach(function(i){e.set(i,t.inverse,n)})}function Gu(e,t,n){var r=t.inverse,i=n[t.name];Object.defineProperty(n,t.name,{configurable:t.configurable,enumerable:t.enumerable,get:function(){return i},set:function(a){if(a!==i){var o=i;i=null,o&&e.unset(o,r,n),i=a,e.set(i,r,n)}}})}function $e(e,t){if(!(this instanceof $e))return new $e(e,t);e.inverse=t,t.inverse=e,this.props={},this.props[e.name]=e,this.props[t.name]=t}$e.prototype.bind=function(e,t){if(typeof t=="string"){if(!this.props[t])throw new Error("no property <"+t+"> in ref");t=this.props[t]}t.collection?oa(this,t,e):Gu(this,t,e)};$e.prototype.ensureRefsCollection=function(e,t){var n=e[t.name];return Ku(n)||oa(this,t,e),n};$e.prototype.ensureBound=function(e,t){qu(e,t)||this.bind(e,t)};$e.prototype.unset=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).remove(n):e[t.name]=void 0)};$e.prototype.set=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).add(n):e[t.name]=n)};var Ar=new $e({name:"children",enumerable:!0,collection:!0},{name:"parent"}),sa=new $e({name:"labels",enumerable:!0,collection:!0},{name:"labelTarget"}),li=new $e({name:"attachers",collection:!0},{name:"host"}),ua=new $e({name:"outgoing",collection:!0},{name:"source"}),la=new $e({name:"incoming",collection:!0},{name:"target"});function $t(){Object.defineProperty(this,"businessObject",{writable:!0}),Object.defineProperty(this,"label",{get:function(){return this.labels[0]},set:function(e){var t=this.label,n=this.labels;!e&&t?n.remove(t):n.add(e,0)}}),Ar.bind(this,"parent"),sa.bind(this,"labels"),ua.bind(this,"outgoing"),la.bind(this,"incoming")}function nn(){$t.call(this),Ar.bind(this,"children"),li.bind(this,"host"),li.bind(this,"attachers")}Xe(nn,$t);function ca(){$t.call(this),Ar.bind(this,"children")}Xe(ca,nn);function fa(){nn.call(this),sa.bind(this,"labelTarget")}Xe(fa,nn);function pa(){$t.call(this),ua.bind(this,"source"),la.bind(this,"target")}Xe(pa,$t);var Xu={connection:pa,shape:nn,label:fa,root:ca};function Zu(e,t){var n=Xu[e];if(!n)throw new Error("unknown type: <"+e+">");return H(new n,t)}function qf(e){return e instanceof $t}function Vt(){this._uid=12}Vt.prototype.createRoot=function(e){return this.create("root",e)};Vt.prototype.createLabel=function(e){return this.create("label",e)};Vt.prototype.createShape=function(e){return this.create("shape",e)};Vt.prototype.createConnection=function(e){return this.create("connection",e)};Vt.prototype.create=function(e,t){return t=H({},t||{}),t.id||(t.id=e+"_"+this._uid++),Zu(e,t)};var Dn="__fn",ha=1e3,Qu=Array.prototype.slice;function Pe(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}Pe.prototype.on=function(e,t,n,r){if(e=Ce(e)?e:[e],et(t)&&(r=n,n=t,t=ha),!Ae(t))throw new Error("priority must be a number");var i=n;r&&(i=nt(n,r),i[Dn]=n[Dn]||n);var a=this;e.forEach(function(o){a._addListener(o,{priority:t,callback:i,next:null})})};Pe.prototype.once=function(e,t,n,r){var i=this;if(et(t)&&(r=n,n=t,t=ha),!Ae(t))throw new Error("priority must be a number");function a(){a.__isTomb=!0;var o=n.apply(r,arguments);return i.off(e,a),o}a[Dn]=n,this.on(e,t,a)};Pe.prototype.off=function(e,t){e=Ce(e)?e:[e];var n=this;e.forEach(function(r){n._removeListener(r,t)})};Pe.prototype.createEvent=function(e){var t=new rn;return t.init(e),t};Pe.prototype.fire=function(e,t){var n,r,i,a;if(a=Qu.call(arguments),typeof e=="object"&&(t=e,e=t.type),!e)throw new Error("no event type specified");if(r=this._listeners[e],!!r){t instanceof rn?n=t:n=this.createEvent(t),a[0]=n;var o=n.type;e!==o&&(n.type=e);try{i=this._invokeListeners(n,a,r)}finally{e!==o&&(n.type=o)}return i===void 0&&n.defaultPrevented&&(i=!1),i}};Pe.prototype.handleError=function(e){return this.fire("error",{error:e})===!1};Pe.prototype._destroy=function(){this._listeners={}};Pe.prototype._invokeListeners=function(e,t,n){for(var r;n&&!e.cancelBubble;)r=this._invokeListener(e,t,n),n=n.next;return r};Pe.prototype._invokeListener=function(e,t,n){var r;if(n.callback.__isTomb)return r;try{r=Ju(n.callback,t),r!==void 0&&(e.returnValue=r,e.stopPropagation()),r===!1&&e.preventDefault()}catch(i){if(!this.handleError(i))throw console.error("unhandled error in event listener",i),i}return r};Pe.prototype._addListener=function(e,t){var n=this._getListeners(e),r;if(!n){this._setListeners(e,t);return}for(;n;){if(n.priority<t.priority){t.next=n,r?r.next=t:this._setListeners(e,t);return}r=n,n=n.next}r.next=t};Pe.prototype._getListeners=function(e){return this._listeners[e]};Pe.prototype._setListeners=function(e,t){this._listeners[e]=t};Pe.prototype._removeListener=function(e,t){var n=this._getListeners(e),r,i,a;if(!t){this._setListeners(e,null);return}for(;n;)r=n.next,a=n.callback,(a===t||a[Dn]===t)&&(i?i.next=r:this._setListeners(e,r)),i=n,n=r};function rn(){}rn.prototype.stopPropagation=function(){this.cancelBubble=!0};rn.prototype.preventDefault=function(){this.defaultPrevented=!0};rn.prototype.init=function(e){H(this,e||{})};function Ju(e,t){return e.apply(null,t)}function el(e){return e.childNodes[0]}function tl(e){return e.parentNode.childNodes[1]}function Te(e,t){this._eventBus=e,this._elementRegistry=t}Te.$inject=["eventBus","elementRegistry"];Te.prototype._getChildrenContainer=function(e){var t=this._elementRegistry.getGraphics(e),n;return e.parent?(n=tl(t),n||(n=Q("g"),Ie(n).add("djs-children"),ie(t.parentNode,n))):n=t,n};Te.prototype._clear=function(e){var t=el(e);return Pi(t),t};Te.prototype._createContainer=function(e,t,n,r){var i=Q("g");Ie(i).add("djs-group"),typeof n<"u"?da(i,t,t.childNodes[n]):ie(t,i);var a=Q("g");Ie(a).add("djs-element"),Ie(a).add("djs-"+e),r&&Ie(a).add("djs-frame"),ie(i,a);var o=Q("g");return Ie(o).add("djs-visual"),ie(a,o),a};Te.prototype.create=function(e,t,n){var r=this._getChildrenContainer(t.parent);return this._createContainer(e,r,n,Vi(t))};Te.prototype.updateContainments=function(e){var t=this,n=this._elementRegistry,r;r=Nt(e,function(i,a){return a.parent&&(i[a.parent.id]=a.parent),i},{}),L(r,function(i){var a=i.children;if(a){var o=t._getChildrenContainer(i);L(a.slice().reverse(),function(l){var c=n.getGraphics(l);da(c.parentNode,o)})}})};Te.prototype.drawShape=function(e,t,n={}){var r=this._eventBus;return r.fire("render.shape",{gfx:e,element:t,attrs:n})};Te.prototype.getShapePath=function(e){var t=this._eventBus;return t.fire("render.getShapePath",e)};Te.prototype.drawConnection=function(e,t,n={}){var r=this._eventBus;return r.fire("render.connection",{gfx:e,element:t,attrs:n})};Te.prototype.getConnectionPath=function(e){var t=this._eventBus;return t.fire("render.getConnectionPath",e)};Te.prototype.update=function(e,t,n){if(t.parent){var r=this._clear(n);if(e==="shape")this.drawShape(r,t),Di(n,t.x,t.y);else if(e==="connection")this.drawConnection(r,t);else throw new Error("unknown type: "+e);t.hidden?q(n,"display","none"):q(n,"display","block")}};Te.prototype.remove=function(e){var t=this._elementRegistry.getGraphics(e);Ye(t.parentNode)};function da(e,t,n){var r=n||t.firstChild;e!==r&&t.insertBefore(e,r)}const nl={__depends__:[Fu],__init__:["canvas"],canvas:["type",K],elementRegistry:["type",Me],elementFactory:["type",Vt],eventBus:["type",Pe],graphicsFactory:["type",Te]};function rl(e){var t=new na(e);return t.init(),t}function il(e){e=e||{};var t={config:["value",e]},n=[t,nl].concat(e.modules||[]);return rl(n)}function Et(e,t){this._injector=t||il(e),this.get("eventBus").fire("diagram.init")}Et.prototype.get=function(e,t){return this._injector.get(e,t)};Et.prototype.invoke=function(e,t,n){return this._injector.invoke(e,t,n)};Et.prototype.destroy=function(){this.get("eventBus").fire("diagram.destroy")};Et.prototype.clear=function(){this.get("eventBus").fire("diagram.clear")};function Rr(){}Rr.prototype.get=function(e){return this.$model.properties.get(this,e)};Rr.prototype.set=function(e,t){this.$model.properties.set(this,e,t)};function ma(e,t){this.model=e,this.properties=t}ma.prototype.createType=function(e){var t=this.model,n=this.properties,r=Object.create(Rr.prototype);L(e.properties,function(o){!o.isMany&&o.default!==void 0&&(r[o.name]=o.default)}),n.defineModel(r,t),n.defineDescriptor(r,e);var i=e.ns.name;function a(o){n.define(this,"$type",{value:i,enumerable:!0}),n.define(this,"$attrs",{value:{}}),n.define(this,"$parent",{writable:!0}),L(o,nt(function(l,c){this.set(c,l)},this))}return a.prototype=r,a.hasType=r.$instanceOf=this.model.hasType,n.defineModel(a,t),n.defineDescriptor(a,e),a};var al={String:!0,Boolean:!0,Integer:!0,Real:!0,Element:!0},ya={String:function(e){return e},Boolean:function(e){return e==="true"},Integer:function(e){return parseInt(e,10)},Real:function(e){return parseFloat(e)}};function Cr(e,t){var n=ya[e];return n?n(t):t}function ar(e){return!!al[e]}function ga(e){return!!ya[e]}function ge(e,t){var n=e.split(/:/),r,i;if(n.length===1)r=e,i=t;else if(n.length===2)r=n[1],i=n[0];else throw new Error("expected <prefix:localName> or <localName>, got "+e);return e=(i?i+":":"")+r,{name:e,prefix:i,localName:r}}function De(e){this.ns=e,this.name=e.name,this.allTypes=[],this.allTypesByName={},this.properties=[],this.propertiesByName={}}De.prototype.build=function(){return Qa(this,["ns","name","allTypes","allTypesByName","properties","propertiesByName","bodyProperty","idProperty"])};De.prototype.addProperty=function(e,t,n){typeof t=="boolean"&&(n=t,t=void 0),this.addNamedProperty(e,n!==!1);var r=this.properties;t!==void 0?r.splice(t,0,e):r.push(e)};De.prototype.replaceProperty=function(e,t,n){var r=e.ns,i=this.properties,a=this.propertiesByName,o=e.name!==t.name;if(e.isId){if(!t.isId)throw new Error("property <"+t.ns.name+"> must be id property to refine <"+e.ns.name+">");this.setIdProperty(t,!1)}if(e.isBody){if(!t.isBody)throw new Error("property <"+t.ns.name+"> must be body property to refine <"+e.ns.name+">");this.setBodyProperty(t,!1)}var l=i.indexOf(e);if(l===-1)throw new Error("property <"+r.name+"> not found in property list");i.splice(l,1),this.addProperty(t,n?void 0:l,o),a[r.name]=a[r.localName]=t};De.prototype.redefineProperty=function(e,t,n){var r=e.ns.prefix,i=t.split("#"),a=ge(i[0],r),o=ge(i[1],a.prefix).name,l=this.propertiesByName[o];if(l)this.replaceProperty(l,e,n);else throw new Error("refined property <"+o+"> not found");delete e.redefines};De.prototype.addNamedProperty=function(e,t){var n=e.ns,r=this.propertiesByName;t&&(this.assertNotDefined(e,n.name),this.assertNotDefined(e,n.localName)),r[n.name]=r[n.localName]=e};De.prototype.removeNamedProperty=function(e){var t=e.ns,n=this.propertiesByName;delete n[t.name],delete n[t.localName]};De.prototype.setBodyProperty=function(e,t){if(t&&this.bodyProperty)throw new Error("body property defined multiple times (<"+this.bodyProperty.ns.name+">, <"+e.ns.name+">)");this.bodyProperty=e};De.prototype.setIdProperty=function(e,t){if(t&&this.idProperty)throw new Error("id property defined multiple times (<"+this.idProperty.ns.name+">, <"+e.ns.name+">)");this.idProperty=e};De.prototype.assertNotTrait=function(e){if((e.extends||[]).length)throw new Error(`cannot create <${e.name}> extending <${e.extends}>`)};De.prototype.assertNotDefined=function(e,t){var n=e.name,r=this.propertiesByName[n];if(r)throw new Error("property <"+n+"> already defined; override of <"+r.definedBy.ns.name+"#"+r.ns.name+"> by <"+e.definedBy.ns.name+"#"+e.ns.name+"> not allowed without redefines")};De.prototype.hasProperty=function(e){return this.propertiesByName[e]};De.prototype.addTrait=function(e,t){t&&this.assertNotTrait(e);var n=this.allTypesByName,r=this.allTypes,i=e.name;i in n||(L(e.properties,nt(function(a){a=H({},a,{name:a.ns.localName,inherited:t}),Object.defineProperty(a,"definedBy",{value:e});var o=a.replaces,l=a.redefines;o||l?this.redefineProperty(a,o||l,o):(a.isBody&&this.setBodyProperty(a),a.isId&&this.setIdProperty(a),this.addProperty(a))},this)),r.push(e),n[i]=e)};function wt(e,t){this.packageMap={},this.typeMap={},this.packages=[],this.properties=t,L(e,nt(this.registerPackage,this))}wt.prototype.getPackage=function(e){return this.packageMap[e]};wt.prototype.getPackages=function(){return this.packages};wt.prototype.registerPackage=function(e){e=H({},e);var t=this.packageMap;ci(t,e,"prefix"),ci(t,e,"uri"),L(e.types,nt(function(n){this.registerType(n,e)},this)),t[e.uri]=t[e.prefix]=e,this.packages.push(e)};wt.prototype.registerType=function(e,t){e=H({},e,{superClass:(e.superClass||[]).slice(),extends:(e.extends||[]).slice(),properties:(e.properties||[]).slice(),meta:H(e.meta||{})});var n=ge(e.name,t.prefix),r=n.name,i={};L(e.properties,nt(function(a){var o=ge(a.name,n.prefix),l=o.name;ar(a.type)||(a.type=ge(a.type,o.prefix).name),H(a,{ns:o,name:l}),i[l]=a},this)),H(e,{ns:n,name:r,propertiesByName:i}),L(e.extends,nt(function(a){var o=ge(a,n.prefix),l=this.typeMap[o.name];l.traits=l.traits||[],l.traits.push(r)},this)),this.definePackage(e,t),this.typeMap[r]=e};wt.prototype.mapTypes=function(e,t,n){var r=ar(e.name)?{name:e.name}:this.typeMap[e.name],i=this;function a(c,p){var d=ge(c,ar(c)?"":e.prefix);i.mapTypes(d,t,p)}function o(c){return a(c,!0)}function l(c){return a(c,!1)}if(!r)throw new Error("unknown type <"+e.name+">");L(r.superClass,n?o:l),t(r,!n),L(r.traits,o)};wt.prototype.getEffectiveDescriptor=function(e){var t=ge(e),n=new De(t);this.mapTypes(t,function(i,a){n.addTrait(i,a)});var r=n.build();return this.definePackage(r,r.allTypes[r.allTypes.length-1].$pkg),r};wt.prototype.definePackage=function(e,t){this.properties.define(e,"$pkg",{value:t})};function ci(e,t,n){var r=t[n];if(r in e)throw new Error("package with "+n+" <"+r+"> already defined")}function Mt(e){this.model=e}Mt.prototype.set=function(e,t,n){if(!qe(t)||!t.length)throw new TypeError("property name must be a non-empty string");var r=this.getProperty(e,t),i=r&&r.name;ol(n)?r?delete e[i]:delete e.$attrs[or(t)]:r?i in e?e[i]=n:va(e,r,n):e.$attrs[or(t)]=n};Mt.prototype.get=function(e,t){var n=this.getProperty(e,t);if(!n)return e.$attrs[or(t)];var r=n.name;return!e[r]&&n.isMany&&va(e,n,[]),e[r]};Mt.prototype.define=function(e,t,n){if(!n.writable){var r=n.value;n=H({},n,{get:function(){return r}}),delete n.value}Object.defineProperty(e,t,n)};Mt.prototype.defineDescriptor=function(e,t){this.define(e,"$descriptor",{value:t})};Mt.prototype.defineModel=function(e,t){this.define(e,"$model",{value:t})};Mt.prototype.getProperty=function(e,t){var n=this.model,r=n.getPropertyDescriptor(e,t);if(r)return r;if(t.includes(":"))return null;const i=n.config.strict;if(typeof i<"u"){const a=new TypeError(`unknown property <${t}> on <${e.$type}>`);if(i)throw a;typeof console<"u"&&console.warn(a)}return null};function ol(e){return typeof e>"u"}function va(e,t,n){Object.defineProperty(e,t.name,{enumerable:!t.isReference,writable:!0,value:n,configurable:!0})}function or(e){return e.replace(/^:/,"")}function Ve(e,t={}){this.properties=new Mt(this),this.factory=new ma(this,this.properties),this.registry=new wt(e,this.properties),this.typeCache={},this.config=t}Ve.prototype.create=function(e,t){var n=this.getType(e);if(!n)throw new Error("unknown type <"+e+">");return new n(t)};Ve.prototype.getType=function(e){var t=this.typeCache,n=qe(e)?e:e.ns.name,r=t[n];return r||(e=this.registry.getEffectiveDescriptor(n),r=t[n]=this.factory.createType(e)),r};Ve.prototype.createAny=function(e,t,n){var r=ge(e),i={$type:e,$instanceOf:function(o){return o===this.$type},get:function(o){return this[o]},set:function(o,l){Za(this,[o],l)}},a={name:e,isGeneric:!0,ns:{prefix:r.prefix,localName:r.localName,uri:t}};return this.properties.defineDescriptor(i,a),this.properties.defineModel(i,this),this.properties.define(i,"get",{enumerable:!1,writable:!0}),this.properties.define(i,"set",{enumerable:!1,writable:!0}),this.properties.define(i,"$parent",{enumerable:!1,writable:!0}),this.properties.define(i,"$instanceOf",{enumerable:!1,writable:!0}),L(n,function(o,l){Ke(o)&&o.value!==void 0?i[o.name]=o.value:i[l]=o}),i};Ve.prototype.getPackage=function(e){return this.registry.getPackage(e)};Ve.prototype.getPackages=function(){return this.registry.getPackages()};Ve.prototype.getElementDescriptor=function(e){return e.$descriptor};Ve.prototype.hasType=function(e,t){t===void 0&&(t=e,e=this);var n=e.$model.getElementDescriptor(e);return t in n.allTypesByName};Ve.prototype.getPropertyDescriptor=function(e,t){return this.getElementDescriptor(e).propertiesByName[t]};Ve.prototype.getTypeDescriptor=function(e){return this.registry.typeMap[e]};var fi=String.fromCharCode,sl=Object.prototype.hasOwnProperty,ul=/&#(\d+);|&#x([0-9a-f]+);|&(\w+);/ig,qt={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'};Object.keys(qt).forEach(function(e){qt[e.toUpperCase()]=qt[e]});function ll(e,t,n,r){return r?sl.call(qt,r)?qt[r]:"&"+r+";":fi(t||parseInt(n,16))}function xt(e){return e.length>3&&e.indexOf("&")!==-1?e.replace(ul,ll):e}var cl="http://www.w3.org/2001/XMLSchema-instance",fl="xsi",pi="xsi:type",hi="non-whitespace outside of root node";function Dt(e){return new Error(e)}function di(e){return"missing namespace for prefix <"+e+">"}function mn(e){return{get:e,enumerable:!0}}function pl(e){var t={},n;for(n in e)t[n]=e[n];return t}function sr(e){return e+"$uri"}function hl(e){var t={},n,r;for(n in e)r=e[n],t[r]=r,t[sr(r)]=n;return t}function mi(){return{line:0,column:0}}function dl(e){throw e}function Ea(e){if(!this)return new Ea(e);var t=e&&e.proxy,n,r,i,a,o=dl,l,c,p,d,v=mi,b=!1,g=!1,E=null,R=!1,T;function z(y){y instanceof Error||(y=Dt(y)),E=y,o(y,v)}function W(y){l&&(y instanceof Error||(y=Dt(y)),l(y,v))}this.on=function(y,x){if(typeof x!="function")throw Dt("required args <name, cb>");switch(y){case"openTag":r=x;break;case"text":n=x;break;case"closeTag":i=x;break;case"error":o=x;break;case"warn":l=x;break;case"cdata":a=x;break;case"attention":d=x;break;case"question":p=x;break;case"comment":c=x;break;default:throw Dt("unsupported event: "+y)}return this},this.ns=function(y){if(typeof y>"u"&&(y={}),typeof y!="object")throw Dt("required args <nsMap={}>");var x={},C;for(C in y)x[C]=y[C];return x[cl]=fl,g=!0,T=x,this},this.parse=function(y){if(typeof y!="string")throw Dt("required args <xml=string>");return E=null,_(y),v=mi,R=!1,E},this.stop=function(){R=!0};function _(y){var x=g?[]:null,C=g?hl(T):null,N,w=[],M=0,k=!1,I=!1,B=0,V=0,Z,Oe,ae,J,xe,be,oe,de,A,P="",F=0,te;function f(){if(te!==null)return te;var u,h,m,S=g&&C.xmlns,U=g&&b?[]:null,j=F,G=P,he=G.length,Ne,_e,le,Be,ne,ot={},sn={},ke,Y,re;e:for(;j<he;j++)if(ke=!1,Y=G.charCodeAt(j),!(Y===32||Y<14&&Y>8)){for((Y<65||Y>122||Y>90&&Y<97)&&Y!==95&&Y!==58&&(W("illegal first char attribute name"),ke=!0),re=j+1;re<he;re++)if(Y=G.charCodeAt(re),!(Y>96&&Y<123||Y>64&&Y<91||Y>47&&Y<59||Y===46||Y===45||Y===95)){if(Y===32||Y<14&&Y>8){W("missing attribute value"),j=re;continue e}if(Y===61)break;W("illegal attribute name char"),ke=!0}if(ne=G.substring(j,re),ne==="xmlns:xmlns"&&(W("illegal declaration of xmlns"),ke=!0),Y=G.charCodeAt(re+1),Y===34)re=G.indexOf('"',j=re+2),re===-1&&(re=G.indexOf("'",j),re!==-1&&(W("attribute value quote missmatch"),ke=!0));else if(Y===39)re=G.indexOf("'",j=re+2),re===-1&&(re=G.indexOf('"',j),re!==-1&&(W("attribute value quote missmatch"),ke=!0));else for(W("missing attribute value quotes"),ke=!0,re=re+1;re<he&&(Y=G.charCodeAt(re+1),!(Y===32||Y<14&&Y>8));re++);for(re===-1&&(W("missing closing quotes"),re=he,ke=!0),ke||(le=G.substring(j,re)),j=re;re+1<he&&(Y=G.charCodeAt(re+1),!(Y===32||Y<14&&Y>8));re++)j===re&&(W("illegal character after attribute end"),ke=!0);if(j=re+1,ke)continue e;if(ne in sn){W("attribute <"+ne+"> already defined");continue}if(sn[ne]=!0,!g){ot[ne]=le;continue}if(b){if(_e=ne==="xmlns"?"xmlns":ne.charCodeAt(0)===120&&ne.substr(0,6)==="xmlns:"?ne.substr(6):null,_e!==null){if(u=xt(le),h=sr(_e),Be=T[u],!Be){if(_e==="xmlns"||h in C&&C[h]!==u)do Be="ns"+M++;while(typeof C[Be]<"u");else Be=_e;T[u]=Be}C[_e]!==Be&&(Ne||(C=pl(C),Ne=!0),C[_e]=Be,_e==="xmlns"&&(C[sr(Be)]=u,S=Be),C[h]=u),ot[ne]=le;continue}U.push(ne,le);continue}if(Y=ne.indexOf(":"),Y===-1){ot[ne]=le;continue}if(!(m=C[ne.substring(0,Y)])){W(di(ne.substring(0,Y)));continue}ne=S===m?ne.substr(Y+1):m+ne.substr(Y),ne===pi&&(Y=le.indexOf(":"),Y!==-1?(m=le.substring(0,Y),m=C[m]||m,le=m+le.substring(Y)):le=S+":"+le),ot[ne]=le}if(b)for(j=0,he=U.length;j<he;j++){if(ne=U[j++],le=U[j],Y=ne.indexOf(":"),Y!==-1){if(!(m=C[ne.substring(0,Y)])){W(di(ne.substring(0,Y)));continue}ne=S===m?ne.substr(Y+1):m+ne.substr(Y),ne===pi&&(Y=le.indexOf(":"),Y!==-1?(m=le.substring(0,Y),m=C[m]||m,le=m+le.substring(Y)):le=S+":"+le)}ot[ne]=le}return te=ot}function s(){for(var u=/(\r\n|\r|\n)/g,h=0,m=0,S=0,U=V,j,G;B>=S&&(j=u.exec(y),!(!j||(U=j[0].length+j.index,U>B)));)h+=1,S=U;return B==-1?(m=U,G=y.substring(V)):V===0?G=y.substring(V,B):(m=B-S,G=V==-1?y.substring(B):y.substring(B,V+1)),{data:G,line:h,column:m}}for(v=s,t&&(A=Object.create({},{name:mn(function(){return oe}),originalName:mn(function(){return de}),attrs:mn(f),ns:mn(function(){return C})}));V!==-1;){if(y.charCodeAt(V)===60?B=V:B=y.indexOf("<",V),B===-1){if(w.length)return z("unexpected end of file");if(V===0)return z("missing start tag");V<y.length&&y.substring(V).trim()&&W(hi);return}if(V!==B){if(w.length){if(n&&(n(y.substring(V,B),xt,v),R))return}else if(y.substring(V,B).trim()&&(W(hi),R))return}if(J=y.charCodeAt(B+1),J===33){if(ae=y.charCodeAt(B+2),ae===91&&y.substr(B+3,6)==="CDATA["){if(V=y.indexOf("]]>",B),V===-1)return z("unclosed cdata");if(a&&(a(y.substring(B+9,V),v),R))return;V+=3;continue}if(ae===45&&y.charCodeAt(B+3)===45){if(V=y.indexOf("-->",B),V===-1)return z("unclosed comment");if(c&&(c(y.substring(B+4,V),xt,v),R))return;V+=3;continue}}if(J===63){if(V=y.indexOf("?>",B),V===-1)return z("unclosed question");if(p&&(p(y.substring(B,V+2),v),R))return;V+=2;continue}for(Z=B+1;;Z++){if(xe=y.charCodeAt(Z),isNaN(xe))return V=-1,z("unclosed tag");if(xe===34)ae=y.indexOf('"',Z+1),Z=ae!==-1?ae:Z;else if(xe===39)ae=y.indexOf("'",Z+1),Z=ae!==-1?ae:Z;else if(xe===62){V=Z;break}}if(J===33){if(d&&(d(y.substring(B,V+1),xt,v),R))return;V+=1;continue}if(te={},J===47){if(k=!1,I=!0,!w.length)return z("missing open tag");if(Z=oe=w.pop(),ae=B+2+Z.length,y.substring(B+2,ae)!==Z)return z("closing tag mismatch");for(;ae<V;ae++)if(J=y.charCodeAt(ae),!(J===32||J>8&&J<14))return z("close tag")}else{if(y.charCodeAt(V-1)===47?(Z=oe=y.substring(B+1,V-1),k=!0,I=!0):(Z=oe=y.substring(B+1,V),k=!0,I=!1),!(J>96&&J<123||J>64&&J<91||J===95||J===58))return z("illegal first char nodeName");for(ae=1,Oe=Z.length;ae<Oe;ae++)if(J=Z.charCodeAt(ae),!(J>96&&J<123||J>64&&J<91||J>47&&J<59||J===45||J===95||J==46)){if(J===32||J<14&&J>8){oe=Z.substring(0,ae),te=null;break}return z("invalid nodeName")}I||w.push(oe)}if(g){if(N=C,k&&(I||x.push(N),te===null&&(b=Z.indexOf("xmlns",ae)!==-1)&&(F=ae,P=Z,f(),b=!1)),de=oe,J=oe.indexOf(":"),J!==-1){if(be=C[oe.substring(0,J)],!be)return z("missing namespace on <"+de+">");oe=oe.substr(J+1)}else be=C.xmlns;be&&(oe=be+":"+oe)}if(k&&(F=ae,P=Z,r&&(t?r(A,xt,I,v):r(oe,f,xt,I,v),R)))return;if(I){if(i&&(i(t?A:oe,xt,k,v),R))return;g&&(k?C=N:C=x.pop())}V+=1}}}function wa(e){return e.xml&&e.xml.tagAlias==="lowerCase"}var ml={xsi:"http://www.w3.org/2001/XMLSchema-instance",xml:"http://www.w3.org/XML/1998/namespace"},$n="xsi:type";function xa(e){return e.xml&&e.xml.serialize}function ba(e){return xa(e)===$n}function yl(e){return xa(e)==="property"}function gl(e){return e.charAt(0).toUpperCase()+e.slice(1)}function _a(e,t){return wa(t)?e.prefix+":"+gl(e.localName):e.name}function vl(e,t){var n=e.name,r=e.localName,i=t.xml&&t.xml.typePrefix;return i&&r.indexOf(i)===0?e.prefix+":"+r.slice(i.length):n}function El(e,t){var n=ge(e),r=t.getPackage(n.prefix);return vl(n,r)}function yt(e){return new Error(e)}function tt(e){return e.$descriptor}function wl(e){H(this,e),this.elementsById={},this.references=[],this.warnings=[],this.addReference=function(t){this.references.push(t)},this.addElement=function(t){if(!t)throw yt("expected element");var n=this.elementsById,r=tt(t),i=r.idProperty,a;if(i&&(a=t.get(i.name),a)){if(!/^([a-z][\w-.]*:)?[a-z_][\w-.]*$/i.test(a))throw new Error("illegal ID <"+a+">");if(n[a])throw yt("duplicate ID <"+a+">");n[a]=t}},this.addWarning=function(t){this.warnings.push(t)}}function an(){}an.prototype.handleEnd=function(){};an.prototype.handleText=function(){};an.prototype.handleNode=function(){};function Pr(){}Pr.prototype=Object.create(an.prototype);Pr.prototype.handleNode=function(){return this};function jt(){}jt.prototype=Object.create(an.prototype);jt.prototype.handleText=function(e){this.body=(this.body||"")+e};function on(e,t){this.property=e,this.context=t}on.prototype=Object.create(jt.prototype);on.prototype.handleNode=function(e){if(this.element)throw yt("expected no sub nodes");return this.element=this.createReference(e),this};on.prototype.handleEnd=function(){this.element.id=this.body};on.prototype.createReference=function(e){return{property:this.property.ns.name,id:""}};function kr(e,t){this.element=t,this.propertyDesc=e}kr.prototype=Object.create(jt.prototype);kr.prototype.handleEnd=function(){var e=this.body||"",t=this.element,n=this.propertyDesc;e=Cr(n.type,e),n.isMany?t.get(n.name).push(e):t.set(n.name,e)};function Vn(){}Vn.prototype=Object.create(jt.prototype);Vn.prototype.handleNode=function(e){var t=this,n=this.element;return n?t=this.handleChild(e):(n=this.element=this.createElement(e),this.context.addElement(n)),t};function ve(e,t,n){this.model=e,this.type=e.getType(t),this.context=n}ve.prototype=Object.create(Vn.prototype);ve.prototype.addReference=function(e){this.context.addReference(e)};ve.prototype.handleText=function(e){var t=this.element,n=tt(t),r=n.bodyProperty;if(!r)throw yt("unexpected body text <"+e+">");jt.prototype.handleText.call(this,e)};ve.prototype.handleEnd=function(){var e=this.body,t=this.element,n=tt(t),r=n.bodyProperty;r&&e!==void 0&&(e=Cr(r.type,e),t.set(r.name,e))};ve.prototype.createElement=function(e){var t=e.attributes,n=this.type,r=tt(n),i=this.context,a=new n({}),o=this.model,l;return L(t,function(c,p){var d=r.propertiesByName[p],v;d&&d.isReference?d.isMany?(v=c.split(" "),L(v,function(b){i.addReference({element:a,property:d.ns.name,id:b})})):i.addReference({element:a,property:d.ns.name,id:c}):(d?c=Cr(d.type,c):p!=="xmlns"&&(l=ge(p,r.ns.prefix),o.getPackage(l.prefix)&&i.addWarning({message:"unknown attribute <"+p+">",element:a,property:p,value:c})),a.set(p,c))}),a};ve.prototype.getPropertyForNode=function(e){var t=e.name,n=ge(t),r=this.type,i=this.model,a=tt(r),o=n.name,l=a.propertiesByName[o],c,p;if(l&&!l.isAttr)return ba(l)&&(c=e.attributes[$n],c)?(c=El(c,i),p=i.getType(c),H({},l,{effectiveType:tt(p).name})):l;var d=i.getPackage(n.prefix);if(d){if(c=_a(n,d),p=i.getType(c),l=Fe(a.properties,function(v){return!v.isVirtual&&!v.isReference&&!v.isAttribute&&p.hasType(v.type)}),l)return H({},l,{effectiveType:tt(p).name})}else if(l=Fe(a.properties,function(v){return!v.isReference&&!v.isAttribute&&v.type==="Element"}),l)return l;throw yt("unrecognized element <"+n.name+">")};ve.prototype.toString=function(){return"ElementDescriptor["+tt(this.type).name+"]"};ve.prototype.valueHandler=function(e,t){return new kr(e,t)};ve.prototype.referenceHandler=function(e){return new on(e,this.context)};ve.prototype.handler=function(e){return e==="Element"?new It(this.model,e,this.context):new ve(this.model,e,this.context)};ve.prototype.handleChild=function(e){var t,n,r,i;if(t=this.getPropertyForNode(e),r=this.element,n=t.effectiveType||t.type,ga(n))return this.valueHandler(t,r);t.isReference?i=this.referenceHandler(t).handleNode(e):i=this.handler(n).handleNode(e);var a=i.element;return a!==void 0&&(t.isMany?r.get(t.name).push(a):r.set(t.name,a),t.isReference?(H(a,{element:r}),this.context.addReference(a)):a.$parent=r),i};function Mr(e,t,n){ve.call(this,e,t,n)}Mr.prototype=Object.create(ve.prototype);Mr.prototype.createElement=function(e){var t=e.name,n=ge(t),r=this.model,i=this.type,a=r.getPackage(n.prefix),o=a&&_a(n,a)||t;if(!i.hasType(o))throw yt("unexpected element <"+e.originalName+">");return ve.prototype.createElement.call(this,e)};function It(e,t,n){this.model=e,this.context=n}It.prototype=Object.create(Vn.prototype);It.prototype.createElement=function(e){var t=e.name,n=ge(t),r=n.prefix,i=e.ns[r+"$uri"],a=e.attributes;return this.model.createAny(t,i,a)};It.prototype.handleChild=function(e){var t=new It(this.model,"Element",this.context).handleNode(e),n=this.element,r=t.element,i;return r!==void 0&&(i=n.$children=n.$children||[],i.push(r),r.$parent=n),t};It.prototype.handleEnd=function(){this.body&&(this.element.$body=this.body)};function Tr(e){e instanceof Ve&&(e={model:e}),H(this,{lax:!1},e)}Tr.prototype.fromXML=function(e,t,n){var r=t.rootHandler;t instanceof ve?(r=t,t={}):typeof t=="string"?(r=this.handler(t),t={}):typeof r=="string"&&(r=this.handler(r));var i=this.model,a=this.lax,o=new wl(H({},t,{rootHandler:r})),l=new Ea({proxy:!0}),c=xl();r.context=o,c.push(r);function p(x,C,N){var w=C(),M=w.line,k=w.column,I=w.data;I.charAt(0)==="<"&&I.indexOf(" ")!==-1&&(I=I.slice(0,I.indexOf(" "))+">");var B="unparsable content "+(I?I+" ":"")+`detected
	line: `+M+`
	column: `+k+`
	nested error: `+x.message;if(N)return o.addWarning({message:B,error:x}),!0;throw yt(B)}function d(x,C){return p(x,C,!0)}function v(){var x=o.elementsById,C=o.references,N,w;for(N=0;w=C[N];N++){var M=w.element,k=x[w.id],I=tt(M).propertiesByName[w.property];if(k||o.addWarning({message:"unresolved reference <"+w.id+">",element:w.element,property:w.property,value:w.id}),I.isMany){var B=M.get(I.name),V=B.indexOf(w);V===-1&&(V=B.length),k?B[V]=k:B.splice(V,1)}else M.set(I.name,k)}}function b(){c.pop().handleEnd()}var g=/^<\?xml /i,E=/ encoding="([^"]+)"/i,R=/^utf-8$/i;function T(x){if(g.test(x)){var C=E.exec(x),N=C&&C[1];!N||R.test(N)||o.addWarning({message:"unsupported document encoding <"+N+">, falling back to UTF-8"})}}function z(x,C){var N=c.peek();try{c.push(N.handleNode(x))}catch(w){p(w,C,a)&&c.push(new Pr)}}function W(x,C){try{c.peek().handleText(x)}catch(N){d(N,C)}}function _(x,C){x.trim()&&W(x,C)}var y=i.getPackages().reduce(function(x,C){return x[C.uri]=C.prefix,x},{"http://www.w3.org/XML/1998/namespace":"xml"});return l.ns(y).on("openTag",function(x,C,N,w){var M=x.attrs||{},k=Object.keys(M).reduce(function(B,V){var Z=C(M[V]);return B[V]=Z,B},{}),I={name:x.name,originalName:x.originalName,attributes:k,ns:x.ns};z(I,w)}).on("question",T).on("closeTag",b).on("cdata",W).on("text",function(x,C,N){_(C(x),N)}).on("error",p).on("warn",d),new Promise(function(x,C){var N;try{l.parse(e),v()}catch(B){N=B}var w=r.element;!N&&!w&&(N=yt("failed to parse document as <"+r.type.$descriptor.name+">"));var M=o.warnings,k=o.references,I=o.elementsById;return N?(N.warnings=M,C(N)):x({rootElement:w,elementsById:I,references:k,warnings:M})})};Tr.prototype.handler=function(e){return new Mr(this.model,e)};function xl(){var e=[];return Object.defineProperty(e,"peek",{value:function(){return this[this.length-1]}}),e}var bl=`<?xml version="1.0" encoding="UTF-8"?>
`,_l=/<|>|'|"|&|\n\r|\n/g,Sa=/<|>|&/g;function Sl(e){var t={},n={},r={},i=[],a=[];this.byUri=function(o){return n[o]||e&&e.byUri(o)},this.add=function(o,l){n[o.uri]=o,l?i.push(o):a.push(o),this.mapPrefix(o.prefix,o.uri)},this.uriByPrefix=function(o){return t[o||"xmlns"]},this.mapPrefix=function(o,l){t[o||"xmlns"]=l},this.getNSKey=function(o){return o.prefix!==void 0?o.uri+"|"+o.prefix:o.uri},this.logUsed=function(o){var l=o.uri,c=this.getNSKey(o);r[c]=this.byUri(l),e&&e.logUsed(o)},this.getUsed=function(o){function l(d){var v=c.getNSKey(d);return r[v]}var c=this,p=[].concat(i,a);return p.filter(l)}}function Al(e){return e.charAt(0).toLowerCase()+e.slice(1)}function Rl(e,t){return wa(t)?Al(e):e}function Aa(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function Ra(e){return qe(e)?e:(e.prefix?e.prefix+":":"")+e.localName}function Cl(e){return e.getUsed().filter(function(t){return t.prefix!=="xml"}).map(function(t){var n="xmlns"+(t.prefix?":"+t.prefix:"");return{name:n,value:t.uri}})}function Pl(e,t){return t.isGeneric?H({localName:t.ns.localName},e):H({localName:Rl(t.ns.localName,t.$pkg)},e)}function kl(e,t){return H({localName:t.ns.localName},e)}function Ml(e){var t=e.$descriptor;return _t(t.properties,function(n){var r=n.name;if(n.isVirtual||!At(e,r))return!1;var i=e[r];return i===n.default||i===null?!1:n.isMany?i.length:!0})}var Tl={"\n":"#10","\n\r":"#10",'"':"#34","'":"#39","<":"#60",">":"#62","&":"#38"},Dl={"<":"lt",">":"gt","&":"amp"};function Ca(e,t,n){return e=qe(e)?e:""+e,e.replace(t,function(r){return"&"+n[r]+";"})}function Ol(e){return Ca(e,_l,Tl)}function Nl(e){return Ca(e,Sa,Dl)}function Bl(e){return _t(e,function(t){return t.isAttr})}function Ll(e){return _t(e,function(t){return!t.isAttr})}function Dr(e){this.tagName=e}Dr.prototype.build=function(e){return this.element=e,this};Dr.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"+this.element.id+"</"+this.tagName+">").appendNewLine()};function St(){}St.prototype.serializeValue=St.prototype.serializeTo=function(e){e.append(this.escape?Nl(this.value):this.value)};St.prototype.build=function(e,t){return this.value=t,e.type==="String"&&t.search(Sa)!==-1&&(this.escape=!0),this};function Or(e){this.tagName=e}Aa(Or,St);Or.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"),this.serializeValue(e),e.append("</"+this.tagName+">").appendNewLine()};function ue(e,t){this.body=[],this.attrs=[],this.parent=e,this.propertyDescriptor=t}ue.prototype.build=function(e){this.element=e;var t=e.$descriptor,n=this.propertyDescriptor,r,i,a=t.isGeneric;return a?r=this.parseGeneric(e):r=this.parseNsAttributes(e),n?this.ns=this.nsPropertyTagName(n):this.ns=this.nsTagName(t),this.tagName=this.addTagName(this.ns),a||(i=Ml(e),this.parseAttributes(Bl(i)),this.parseContainments(Ll(i))),this.parseGenericAttributes(e,r),this};ue.prototype.nsTagName=function(e){var t=this.logNamespaceUsed(e.ns);return Pl(t,e)};ue.prototype.nsPropertyTagName=function(e){var t=this.logNamespaceUsed(e.ns);return kl(t,e)};ue.prototype.isLocalNs=function(e){return e.uri===this.ns.uri};ue.prototype.nsAttributeName=function(e){var t;if(qe(e)?t=ge(e):t=e.ns,e.inherited)return{localName:t.localName};var n=this.logNamespaceUsed(t);return this.getNamespaces().logUsed(n),this.isLocalNs(n)?{localName:t.localName}:H({localName:t.localName},n)};ue.prototype.parseGeneric=function(e){var t=this,n=this.body,r=[];return L(e,function(i,a){var o;a==="$body"?n.push(new St().build({type:"String"},i)):a==="$children"?L(i,function(l){n.push(new ue(t).build(l))}):a.indexOf("$")!==0&&(o=t.parseNsAttribute(e,a,i),o&&r.push({name:a,value:i}))}),r};ue.prototype.parseNsAttribute=function(e,t,n){var r=e.$model,i=ge(t),a;if(i.prefix==="xmlns"&&(a={prefix:i.localName,uri:n}),!i.prefix&&i.localName==="xmlns"&&(a={uri:n}),!a)return{name:t,value:n};if(r&&r.getPackage(n))this.logNamespace(a,!0,!0);else{var o=this.logNamespaceUsed(a,!0);this.getNamespaces().logUsed(o)}};ue.prototype.parseNsAttributes=function(e,t){var n=this,r=e.$attrs,i=[];return L(r,function(a,o){var l=n.parseNsAttribute(e,o,a);l&&i.push(l)}),i};ue.prototype.parseGenericAttributes=function(e,t){var n=this;L(t,function(r){if(r.name!==$n)try{n.addAttribute(n.nsAttributeName(r.name),r.value)}catch(i){console.warn("missing namespace information for ",r.name,"=",r.value,"on",e,i)}})};ue.prototype.parseContainments=function(e){var t=this,n=this.body,r=this.element;L(e,function(i){var a=r.get(i.name),o=i.isReference,l=i.isMany;if(l||(a=[a]),i.isBody)n.push(new St().build(i,a[0]));else if(ga(i.type))L(a,function(d){n.push(new Or(t.addTagName(t.nsPropertyTagName(i))).build(i,d))});else if(o)L(a,function(d){n.push(new Dr(t.addTagName(t.nsPropertyTagName(i))).build(d))});else{var c=ba(i),p=yl(i);L(a,function(d){var v;c?v=new jn(t,i):p?v=new ue(t,i):v=new ue(t),n.push(v.build(d))})}})};ue.prototype.getNamespaces=function(e){var t=this.namespaces,n=this.parent,r;return t||(r=n&&n.getNamespaces(),e||!r?this.namespaces=t=new Sl(r):t=r),t};ue.prototype.logNamespace=function(e,t,n){var r=this.getNamespaces(n),i=e.uri,a=e.prefix,o=r.byUri(i);return(!o||n)&&r.add(e,t),r.mapPrefix(a,i),e};ue.prototype.logNamespaceUsed=function(e,t){var n=this.element,r=n.$model,i=this.getNamespaces(t),a=e.prefix,o=e.uri,l,c,p;if(!a&&!o)return{localName:e.localName};if(p=ml[a]||r&&(r.getPackage(a)||{}).uri,o=o||p||i.uriByPrefix(a),!o)throw new Error("no namespace uri given for prefix <"+a+">");if(e=i.byUri(o),!e){for(l=a,c=1;i.uriByPrefix(l);)l=a+"_"+c++;e=this.logNamespace({prefix:l,uri:o},p===o)}return a&&i.mapPrefix(a,o),e};ue.prototype.parseAttributes=function(e){var t=this,n=this.element;L(e,function(r){var i=n.get(r.name);if(r.isReference)if(!r.isMany)i=i.id;else{var a=[];L(i,function(o){a.push(o.id)}),i=a.join(" ")}t.addAttribute(t.nsAttributeName(r),i)})};ue.prototype.addTagName=function(e){var t=this.logNamespaceUsed(e);return this.getNamespaces().logUsed(t),Ra(e)};ue.prototype.addAttribute=function(e,t){var n=this.attrs;qe(t)&&(t=Ol(t));var r=Ha(n,function(a){return a.name.localName===e.localName&&a.name.uri===e.uri&&a.name.prefix===e.prefix}),i={name:e,value:t};r!==-1?n.splice(r,1,i):n.push(i)};ue.prototype.serializeAttributes=function(e){var t=this.attrs,n=this.namespaces;n&&(t=Cl(n).concat(t)),L(t,function(r){e.append(" ").append(Ra(r.name)).append('="').append(r.value).append('"')})};ue.prototype.serializeTo=function(e){var t=this.body[0],n=t&&t.constructor!==St;e.appendIndent().append("<"+this.tagName),this.serializeAttributes(e),e.append(t?">":" />"),t&&(n&&e.appendNewLine().indent(),L(this.body,function(r){r.serializeTo(e)}),n&&e.unindent().appendIndent(),e.append("</"+this.tagName+">")),e.appendNewLine()};function jn(e,t){ue.call(this,e,t)}Aa(jn,ue);jn.prototype.parseNsAttributes=function(e){var t=ue.prototype.parseNsAttributes.call(this,e),n=e.$descriptor;if(n.name===this.propertyDescriptor.type)return t;var r=this.typeNs=this.nsTagName(n);this.getNamespaces().logUsed(this.typeNs);var i=e.$model.getPackage(r.uri),a=i.xml&&i.xml.typePrefix||"";return this.addAttribute(this.nsAttributeName($n),(r.prefix?r.prefix+":":"")+a+n.ns.localName),t};jn.prototype.isLocalNs=function(e){return e.uri===(this.typeNs||this.ns).uri};function Il(){this.value="",this.write=function(e){this.value+=e}}function Fl(e,t){var n=[""];this.append=function(r){return e.write(r),this},this.appendNewLine=function(){return t&&e.write(`
`),this},this.appendIndent=function(){return t&&e.write(n.join("  ")),this},this.indent=function(){return n.push(""),this},this.unindent=function(){return n.pop(),this}}function $l(e){e=H({format:!1,preamble:!0},e||{});function t(n,r){var i=r||new Il,a=new Fl(i,e.format);if(e.preamble&&a.append(bl),new ue().build(n).serializeTo(a),!r)return i.value}return{toXML:t}}function Wn(e,t){Ve.call(this,e,t)}Wn.prototype=Object.create(Ve.prototype);Wn.prototype.fromXML=function(e,t,n){qe(t)||(n=t,t="bpmn:Definitions");var r=new Tr(H({model:this,lax:!0},n)),i=r.handler(t);return r.fromXML(e,i)};Wn.prototype.toXML=function(e,t){var n=new $l(t);return new Promise(function(r,i){try{var a=n.toXML(e);return r({xml:a})}catch(o){return i(o)}})};var Vl="BPMN20",jl="http://www.omg.org/spec/BPMN/20100524/MODEL",Wl="bpmn",zl=[],Hl=[{name:"Interface",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"operations",type:"Operation",isMany:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"Operation",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"inMessageRef",type:"Message",isReference:!0},{name:"outMessageRef",type:"Message",isReference:!0},{name:"errorRef",type:"Error",isMany:!0,isReference:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"EndPoint",superClass:["RootElement"]},{name:"Auditing",superClass:["BaseElement"]},{name:"GlobalTask",superClass:["CallableElement"],properties:[{name:"resources",type:"ResourceRole",isMany:!0}]},{name:"Monitoring",superClass:["BaseElement"]},{name:"Performer",superClass:["ResourceRole"]},{name:"Process",superClass:["FlowElementsContainer","CallableElement"],properties:[{name:"processType",type:"ProcessType",isAttr:!0},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"properties",type:"Property",isMany:!0},{name:"laneSets",isMany:!0,replaces:"FlowElementsContainer#laneSets",type:"LaneSet"},{name:"flowElements",isMany:!0,replaces:"FlowElementsContainer#flowElements",type:"FlowElement"},{name:"artifacts",type:"Artifact",isMany:!0},{name:"resources",type:"ResourceRole",isMany:!0},{name:"correlationSubscriptions",type:"CorrelationSubscription",isMany:!0},{name:"supports",type:"Process",isMany:!0,isReference:!0},{name:"definitionalCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"isExecutable",isAttr:!0,type:"Boolean"}]},{name:"LaneSet",superClass:["BaseElement"],properties:[{name:"lanes",type:"Lane",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Lane",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"partitionElementRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"partitionElement",type:"BaseElement"},{name:"flowNodeRef",type:"FlowNode",isMany:!0,isReference:!0},{name:"childLaneSet",type:"LaneSet",xml:{serialize:"xsi:type"}}]},{name:"GlobalManualTask",superClass:["GlobalTask"]},{name:"ManualTask",superClass:["Task"]},{name:"UserTask",superClass:["Task"],properties:[{name:"renderings",type:"Rendering",isMany:!0},{name:"implementation",isAttr:!0,type:"String"}]},{name:"Rendering",superClass:["BaseElement"]},{name:"HumanPerformer",superClass:["Performer"]},{name:"PotentialOwner",superClass:["HumanPerformer"]},{name:"GlobalUserTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"renderings",type:"Rendering",isMany:!0}]},{name:"Gateway",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"gatewayDirection",type:"GatewayDirection",default:"Unspecified",isAttr:!0}]},{name:"EventBasedGateway",superClass:["Gateway"],properties:[{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"eventGatewayType",type:"EventBasedGatewayType",isAttr:!0,default:"Exclusive"}]},{name:"ComplexGateway",superClass:["Gateway"],properties:[{name:"activationCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ExclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"InclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ParallelGateway",superClass:["Gateway"]},{name:"RootElement",isAbstract:!0,superClass:["BaseElement"]},{name:"Relationship",superClass:["BaseElement"],properties:[{name:"type",isAttr:!0,type:"String"},{name:"direction",type:"RelationshipDirection",isAttr:!0},{name:"source",isMany:!0,isReference:!0,type:"Element"},{name:"target",isMany:!0,isReference:!0,type:"Element"}]},{name:"BaseElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,type:"String",isId:!0},{name:"documentation",type:"Documentation",isMany:!0},{name:"extensionDefinitions",type:"ExtensionDefinition",isMany:!0,isReference:!0},{name:"extensionElements",type:"ExtensionElements"}]},{name:"Extension",properties:[{name:"mustUnderstand",default:!1,isAttr:!0,type:"Boolean"},{name:"definition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"extensionAttributeDefinitions",type:"ExtensionAttributeDefinition",isMany:!0}]},{name:"ExtensionAttributeDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"type",isAttr:!0,type:"String"},{name:"isReference",default:!1,isAttr:!0,type:"Boolean"},{name:"extensionDefinition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionElements",properties:[{name:"valueRef",isAttr:!0,isReference:!0,type:"Element"},{name:"values",type:"Element",isMany:!0},{name:"extensionAttributeDefinition",type:"ExtensionAttributeDefinition",isAttr:!0,isReference:!0}]},{name:"Documentation",superClass:["BaseElement"],properties:[{name:"text",type:"String",isBody:!0},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Event",isAbstract:!0,superClass:["FlowNode","InteractionNode"],properties:[{name:"properties",type:"Property",isMany:!0}]},{name:"IntermediateCatchEvent",superClass:["CatchEvent"]},{name:"IntermediateThrowEvent",superClass:["ThrowEvent"]},{name:"EndEvent",superClass:["ThrowEvent"]},{name:"StartEvent",superClass:["CatchEvent"],properties:[{name:"isInterrupting",default:!0,isAttr:!0,type:"Boolean"}]},{name:"ThrowEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"inputSet",type:"InputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"CatchEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"parallelMultiple",isAttr:!0,type:"Boolean",default:!1},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"outputSet",type:"OutputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"BoundaryEvent",superClass:["CatchEvent"],properties:[{name:"cancelActivity",default:!0,isAttr:!0,type:"Boolean"},{name:"attachedToRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"EventDefinition",isAbstract:!0,superClass:["RootElement"]},{name:"CancelEventDefinition",superClass:["EventDefinition"]},{name:"ErrorEventDefinition",superClass:["EventDefinition"],properties:[{name:"errorRef",type:"Error",isAttr:!0,isReference:!0}]},{name:"TerminateEventDefinition",superClass:["EventDefinition"]},{name:"EscalationEventDefinition",superClass:["EventDefinition"],properties:[{name:"escalationRef",type:"Escalation",isAttr:!0,isReference:!0}]},{name:"Escalation",properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"escalationCode",isAttr:!0,type:"String"}],superClass:["RootElement"]},{name:"CompensateEventDefinition",superClass:["EventDefinition"],properties:[{name:"waitForCompletion",isAttr:!0,type:"Boolean",default:!0},{name:"activityRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"TimerEventDefinition",superClass:["EventDefinition"],properties:[{name:"timeDate",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeCycle",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeDuration",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"LinkEventDefinition",superClass:["EventDefinition"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"target",type:"LinkEventDefinition",isReference:!0},{name:"source",type:"LinkEventDefinition",isMany:!0,isReference:!0}]},{name:"MessageEventDefinition",superClass:["EventDefinition"],properties:[{name:"messageRef",type:"Message",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"ConditionalEventDefinition",superClass:["EventDefinition"],properties:[{name:"condition",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"SignalEventDefinition",superClass:["EventDefinition"],properties:[{name:"signalRef",type:"Signal",isAttr:!0,isReference:!0}]},{name:"Signal",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ImplicitThrowEvent",superClass:["ThrowEvent"]},{name:"DataState",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"ItemAwareElement",superClass:["BaseElement"],properties:[{name:"itemSubjectRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"dataState",type:"DataState"}]},{name:"DataAssociation",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"ItemAwareElement",isMany:!0,isReference:!0},{name:"targetRef",type:"ItemAwareElement",isReference:!0},{name:"transformation",type:"FormalExpression",xml:{serialize:"property"}},{name:"assignment",type:"Assignment",isMany:!0}]},{name:"DataInput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"inputSetRef",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithOptional",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithWhileExecuting",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"DataOutput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"outputSetRef",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithOptional",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithWhileExecuting",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"InputSet",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"dataInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"optionalInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"whileExecutingInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"outputSetRefs",type:"OutputSet",isMany:!0,isReference:!0}]},{name:"OutputSet",superClass:["BaseElement"],properties:[{name:"dataOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"inputSetRefs",type:"InputSet",isMany:!0,isReference:!0},{name:"optionalOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"whileExecutingOutputRefs",type:"DataOutput",isMany:!0,isReference:!0}]},{name:"Property",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"DataInputAssociation",superClass:["DataAssociation"]},{name:"DataOutputAssociation",superClass:["DataAssociation"]},{name:"InputOutputSpecification",superClass:["BaseElement"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"inputSets",type:"InputSet",isMany:!0},{name:"outputSets",type:"OutputSet",isMany:!0}]},{name:"DataObject",superClass:["FlowElement","ItemAwareElement"],properties:[{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"}]},{name:"InputOutputBinding",properties:[{name:"inputDataRef",type:"InputSet",isAttr:!0,isReference:!0},{name:"outputDataRef",type:"OutputSet",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"Assignment",superClass:["BaseElement"],properties:[{name:"from",type:"Expression",xml:{serialize:"xsi:type"}},{name:"to",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"DataStore",superClass:["RootElement","ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"capacity",isAttr:!0,type:"Integer"},{name:"isUnlimited",default:!0,isAttr:!0,type:"Boolean"}]},{name:"DataStoreReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataStoreRef",type:"DataStore",isAttr:!0,isReference:!0}]},{name:"DataObjectReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataObjectRef",type:"DataObject",isAttr:!0,isReference:!0}]},{name:"ConversationLink",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ConversationAssociation",superClass:["BaseElement"],properties:[{name:"innerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0},{name:"outerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0}]},{name:"CallConversation",superClass:["ConversationNode"],properties:[{name:"calledCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"Conversation",superClass:["ConversationNode"]},{name:"SubConversation",superClass:["ConversationNode"],properties:[{name:"conversationNodes",type:"ConversationNode",isMany:!0}]},{name:"ConversationNode",isAbstract:!0,superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"messageFlowRefs",type:"MessageFlow",isMany:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0}]},{name:"GlobalConversation",superClass:["Collaboration"]},{name:"PartnerEntity",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"PartnerRole",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"CorrelationProperty",superClass:["RootElement"],properties:[{name:"correlationPropertyRetrievalExpression",type:"CorrelationPropertyRetrievalExpression",isMany:!0},{name:"name",isAttr:!0,type:"String"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Error",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"errorCode",isAttr:!0,type:"String"}]},{name:"CorrelationKey",superClass:["BaseElement"],properties:[{name:"correlationPropertyRef",type:"CorrelationProperty",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Expression",superClass:["BaseElement"],isAbstract:!1,properties:[{name:"body",isBody:!0,type:"String"}]},{name:"FormalExpression",superClass:["Expression"],properties:[{name:"language",isAttr:!0,type:"String"},{name:"evaluatesToTypeRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Message",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"itemRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"ItemDefinition",superClass:["RootElement"],properties:[{name:"itemKind",type:"ItemKind",isAttr:!0},{name:"structureRef",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"import",type:"Import",isAttr:!0,isReference:!0}]},{name:"FlowElement",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"categoryValueRef",type:"CategoryValue",isMany:!0,isReference:!0}]},{name:"SequenceFlow",superClass:["FlowElement"],properties:[{name:"isImmediate",isAttr:!0,type:"Boolean"},{name:"conditionExpression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"sourceRef",type:"FlowNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"FlowNode",isAttr:!0,isReference:!0}]},{name:"FlowElementsContainer",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"laneSets",type:"LaneSet",isMany:!0},{name:"flowElements",type:"FlowElement",isMany:!0}]},{name:"CallableElement",isAbstract:!0,superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"supportedInterfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"ioBinding",type:"InputOutputBinding",isMany:!0,xml:{serialize:"property"}}]},{name:"FlowNode",isAbstract:!0,superClass:["FlowElement"],properties:[{name:"incoming",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"outgoing",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"lanes",type:"Lane",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"CorrelationPropertyRetrievalExpression",superClass:["BaseElement"],properties:[{name:"messagePath",type:"FormalExpression"},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"CorrelationPropertyBinding",superClass:["BaseElement"],properties:[{name:"dataPath",type:"FormalExpression"},{name:"correlationPropertyRef",type:"CorrelationProperty",isAttr:!0,isReference:!0}]},{name:"Resource",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"resourceParameters",type:"ResourceParameter",isMany:!0}]},{name:"ResourceParameter",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isRequired",isAttr:!0,type:"Boolean"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"CorrelationSubscription",superClass:["BaseElement"],properties:[{name:"correlationKeyRef",type:"CorrelationKey",isAttr:!0,isReference:!0},{name:"correlationPropertyBinding",type:"CorrelationPropertyBinding",isMany:!0}]},{name:"MessageFlow",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"MessageFlowAssociation",superClass:["BaseElement"],properties:[{name:"innerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0},{name:"outerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0}]},{name:"InteractionNode",isAbstract:!0,properties:[{name:"incomingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0},{name:"outgoingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"Participant",superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"interfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"participantMultiplicity",type:"ParticipantMultiplicity"},{name:"endPointRefs",type:"EndPoint",isMany:!0,isReference:!0},{name:"processRef",type:"Process",isAttr:!0,isReference:!0}]},{name:"ParticipantAssociation",superClass:["BaseElement"],properties:[{name:"innerParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"outerParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"ParticipantMultiplicity",properties:[{name:"minimum",default:0,isAttr:!0,type:"Integer"},{name:"maximum",default:1,isAttr:!0,type:"Integer"}],superClass:["BaseElement"]},{name:"Collaboration",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"participants",type:"Participant",isMany:!0},{name:"messageFlows",type:"MessageFlow",isMany:!0},{name:"artifacts",type:"Artifact",isMany:!0},{name:"conversations",type:"ConversationNode",isMany:!0},{name:"conversationAssociations",type:"ConversationAssociation"},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0},{name:"messageFlowAssociations",type:"MessageFlowAssociation",isMany:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"choreographyRef",type:"Choreography",isMany:!0,isReference:!0},{name:"conversationLinks",type:"ConversationLink",isMany:!0}]},{name:"ChoreographyActivity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"loopType",type:"ChoreographyLoopType",default:"None",isAttr:!0}]},{name:"CallChoreography",superClass:["ChoreographyActivity"],properties:[{name:"calledChoreographyRef",type:"Choreography",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"SubChoreography",superClass:["ChoreographyActivity","FlowElementsContainer"],properties:[{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"ChoreographyTask",superClass:["ChoreographyActivity"],properties:[{name:"messageFlowRef",type:"MessageFlow",isMany:!0,isReference:!0}]},{name:"Choreography",superClass:["Collaboration","FlowElementsContainer"]},{name:"GlobalChoreographyTask",superClass:["Choreography"],properties:[{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"TextAnnotation",superClass:["Artifact"],properties:[{name:"text",type:"String"},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Group",superClass:["Artifact"],properties:[{name:"categoryValueRef",type:"CategoryValue",isAttr:!0,isReference:!0}]},{name:"Association",superClass:["Artifact"],properties:[{name:"associationDirection",type:"AssociationDirection",isAttr:!0},{name:"sourceRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"targetRef",type:"BaseElement",isAttr:!0,isReference:!0}]},{name:"Category",superClass:["RootElement"],properties:[{name:"categoryValue",type:"CategoryValue",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Artifact",isAbstract:!0,superClass:["BaseElement"]},{name:"CategoryValue",superClass:["BaseElement"],properties:[{name:"categorizedFlowElements",type:"FlowElement",isMany:!0,isVirtual:!0,isReference:!0},{name:"value",isAttr:!0,type:"String"}]},{name:"Activity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"isForCompensation",default:!1,isAttr:!0,type:"Boolean"},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"boundaryEventRefs",type:"BoundaryEvent",isMany:!0,isReference:!0},{name:"properties",type:"Property",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"startQuantity",default:1,isAttr:!0,type:"Integer"},{name:"resources",type:"ResourceRole",isMany:!0},{name:"completionQuantity",default:1,isAttr:!0,type:"Integer"},{name:"loopCharacteristics",type:"LoopCharacteristics"}]},{name:"ServiceTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"SubProcess",superClass:["Activity","FlowElementsContainer","InteractionNode"],properties:[{name:"triggeredByEvent",default:!1,isAttr:!0,type:"Boolean"},{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"LoopCharacteristics",isAbstract:!0,superClass:["BaseElement"]},{name:"MultiInstanceLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"isSequential",default:!1,isAttr:!0,type:"Boolean"},{name:"behavior",type:"MultiInstanceBehavior",default:"All",isAttr:!0},{name:"loopCardinality",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopDataInputRef",type:"ItemAwareElement",isReference:!0},{name:"loopDataOutputRef",type:"ItemAwareElement",isReference:!0},{name:"inputDataItem",type:"DataInput",xml:{serialize:"property"}},{name:"outputDataItem",type:"DataOutput",xml:{serialize:"property"}},{name:"complexBehaviorDefinition",type:"ComplexBehaviorDefinition",isMany:!0},{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"oneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0},{name:"noneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0}]},{name:"StandardLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"testBefore",default:!1,isAttr:!0,type:"Boolean"},{name:"loopCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopMaximum",type:"Integer",isAttr:!0}]},{name:"CallActivity",superClass:["Activity","InteractionNode"],properties:[{name:"calledElement",type:"String",isAttr:!0}]},{name:"Task",superClass:["Activity","InteractionNode"]},{name:"SendTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ReceiveTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ScriptTask",superClass:["Task"],properties:[{name:"scriptFormat",isAttr:!0,type:"String"},{name:"script",type:"String"}]},{name:"BusinessRuleTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"AdHocSubProcess",superClass:["SubProcess"],properties:[{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"ordering",type:"AdHocOrdering",isAttr:!0},{name:"cancelRemainingInstances",default:!0,isAttr:!0,type:"Boolean"}]},{name:"Transaction",superClass:["SubProcess"],properties:[{name:"protocol",isAttr:!0,type:"String"},{name:"method",isAttr:!0,type:"String"}]},{name:"GlobalScriptTask",superClass:["GlobalTask"],properties:[{name:"scriptLanguage",isAttr:!0,type:"String"},{name:"script",isAttr:!0,type:"String"}]},{name:"GlobalBusinessRuleTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"ComplexBehaviorDefinition",superClass:["BaseElement"],properties:[{name:"condition",type:"FormalExpression"},{name:"event",type:"ImplicitThrowEvent"}]},{name:"ResourceRole",superClass:["BaseElement"],properties:[{name:"resourceRef",type:"Resource",isReference:!0},{name:"resourceParameterBindings",type:"ResourceParameterBinding",isMany:!0},{name:"resourceAssignmentExpression",type:"ResourceAssignmentExpression"},{name:"name",isAttr:!0,type:"String"}]},{name:"ResourceParameterBinding",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"parameterRef",type:"ResourceParameter",isAttr:!0,isReference:!0}],superClass:["BaseElement"]},{name:"ResourceAssignmentExpression",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}}],superClass:["BaseElement"]},{name:"Import",properties:[{name:"importType",isAttr:!0,type:"String"},{name:"location",isAttr:!0,type:"String"},{name:"namespace",isAttr:!0,type:"String"}]},{name:"Definitions",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"targetNamespace",isAttr:!0,type:"String"},{name:"expressionLanguage",default:"http://www.w3.org/1999/XPath",isAttr:!0,type:"String"},{name:"typeLanguage",default:"http://www.w3.org/2001/XMLSchema",isAttr:!0,type:"String"},{name:"imports",type:"Import",isMany:!0},{name:"extensions",type:"Extension",isMany:!0},{name:"rootElements",type:"RootElement",isMany:!0},{name:"diagrams",isMany:!0,type:"bpmndi:BPMNDiagram"},{name:"exporter",isAttr:!0,type:"String"},{name:"relationships",type:"Relationship",isMany:!0},{name:"exporterVersion",isAttr:!0,type:"String"}]}],Ul=[{name:"ProcessType",literalValues:[{name:"None"},{name:"Public"},{name:"Private"}]},{name:"GatewayDirection",literalValues:[{name:"Unspecified"},{name:"Converging"},{name:"Diverging"},{name:"Mixed"}]},{name:"EventBasedGatewayType",literalValues:[{name:"Parallel"},{name:"Exclusive"}]},{name:"RelationshipDirection",literalValues:[{name:"None"},{name:"Forward"},{name:"Backward"},{name:"Both"}]},{name:"ItemKind",literalValues:[{name:"Physical"},{name:"Information"}]},{name:"ChoreographyLoopType",literalValues:[{name:"None"},{name:"Standard"},{name:"MultiInstanceSequential"},{name:"MultiInstanceParallel"}]},{name:"AssociationDirection",literalValues:[{name:"None"},{name:"One"},{name:"Both"}]},{name:"MultiInstanceBehavior",literalValues:[{name:"None"},{name:"One"},{name:"All"},{name:"Complex"}]},{name:"AdHocOrdering",literalValues:[{name:"Parallel"},{name:"Sequential"}]}],Yl={tagAlias:"lowerCase",typePrefix:"t"},Kl={name:Vl,uri:jl,prefix:Wl,associations:zl,types:Hl,enumerations:Ul,xml:Yl},ql="BPMNDI",Gl="http://www.omg.org/spec/BPMN/20100524/DI",Xl="bpmndi",Zl=[{name:"BPMNDiagram",properties:[{name:"plane",type:"BPMNPlane",redefines:"di:Diagram#rootElement"},{name:"labelStyle",type:"BPMNLabelStyle",isMany:!0}],superClass:["di:Diagram"]},{name:"BPMNPlane",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"}],superClass:["di:Plane"]},{name:"BPMNShape",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"isHorizontal",isAttr:!0,type:"Boolean"},{name:"isExpanded",isAttr:!0,type:"Boolean"},{name:"isMarkerVisible",isAttr:!0,type:"Boolean"},{name:"label",type:"BPMNLabel"},{name:"isMessageVisible",isAttr:!0,type:"Boolean"},{name:"participantBandKind",type:"ParticipantBandKind",isAttr:!0},{name:"choreographyActivityShape",type:"BPMNShape",isAttr:!0,isReference:!0}],superClass:["di:LabeledShape"]},{name:"BPMNEdge",properties:[{name:"label",type:"BPMNLabel"},{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"sourceElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#source"},{name:"targetElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#target"},{name:"messageVisibleKind",type:"MessageVisibleKind",isAttr:!0,default:"initiating"}],superClass:["di:LabeledEdge"]},{name:"BPMNLabel",properties:[{name:"labelStyle",type:"BPMNLabelStyle",isAttr:!0,isReference:!0,redefines:"di:DiagramElement#style"}],superClass:["di:Label"]},{name:"BPMNLabelStyle",properties:[{name:"font",type:"dc:Font"}],superClass:["di:Style"]}],Ql=[{name:"ParticipantBandKind",literalValues:[{name:"top_initiating"},{name:"middle_initiating"},{name:"bottom_initiating"},{name:"top_non_initiating"},{name:"middle_non_initiating"},{name:"bottom_non_initiating"}]},{name:"MessageVisibleKind",literalValues:[{name:"initiating"},{name:"non_initiating"}]}],Jl=[],ec={name:ql,uri:Gl,prefix:Xl,types:Zl,enumerations:Ql,associations:Jl},tc="DC",nc="http://www.omg.org/spec/DD/20100524/DC",rc="dc",ic=[{name:"Boolean"},{name:"Integer"},{name:"Real"},{name:"String"},{name:"Font",properties:[{name:"name",type:"String",isAttr:!0},{name:"size",type:"Real",isAttr:!0},{name:"isBold",type:"Boolean",isAttr:!0},{name:"isItalic",type:"Boolean",isAttr:!0},{name:"isUnderline",type:"Boolean",isAttr:!0},{name:"isStrikeThrough",type:"Boolean",isAttr:!0}]},{name:"Point",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0}]},{name:"Bounds",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0},{name:"width",type:"Real",isAttr:!0},{name:"height",type:"Real",isAttr:!0}]}],ac=[],oc={name:tc,uri:nc,prefix:rc,types:ic,associations:ac},sc="DI",uc="http://www.omg.org/spec/DD/20100524/DI",lc="di",cc=[{name:"DiagramElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"extension",type:"Extension"},{name:"owningDiagram",type:"Diagram",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"owningElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"modelElement",isReadOnly:!0,isVirtual:!0,isReference:!0,type:"Element"},{name:"style",type:"Style",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"ownedElement",type:"DiagramElement",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Node",isAbstract:!0,superClass:["DiagramElement"]},{name:"Edge",isAbstract:!0,superClass:["DiagramElement"],properties:[{name:"source",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"target",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"waypoint",isUnique:!1,isMany:!0,type:"dc:Point",xml:{serialize:"xsi:type"}}]},{name:"Diagram",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"rootElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0},{name:"name",isAttr:!0,type:"String"},{name:"documentation",isAttr:!0,type:"String"},{name:"resolution",isAttr:!0,type:"Real"},{name:"ownedStyle",type:"Style",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Shape",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Plane",isAbstract:!0,superClass:["Node"],properties:[{name:"planeElement",type:"DiagramElement",subsettedProperty:"DiagramElement-ownedElement",isMany:!0}]},{name:"LabeledEdge",isAbstract:!0,superClass:["Edge"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"LabeledShape",isAbstract:!0,superClass:["Shape"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"Label",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Style",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"}]},{name:"Extension",properties:[{name:"values",isMany:!0,type:"Element"}]}],fc=[],pc={tagAlias:"lowerCase"},hc={name:sc,uri:uc,prefix:lc,types:cc,associations:fc,xml:pc},dc="bpmn.io colors for BPMN",mc="http://bpmn.io/schema/bpmn/biocolor/1.0",yc="bioc",gc=[{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]}],vc=[],Ec=[],wc={name:dc,uri:mc,prefix:yc,types:gc,enumerations:vc,associations:Ec},xc="BPMN in Color",bc="http://www.omg.org/spec/BPMN/non-normative/color/1.0",_c="color",Sc=[{name:"ColoredLabel",extends:["bpmndi:BPMNLabel"],properties:[{name:"color",isAttr:!0,type:"String"}]},{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"background-color",isAttr:!0,type:"String"},{name:"border-color",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"border-color",isAttr:!0,type:"String"}]}],Ac=[],Rc=[],Cc={name:xc,uri:bc,prefix:_c,types:Sc,enumerations:Ac,associations:Rc},Pc={bpmn:Kl,bpmndi:ec,dc:oc,di:hc,bioc:wc,color:Cc};function kc(e,t){var n=H({},Pc,e);return new Wn(n,t)}var Mc="Tried to access di from the businessObject. The di is available through the diagram element only. For more information, see https://github.com/bpmn-io/bpmn-js/issues/1472";function Tc(e){At(e,"di")||Object.defineProperty(e,"di",{enumerable:!1,get:function(){throw new Error(Mc)}})}function Ee(e,t){return e.$instanceOf(t)}function Dc(e){return Fe(e.rootElements,function(t){return Ee(t,"bpmn:Process")||Ee(t,"bpmn:Collaboration")})}function Oc(e){var t={},n=[],r={};function i(A,P){return function(F){A(F,P)}}function a(A){t[A.id]=A}function o(A){return t[A.id]}function l(A,P){var F=A.gfx;if(F)throw new Error(`already rendered ${ye(A)}`);return e.element(A,r[A.id],P)}function c(A,P){return e.root(A,r[A.id],P)}function p(A,P){try{var F=r[A.id]&&l(A,P);return a(A),F}catch(te){d(te.message,{element:A,error:te}),console.error(`failed to import ${ye(A)}`,te)}}function d(A,P){e.error(A,P)}var v=this.registerDi=function(P){var F=P.bpmnElement;F?r[F.id]?d(`multiple DI elements defined for ${ye(F)}`,{element:F}):(r[F.id]=P,Tc(F)):d(`no bpmnElement referenced in ${ye(P)}`,{element:P})};function b(A){g(A.plane)}function g(A){v(A),L(A.planeElement,E)}function E(A){v(A)}this.handleDefinitions=function(P,F){var te=P.diagrams;if(F&&te.indexOf(F)===-1)throw new Error("diagram not part of <bpmn:Definitions />");if(!F&&te&&te.length&&(F=te[0]),!F)throw new Error("no diagram to display");r={},b(F);var f=F.plane;if(!f)throw new Error(`no plane for ${ye(F)}`);var s=f.bpmnElement;if(!s)if(s=Dc(P),s)d(`correcting missing bpmnElement on ${ye(f)} to ${ye(s)}`),f.bpmnElement=s,v(f);else throw new Error("no process or collaboration to display");var u=c(s,f);if(Ee(s,"bpmn:Process")||Ee(s,"bpmn:SubProcess"))T(s,u);else if(Ee(s,"bpmn:Collaboration"))oe(s,u),z(P.rootElements,u);else throw new Error(`unsupported bpmnElement for ${ye(f)}: ${ye(s)}`);R(n)};var R=this.handleDeferred=function(){for(var P;n.length;)P=n.shift(),P()};function T(A,P){J(A,P),M(A.ioSpecification,P),w(A.artifacts,P),a(A)}function z(A,P){var F=_t(A,function(te){return!o(te)&&Ee(te,"bpmn:Process")&&te.laneSets});F.forEach(i(T,P))}function W(A,P){p(A,P)}function _(A,P){L(A,i(W,P))}function y(A,P){p(A,P)}function x(A,P){p(A,P)}function C(A,P){p(A,P)}function N(A,P){p(A,P)}function w(A,P){L(A,function(F){Ee(F,"bpmn:Association")?n.push(function(){N(F,P)}):N(F,P)})}function M(A,P){A&&(L(A.dataInputs,i(x,P)),L(A.dataOutputs,i(C,P)))}var k=this.handleSubProcess=function(P,F){J(P,F),w(P.artifacts,F)};function I(A,P){var F=p(A,P);Ee(A,"bpmn:SubProcess")&&k(A,F||P),Ee(A,"bpmn:Activity")&&M(A.ioSpecification,P),n.push(function(){L(A.dataInputAssociations,i(y,P)),L(A.dataOutputAssociations,i(y,P))})}function B(A,P){p(A,P)}function V(A,P){p(A,P)}function Z(A,P){n.push(function(){var F=p(A,P);A.childLaneSet&&Oe(A.childLaneSet,F||P),de(A)})}function Oe(A,P){L(A.lanes,i(Z,P))}function ae(A,P){L(A,i(Oe,P))}function J(A,P){xe(A.flowElements,P),A.laneSets&&ae(A.laneSets,P)}function xe(A,P){L(A,function(F){Ee(F,"bpmn:SequenceFlow")?n.push(function(){B(F,P)}):Ee(F,"bpmn:BoundaryEvent")?n.unshift(function(){I(F,P)}):Ee(F,"bpmn:FlowNode")?I(F,P):Ee(F,"bpmn:DataObject")||(Ee(F,"bpmn:DataStoreReference")||Ee(F,"bpmn:DataObjectReference")?V(F,P):d(`unrecognized flowElement ${ye(F)} in context ${ye(P&&P.businessObject)}`,{element:F,context:P}))})}function be(A,P){var F=p(A,P),te=A.processRef;te&&T(te,F||P)}function oe(A,P){L(A.participants,i(be,P)),w(A.artifacts,P),n.push(function(){_(A.messageFlows,P)})}function de(A){L(A.flowNodeRef,function(P){var F=P.get("lanes");F&&F.push(A)})}}function Nc(e,t,n){var r,i,a,o,l=[];function c(p,d){var v={root:function(R,T){return r.add(R,T)},element:function(R,T,z){return r.add(R,T,z)},error:function(R,T){l.push({message:R,context:T})}},b=new Oc(v);d=d||p.diagrams&&p.diagrams[0];var g=Bc(p,d);if(!g)throw new Error("no diagram to display");L(g,function(R){b.handleDefinitions(p,R)});var E=d.plane.bpmnElement.id;a.setRootElement(a.findRoot(E+"_plane")||a.findRoot(E))}return new Promise(function(p,d){try{return r=e.get("bpmnImporter"),i=e.get("eventBus"),a=e.get("canvas"),i.fire("import.render.start",{definitions:t}),c(t,n),i.fire("import.render.complete",{error:o,warnings:l}),p({warnings:l})}catch(v){return v.warnings=l,d(v)}})}function Bc(e,t){if(!(!t||!t.plane)){var n=t.plane.bpmnElement,r=n;!D(n,"bpmn:Process")&&!D(n,"bpmn:Collaboration")&&(r=Lc(n));var i;D(r,"bpmn:Collaboration")?i=r:i=Fe(e.rootElements,function(p){if(D(p,"bpmn:Collaboration"))return Fe(p.participants,function(d){return d.processRef===r})});var a=[r];i&&(a=On(i.participants,function(p){return p.processRef}),a.push(i));var o=Pa(a),l=[t],c=[n];return L(e.diagrams,function(p){if(p.plane){var d=p.plane.bpmnElement;o.indexOf(d)!==-1&&c.indexOf(d)===-1&&(l.push(p),c.push(d))}}),l}}function Pa(e){var t=[];return L(e,function(n){n&&(t.push(n),t=t.concat(Pa(n.flowElements)))}),t}function Lc(e){for(var t=e;t;){if(D(t,"bpmn:Process"))return t;t=t.$parent}}var Ic='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.02 5.57" width="53" height="21"><path fill="currentColor" d="M1.88.92v.14c0 .41-.13.68-.4.8.33.14.46.44.46.86v.33c0 .61-.33.95-.95.95H0V0h.95c.65 0 .93.3.93.92zM.63.57v1.06h.24c.24 0 .38-.1.38-.43V.98c0-.28-.1-.4-.32-.4zm0 1.63v1.22h.36c.2 0 .32-.1.32-.39v-.35c0-.37-.12-.48-.4-.48H.63zM4.18.99v.52c0 .64-.31.98-.94.98h-.3V4h-.62V0h.92c.63 0 .94.35.94.99zM2.94.57v1.35h.3c.2 0 .3-.09.3-.37v-.6c0-.29-.1-.38-.3-.38h-.3zm2.89 2.27L6.25 0h.88v4h-.6V1.12L6.1 3.99h-.6l-.46-2.82v2.82h-.55V0h.87zM8.14 1.1V4h-.56V0h.79L9 2.4V0h.56v4h-.64zm2.49 2.29v.6h-.6v-.6zM12.12 1c0-.63.33-1 .95-1 .61 0 .95.37.95 1v2.04c0 .64-.34 1-.95 1-.62 0-.95-.37-.95-1zm.62 2.08c0 .28.13.39.33.39s.32-.1.32-.4V.98c0-.29-.12-.4-.32-.4s-.33.11-.33.4z"/><path fill="currentColor" d="M0 4.53h14.02v1.04H0zM11.08 0h.63v.62h-.63zm.63 4V1h-.63v2.98z"/></svg>',ka=Ic,Ma={verticalAlign:"middle"},Ta={color:"#404040"},Fc={zIndex:"1001",position:"fixed",top:"0",left:"0",right:"0",bottom:"0"},$c={width:"100%",height:"100%",background:"rgba(40,40,40,0.2)"},Vc={position:"absolute",left:"50%",top:"40%",transform:"translate(-50%)",width:"260px",padding:"10px",background:"white",boxShadow:"0 1px 4px rgba(0,0,0,0.3)",fontFamily:"Helvetica, Arial, sans-serif",fontSize:"14px",display:"flex",lineHeight:"1.3"},jc='<div class="bjs-powered-by-lightbox"><div class="backdrop"></div><div class="notice"><a href="https://bpmn.io" target="_blank" rel="noopener" class="link">'+ka+'</a><span>Web-based tooling for BPMN, DMN and forms powered by <a href="https://bpmn.io" target="_blank" rel="noopener">bpmn.io</a>.</span></div></div>',Ue;function Wc(){Ue=Ge(jc),Re(Ue,Fc),Re(je("svg",Ue),Ma),Re(je(".backdrop",Ue),$c),Re(je(".notice",Ue),Vc),Re(je(".link",Ue),Ta,{margin:"15px 20px 15px 10px",alignSelf:"center"})}function zc(){Ue||(Wc(),nr.bind(Ue,".backdrop","click",function(e){document.body.removeChild(Ue)})),document.body.appendChild(Ue)}function fe(e){e=H({},Uc,e),this._moddle=this._createModdle(e),this._container=this._createContainer(e),Kc(this._container),this._init(this._container,this._moddle,e)}Xe(fe,Et);fe.prototype.importXML=async function(t,n){const r=this;function i(o){return r.get("eventBus").createEvent(o)}let a=[];try{t=this._emit("import.parse.start",{xml:t})||t;let o;try{o=await this._moddle.fromXML(t,"bpmn:Definitions")}catch(b){throw this._emit("import.parse.complete",{error:b}),b}let l=o.rootElement;const c=o.references,p=o.warnings,d=o.elementsById;a=a.concat(p),l=this._emit("import.parse.complete",i({error:null,definitions:l,elementsById:d,references:c,warnings:a}))||l;const v=await this.importDefinitions(l,n);return a=a.concat(v.warnings),this._emit("import.done",{error:null,warnings:a}),{warnings:a}}catch(o){let l=o;throw a=a.concat(l.warnings||[]),_n(l,a),l=Hc(l),this._emit("import.done",{error:l,warnings:l.warnings}),l}};fe.prototype.importDefinitions=async function(t,n){return this._setDefinitions(t),{warnings:(await this.open(n)).warnings}};fe.prototype.open=async function(t){const n=this._definitions;let r=t;if(!n){const a=new Error("no XML imported");throw _n(a,[]),a}if(typeof t=="string"&&(r=Yc(n,t),!r)){const a=new Error("BPMNDiagram <"+t+"> not found");throw _n(a,[]),a}try{this.clear()}catch(a){throw _n(a,[]),a}const{warnings:i}=await Nc(this,n,r);return{warnings:i}};fe.prototype.saveXML=async function(t){t=t||{};let n=this._definitions,r,i;try{if(!n)throw new Error("no definitions loaded");n=this._emit("saveXML.start",{definitions:n})||n,i=(await this._moddle.toXML(n,t)).xml,i=this._emit("saveXML.serialized",{xml:i})||i}catch(o){r=o}const a=r?{error:r}:{xml:i};if(this._emit("saveXML.done",a),r)throw r;return a};fe.prototype.saveSVG=async function(){this._emit("saveSVG.start");let t,n;try{const r=this.get("canvas"),i=r.getActiveLayer(),a=je(":scope > defs",r._svg),o=jr(i),l=a?"<defs>"+jr(a)+"</defs>":"",c=i.getBBox();t=`<?xml version="1.0" encoding="utf-8"?>
<!-- created with bpmn-js / http://bpmn.io -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="`+c.width+'" height="'+c.height+'" viewBox="'+c.x+" "+c.y+" "+c.width+" "+c.height+'" version="1.1">'+l+o+"</svg>"}catch(r){n=r}if(this._emit("saveSVG.done",{error:n,svg:t}),n)throw n;return{svg:t}};fe.prototype._setDefinitions=function(e){this._definitions=e};fe.prototype.getModules=function(){return this._modules};fe.prototype.clear=function(){this.getDefinitions()&&Et.prototype.clear.call(this)};fe.prototype.destroy=function(){Et.prototype.destroy.call(this),Pn(this._container)};fe.prototype.on=function(e,t,n,r){return this.get("eventBus").on(e,t,n,r)};fe.prototype.off=function(e,t){this.get("eventBus").off(e,t)};fe.prototype.attachTo=function(e){if(!e)throw new Error("parentNode required");this.detach(),e.get&&e.constructor.prototype.jquery&&(e=e.get(0)),typeof e=="string"&&(e=je(e)),e.appendChild(this._container),this._emit("attach",{}),this.get("canvas").resized()};fe.prototype.getDefinitions=function(){return this._definitions};fe.prototype.detach=function(){const e=this._container,t=e.parentNode;t&&(this._emit("detach",{}),t.removeChild(e))};fe.prototype._init=function(e,t,n){const r=n.modules||this.getModules(n),i=n.additionalModules||[],a=[{bpmnjs:["value",this],moddle:["value",t]}],o=[].concat(a,r,i),l=H(Ja(n,["additionalModules"]),{canvas:H({},n.canvas,{container:e}),modules:o});Et.call(this,l),n&&n.container&&this.attachTo(n.container)};fe.prototype._emit=function(e,t){return this.get("eventBus").fire(e,t)};fe.prototype._createContainer=function(e){const t=Ge('<div class="bjs-container"></div>');return Re(t,{width:yi(e.width),height:yi(e.height),position:e.position}),t};fe.prototype._createModdle=function(e){const t=H({},this._moddleExtensions,e.moddleExtensions);return new kc(t)};fe.prototype._modules=[];function _n(e,t){return e.warnings=t,e}function Hc(e){const n=/unparsable content <([^>]+)> detected([\s\S]*)$/.exec(e.message);return n&&(e.message="unparsable content <"+n[1]+"> detected; this may indicate an invalid BPMN 2.0 diagram file"+n[2]),e}const Uc={width:"100%",height:"100%",position:"relative"};function yi(e){return e+(Ae(e)?"px":"")}function Yc(e,t){return t&&Fe(e.diagrams,function(n){return n.id===t})||null}function Kc(e){const n='<a href="http://bpmn.io" target="_blank" class="bjs-powered-by" title="Powered by bpmn.io" >'+ka+"</a>",r=Ge(n);Re(je("svg",r),Ma),Re(r,Ta,{position:"absolute",bottom:"15px",right:"15px",zIndex:"100"}),e.appendChild(r),ct.bind(r,"click",function(i){zc(),i.preventDefault()})}function zn(e){fe.call(this,e)}Xe(zn,fe);zn.prototype._modules=[Gs,du,xu,Hi,Pu,Ni];zn.prototype._moddleExtensions={};function Gf(e){return{x:e.x+e.width/2,y:e.y+e.height/2}}function gi(e,t){return{x:e.x-t.x,y:e.y-t.y}}function ur(e){return Math.log(e)/Math.log(10)}function Da(e,t){var n=ur(e.min),r=ur(e.max),i=Math.abs(n)+Math.abs(r);return i/t}function qc(e,t){return Math.max(e.min,Math.min(e.max,t))}var Gc=Math.sign||function(e){return e>=0?1:-1},Nr={min:.2,max:4},Oa=10,Xc=.1,Zc=.75;function Qe(e,t,n){e=e||{},this._enabled=!1,this._canvas=n,this._container=n._container,this._handleWheel=nt(this._handleWheel,this),this._totalDelta=0,this._scale=e.scale||Zc;var r=this;t.on("canvas.init",function(i){r._init(e.enabled!==!1)})}Qe.$inject=["config.zoomScroll","eventBus","canvas"];Qe.prototype.scroll=function(t){this._canvas.scroll(t)};Qe.prototype.reset=function(){this._canvas.zoom("fit-viewport")};Qe.prototype.zoom=function(t,n){var r=Da(Nr,Oa*2);this._totalDelta+=t,Math.abs(this._totalDelta)>Xc&&(this._zoom(t,n,r),this._totalDelta=0)};Qe.prototype._handleWheel=function(t){if(!yr(t.target,".djs-scrollable",!0)){var n=this._container;t.preventDefault();var r=t.ctrlKey||Qi()&&t.metaKey,i=t.shiftKey,a=-1*this._scale,o;if(r?a*=t.deltaMode===0?.02:.32:a*=t.deltaMode===0?1:16,r){var l=n.getBoundingClientRect(),c={x:t.clientX-l.left,y:t.clientY-l.top};o=Math.sqrt(Math.pow(t.deltaY,2)+Math.pow(t.deltaX,2))*Gc(t.deltaY)*a,this.zoom(o,c)}else i?o={dx:a*t.deltaY,dy:0}:o={dx:a*t.deltaX,dy:a*t.deltaY},this.scroll(o)}};Qe.prototype.stepZoom=function(t,n){var r=Da(Nr,Oa);this._zoom(t,n,r)};Qe.prototype._zoom=function(e,t,n){var r=this._canvas,i=e>0?1:-1,a=ur(r.zoom()),o=Math.round(a/n)*n;o+=n*i;var l=Math.pow(10,o);r.zoom(qc(Nr,l),t)};Qe.prototype.toggle=function(t){var n=this._container,r=this._handleWheel,i=this._enabled;return typeof t>"u"&&(t=!i),i!==t&&ct[t?"bind":"unbind"](n,"wheel",r,!1),this._enabled=t,t};Qe.prototype._init=function(e){this.toggle(e)};const Qc={__init__:["zoomScroll"],zoomScroll:["type",Qe]};var Jc=/^djs-cursor-.*$/;function Na(e){var t=en(document.body);t.removeMatching(Jc),e&&t.add("djs-cursor-"+e)}function ef(){Na(null)}var tf=5e3;function nf(e,t){t=t||"element.click";function n(){return!1}return e.once(t,tf,n),function(){e.off(t,n)}}var rf=15;function Ba(e,t){var n;e.on("element.mousedown",500,function(o){return a(o.originalEvent)});function r(o){var l=n.start,c=n.button,p=ii(o),d=gi(p,l);if(!n.dragging&&af(d)>rf&&(n.dragging=!0,c===0&&nf(e),Na("grab")),n.dragging){var v=n.last||n.start;d=gi(p,v),t.scroll({dx:d.x,dy:d.y}),n.last=p}o.preventDefault()}function i(o){ct.unbind(document,"mousemove",r),ct.unbind(document,"mouseup",i),n=null,ef()}function a(o){if(!yr(o.target,".djs-draggable")){var l=o.button;if(!(l>=2||o.ctrlKey||o.shiftKey||o.altKey))return n={button:l,start:ii(o)},ct.bind(document,"mousemove",r),ct.bind(document,"mouseup",i),!0}}this.isActive=function(){return!!n}}Ba.$inject=["eventBus","canvas"];function af(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}const of={__init__:["moveCanvas"],moveCanvas:["type",Ba]},sf={name:"bpmn-uengine-viewer",props:{url:{type:String},bpmn:{type:String},options:{type:Object},currentActivities:{type:Array},executionScopeActivities:{type:Object},selectedExecutionScope:{type:Object},taskStatus:{type:Object},adminMode:{type:Boolean,default:!1}},data:function(){return{diagramXML:null,openPanel:!1,bpmnViewer:null}},computed:{async getXML(){return await this.bpmnViewer.saveXML({format:!0,preamble:!0})}},mounted(){this.initializeViewer();var e=this,t=this.bpmnViewer.get("eventBus");t.on("import.render.complete",async function(n){let r=performance.now();var i=e.bpmnViewer.get("canvas"),a=e.bpmnViewer.get("elementRegistry"),o=a.filter(b=>b.type==="bpmn:Participant");if(o.length>1){var l=o[0],c=i.getAbsoluteBBox(l);i.viewbox({x:c.x-50,y:c.y-50,width:c.width+100,height:c.height+100})}else{i.zoom("fit-viewport");var p=i.viewbox();i.viewbox({x:p.x-50,y:p.y-50,width:p.width+100,height:p.height+100})}if(window.$mode=="ProcessGPT"&&e.currentActivities&&e.currentActivities.length>0&&e.currentActivities.forEach(b=>{b&&i.addMarker(b,"highlight")}),e.adminMode){var d=e.bpmnViewer.get("overlays");e.currentActivities&&e.currentActivities.length>0&&e.currentActivities.forEach(b=>{const E=e.bpmnViewer.get("elementRegistry").get(b);if(E&&E.type!="bpmn:SubProcess"&&E.type!="bpmn:CallActivity"){var R=$('<img src="/assets/images/icon/tdesign-rollback.svg" style="width: 20px; height: 20px;" alt="rollback">');R.click(function(T){e.$emit("rollback",E)}),b&&d.add(b,"note",{position:{bottom:10,right:0},html:R})}}),e.executionScopeActivities&&Object.keys(e.executionScopeActivities).length>0&&Object.keys(e.executionScopeActivities).forEach(b=>{let g=0;Object.keys(e.executionScopeActivities[b]).forEach(E=>{if(e.executionScopeActivities[b][E].parent){if(e.selectedExecutionScope){if(e.selectedExecutionScope.executionScope==e.executionScopeActivities[b][E].parent){let R=`<button class="v-btn v-btn--block v-btn--elevated v-theme--light rounded-xl  v-btn--variant-elevated">${E}</buton>
`,T=$(`<div >${R}</div>`);T.click(function(z){let W={executionScope:E,parent:e.executionScopeActivities[b][E].parent};e.$emit("selectedExecutionScope",W)}),d.add(b,"note",{position:{bottom:80-g*30,right:-10},html:T}),g=g+1}else if(e.selectedExecutionScope.parent==e.executionScopeActivities[b][E].parent){let R=`<button class="v-btn v-btn--block v-btn--elevated v-theme--light rounded-xl  v-btn--variant-elevated">${E}</buton>
`,T=$(`<div >${R}</div>`);T.click(function(z){let W={executionScope:E,parent:e.executionScopeActivities[b][E].parent};e.$emit("selectedExecutionScope",W)}),d.add(b,"note",{position:{bottom:80-g*30,right:-10},html:T}),g=g+1}}}else{let R=`<button class="v-btn v-btn--block v-btn--elevated v-theme--light rounded-xl  v-btn--variant-elevated">${E}</buton>
`,T=$(`<div >${R}</div>`);T.click(function(z){let W={executionScope:E,parent:null};e.$emit("selectedExecutionScope",W)}),d.add(b,"note",{position:{bottom:80-g*30,right:-10},html:T}),g=g+1}})})}t.on("element.dblclick",function(b){b.element.type.includes("CallActivity")&&e.$emit("openDefinition",b.element.businessObject)}),e.setTaskStatus(e.taskStatus);let v=performance.now();console.log(`initializeViewer Result Time :  ${v-r} ms`)}),this.url?this.fetchDiagram(this.url):this.bpmn?this.diagramXML=this.bpmn:this.diagramXML='<?xml version="1.0" encoding="UTF-8"?> <bpmn:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:uengine="http://uengine" id="Definitions_0bfky9r" targetNamespace="http://bpmn.io/schema/bpmn" exporter="bpmn-js (https://demo.bpmn.io)" exporterVersion="16.4.0"> <bpmn:process id="Process_1oscmbn" isExecutable="false"> <bpmn:extensionElements> <uengine:properties> </uengine:properties> </bpmn:extensionElements> </bpmn:process> <bpmndi:BPMNDiagram id="BPMNDiagram_1"> <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_1oscmbn" /> </bpmndi:BPMNDiagram> </bpmn:definitions>'},watch:{url(e){this.$emit("loading"),this.fetchDiagram(e)},sortByIdWithParticipantFirst(e){return e.sort((t,n)=>{const r=t.id.toLowerCase().startsWith("participant"),i=n.id.toLowerCase().startsWith("participant");return r&&!i?-1:!r&&i?1:t.id.localeCompare(n.id)})},diagramXML(e){this.bpmnViewer.importXML(e)},taskStatus(e){this.setTaskStatus(e)}},methods:{initializeViewer(){var e=this.$refs.container,t=this,n=Object.assign({container:e,keyboard:{bindTo:window}},t.options),r={...n,additionalModules:[...Array.isArray(n.additionalModules)?n.additionalModules:[],Qc,of]};t.bpmnViewer=new zn(r)},setTaskStatus(e){var n=this.bpmnViewer.get("canvas");e&&Object.keys(e).forEach(r=>{let i=e[r];i=="Completed"?n.addMarker(r,"completed"):i=="Running"?n.addMarker(r,"running"):i=="Stopped"?n.addMarker(r,"stopped"):i=="Cancelled"&&n.addMarker(r,"cancelled")})},fetchDiagram(e){var t=this;fetch(e).then(n=>n.text()).then(n=>{t.diagramXML=n}).catch(n=>{t.$emit("error",n)})}}},uf={ref:"container",class:"vue-bpmn-diagram-container"};function lf(e,t,n,r,i,a){return $a(),Va("div",uf,null,512)}const Xf=Fa(sf,[["render",lf]]),cf=1500,Ut=10,ff="#e53935",pf="#FFA500",Gn=0,Xn=1;class La extends Ze{constructor(t,n,r,i,a,o){var l;super(t,cf),this.bpmnRenderer=n,this.canvas=r,this.elementRegistry=a,this.graphicsFactory=o,this.invalidationList=((l=i.propertiesPanel)==null?void 0:l.invalidationList)||{},t.on("canvas.init",()=>{this.addTitleToDiagram(this.canvas)}),t.on("config.changed",c=>{this.updateConfig(c.config)})}updateConfig(t){var n;this.config=t,this.invalidationList=((n=t.propertiesPanel)==null?void 0:n.invalidationList)||{},this.redrawAllElements()}redrawAllElements(){this.elementRegistry.getAll().forEach(n=>{if(!n.labelTarget)try{const r=this.elementRegistry.getGraphics(n);this.graphicsFactory.update("shape",n,r)}catch{}})}addTitleToDiagram(t){const n=t._svg,r=Q("text");q(r,{x:"110",y:"110","font-size":"24px","font-family":"Arial, sans-serif","font-weight":"700","text-anchor":"middle",fill:"#535353"}),ie(n,r)}canRender(t){return Xt(t,["bpmn:Task","bpmn:Lane","bpmn:Participant","bpmn:SequenceFlow","bpmn:StartEvent","bpmn:EndEvent","bpmn2:outgoing","label","bpmn:Gateway","bpmn:SubProcess","bpmn:CallActivity"])&&!t.labelTarget}drawShape(t,n){const r=this.bpmnRenderer.drawShape(t,n);return D(n,"bpmn:Task")?this.drawCustomTask(t,r,n):D(n,"bpmn:StartEvent")?this.drawCustomStartEvent(t,r,n):D(n,"bpmn:EndEvent")?this.drawCustomEndEvent(t,r,n):D(n,"bpmn:Lane")?this.drawCustomLane(t,r,n):D(n,"bpmn:Participant")?this.drawCustomParticipant(t,r,n):D(n,"label")?this.drawCustomLabel(t,r,n):D(n,"bpmn:Gateway")?this.drawCustomGateway(t,r,n):D(n,"bpmn:SequenceFlow")?this.drawConnection(t,n):(D(n,"bpmn:SubProcess")||D(n,"bpmn:CallActivity"))&&this.drawCustomSubProcess(t,r,n),r}drawCustomLane(t,n,r){q(n,{color:"red"})}drawCustomLane(t,n,r){q(n,{stroke:"#4e72be",strokeWidth:"1",fill:"#f4f8fc"})}drawCustomParticipant(t,n,r){q(n,{stroke:"#4e72be",fill:"#f4f8fc"})}drawCustomTask(t,n,r){const i=n.width.baseVal.value,a=n.height.baseVal.value;var o="none",o=this.getValidateColor(this.validate(r.id));o==null&&(o="none");const l=gn(t,i,a,Ut,o);Je(l,t);const c=yn(t,i,a,Ut,"none","#fdf2d0",n.style);Je(c,t),Ye(n)}drawCustomStartEvent(t,n,r){var o=this.getValidateColor(this.validate(r.id));o==null&&(o="none");const l=gn(t,34,34,100,o);Je(l,t);const c=yn(t,34,34,100,"none","#f6c745");Je(c,t),Ye(n)}drawCustomEndEvent(t,n,r){var o=this.getValidateColor(this.validate(r.id));o==null&&(o="none");const l=gn(t,34,34,100,o);Je(l,t);const c=yn(t,34,34,100,"none","#f6c745");Je(c,t),Ye(n)}drawConnection(t,n){if(D(n,"bpmn:SequenceFlow")){var r=this.getValidateColor(this.validate(n.id));r==null&&(r="black");const a=hf(t,r),o={stroke:r,strokeWidth:"2",markerEnd:a};var i=this.bpmnRenderer.drawConnection(t,n,o);return i}return this.bpmnRenderer.drawConnection(t,n)}drawCustomGateway(t,n,r){const i=n.getBoundingClientRect().width,a=n.getBoundingClientRect().height,o=[{x:i/2,y:0},{x:i,y:a/2},{x:i/2,y:a},{x:0,y:a/2}].map(p=>`${p.x},${p.y}`).join(" "),l=df(t,o);mf(n,l);var c=this.getValidateColor(this.validate(r.id));c==null&&(c="#000000"),l.style.stroke=c,l.style.strokeWidth=c==="#000000"?"2":"5",c!="#000000"&&(l.style.strokeDasharray="10, 10"),Je(l,t),Ye(n)}drawCustomSubProcess(t,n,r){const i=n.width.baseVal.value,a=n.height.baseVal.value;var o=this.getValidateColor(this.validate(r.id));o==null&&(o="#000000");const l=gn(t,i,a,Ut,o);Je(l,t);const c=yn(t,i,a,Ut,"#000000","#ffffff");Je(c,t),Ye(n)}getShapePath(t){return D(t,"bpmn:Task")?Ci(t,Ut):this.bpmnRenderer.getShapePath(t)}validate(t){var n="info";return Object.keys(this.invalidationList).length>0&&Object.keys(this.invalidationList).includes(t)&&(this.invalidationList[t].forEach(r=>{r.errorLevel==Gn&&(n=Gn)}),this.invalidationList[t].forEach(r=>{r.errorLevel==Xn&&(n=Xn)})),n}getValidateColor(t){return t==Xn?ff:t==Gn?pf:null}}La.$inject=["eventBus","bpmnRenderer","canvas","config","elementRegistry","graphicsFactory"];function hf(e,t){const n=Q("marker"),r=Q("path");return q(n,{id:"custom-arrow",viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto"}),q(r,{d:"M 0 0 L 10 5 L 0 10 z",fill:t}),ie(n,r),ie(e,n),"url(#custom-arrow)"}function Ia(e){const t=Q("defs"),n=Q("filter"),r=Q("feDropShadow");return q(n,{id:"dropshadow",height:"130%"}),q(r,{dx:"1",dy:"1",stdDeviation:"3","flood-opacity":"0.3"}),ie(n,r),ie(t,n),ie(e,t),"url(#dropshadow)"}function yn(e,t,n,r,i,a){const o=Q("rect"),l=Ia(e);return q(o,{width:t,height:n,rx:r,ry:r,stroke:i,strokeWidth:2,fill:a||"#fff",filter:l}),ie(e,o),o}function gn(e,t,n,r,i){const a=Q("rect");return i!=="#000000"&&q(a,{"stroke-dasharray":"10, 10"}),q(a,{width:t,height:n,rx:r,ry:r,stroke:i=="#000000"?"none":i,strokeWidth:5,fill:"none"}),ie(e,a),a}function df(e,t){const n=Q("polygon"),r=Ia(e);return q(n,{points:t,filter:r}),ie(e,n),n}function mf(e,t){const n=e.attributes;for(let r=0;r<n.length;r++){const i=n[r];t.setAttribute(i.name,i.value)}}function Je(e,t,n){t.insertBefore(e,n||t.firstChild)}const Zf={__init__:["customBpmnRenderer"],customBpmnRenderer:["type",La]};export{ef as $,Pn as A,Xf as B,Ja as C,we as D,If as E,Fe as F,Nf as G,Nt as H,rt as I,Qt as J,ir as K,D as L,of as M,gf as N,Hi as O,wf as P,vi as Q,Br as R,mt as S,Vs as T,Qa as U,zn as V,hr as W,ii as X,gi as Y,Qc as Z,Uf as _,Xt as a,$f as a$,Fn as a0,Na as a1,nf as a2,Pu as a3,vr as a4,Is as a5,Q as a6,Ie as a7,ie as a8,q as a9,Gf as aA,ro as aB,An as aC,On as aD,bt as aE,Ff as aF,Yf as aG,Of as aH,cr as aI,br as aJ,Hf as aK,zf as aL,Wf as aM,bf as aN,_f as aO,Sf as aP,Af as aQ,Ha as aR,Gt as aS,At as aT,_u as aU,Ya as aV,Kf as aW,xf as aX,Vt as aY,Sn as aZ,Tc as a_,Df as aa,Mf as ab,Di as ac,Xo as ad,Ye as ae,tn as af,Go as ag,Lf as ah,As as ai,Wa as aj,Ke as ak,_i as al,Bf as am,mr as an,Pf as ao,el as ap,Rf as aq,se as ar,pr as as,to as at,Vu as au,$u as av,pt as aw,Ae as ax,wr as ay,En as az,Lr as b,qf as b0,Ua as b1,oo as b2,Cf as b3,vf as b4,Tf as b5,eu as b6,nt as b7,Kn as b8,Re as b9,Ef as ba,Zi as bb,Pi as bc,Vf as bd,Ni as be,Xa as bf,au as bg,kc as bh,Zf as c,fe as d,Xe as e,Ce as f,yr as g,ct as h,qe as i,et as j,H as k,L as l,kf as m,_t as n,ji as o,Ge as p,jo as q,je as r,Ka as s,jf as t,en as u,nr as v,lr as w,no as x,Au as y,Ot as z};
