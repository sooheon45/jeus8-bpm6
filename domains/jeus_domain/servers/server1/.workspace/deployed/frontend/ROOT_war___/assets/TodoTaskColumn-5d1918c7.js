import{b0 as _,b1 as b,b2 as E,b3 as ye,b4 as Q,b5 as pe,b6 as De,_ as A,B as ne,o as v,e as p,w as s,f as N,b as l,V as M,aS as ie,U as F,a as d,t as y,m as te,b7 as ae,W as Z,a_ as be,X as re,d as I,r as C,R as Ce,g as Ie,h as oe,a0 as Oe,S as xe,H as Ue,C as Se,c as q,A as fe,b8 as Me,i as Ee,F as We,K as Ye}from"./index-7b37f28a.js";import{D as $e}from"./DefaultForm-027b9cf9.js";import{_ as Ve}from"./DynamicForm-9e8c830e.js";function Pe(a,t){_(2,arguments);var e=b(a).getTime(),n=E(t);return new Date(e+n)}function Fe(a){return _(1,arguments),a instanceof Date||ye(a)==="object"&&Object.prototype.toString.call(a)==="[object Date]"}function Ne(a){if(_(1,arguments),!Fe(a)&&typeof a!="number")return!1;var t=b(a);return!isNaN(Number(t))}function He(a,t){_(2,arguments);var e=E(t);return Pe(a,-e)}var Be=864e5;function Le(a){_(1,arguments);var t=b(a),e=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var n=t.getTime(),r=e-n;return Math.floor(r/Be)+1}function R(a){_(1,arguments);var t=1,e=b(a),n=e.getUTCDay(),r=(n<t?7:0)+n-t;return e.setUTCDate(e.getUTCDate()-r),e.setUTCHours(0,0,0,0),e}function me(a){_(1,arguments);var t=b(a),e=t.getUTCFullYear(),n=new Date(0);n.setUTCFullYear(e+1,0,4),n.setUTCHours(0,0,0,0);var r=R(n),i=new Date(0);i.setUTCFullYear(e,0,4),i.setUTCHours(0,0,0,0);var o=R(i);return t.getTime()>=r.getTime()?e+1:t.getTime()>=o.getTime()?e:e-1}function qe(a){_(1,arguments);var t=me(a),e=new Date(0);e.setUTCFullYear(t,0,4),e.setUTCHours(0,0,0,0);var n=R(e);return n}var Re=6048e5;function Ge(a){_(1,arguments);var t=b(a),e=R(t).getTime()-qe(t).getTime();return Math.round(e/Re)+1}function G(a,t){var e,n,r,i,o,c,f,m;_(1,arguments);var g=Q(),h=E((e=(n=(r=(i=t==null?void 0:t.weekStartsOn)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(c=o.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&r!==void 0?r:g.weekStartsOn)!==null&&n!==void 0?n:(f=g.locale)===null||f===void 0||(m=f.options)===null||m===void 0?void 0:m.weekStartsOn)!==null&&e!==void 0?e:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var k=b(a),w=k.getUTCDay(),D=(w<h?7:0)+w-h;return k.setUTCDate(k.getUTCDate()-D),k.setUTCHours(0,0,0,0),k}function he(a,t){var e,n,r,i,o,c,f,m;_(1,arguments);var g=b(a),h=g.getUTCFullYear(),k=Q(),w=E((e=(n=(r=(i=t==null?void 0:t.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(c=o.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&r!==void 0?r:k.firstWeekContainsDate)!==null&&n!==void 0?n:(f=k.locale)===null||f===void 0||(m=f.options)===null||m===void 0?void 0:m.firstWeekContainsDate)!==null&&e!==void 0?e:1);if(!(w>=1&&w<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var D=new Date(0);D.setUTCFullYear(h+1,0,w),D.setUTCHours(0,0,0,0);var Y=G(D,t),U=new Date(0);U.setUTCFullYear(h,0,w),U.setUTCHours(0,0,0,0);var $=G(U,t);return g.getTime()>=Y.getTime()?h+1:g.getTime()>=$.getTime()?h:h-1}function Qe(a,t){var e,n,r,i,o,c,f,m;_(1,arguments);var g=Q(),h=E((e=(n=(r=(i=t==null?void 0:t.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(c=o.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&r!==void 0?r:g.firstWeekContainsDate)!==null&&n!==void 0?n:(f=g.locale)===null||f===void 0||(m=f.options)===null||m===void 0?void 0:m.firstWeekContainsDate)!==null&&e!==void 0?e:1),k=he(a,t),w=new Date(0);w.setUTCFullYear(k,0,h),w.setUTCHours(0,0,0,0);var D=G(w,t);return D}var Ae=6048e5;function Xe(a,t){_(1,arguments);var e=b(a),n=G(e,t).getTime()-Qe(e,t).getTime();return Math.round(n/Ae)+1}function u(a,t){for(var e=a<0?"-":"",n=Math.abs(a).toString();n.length<t;)n="0"+n;return e+n}var je={y:function(t,e){var n=t.getUTCFullYear(),r=n>0?n:1-n;return u(e==="yy"?r%100:r,e.length)},M:function(t,e){var n=t.getUTCMonth();return e==="M"?String(n+1):u(n+1,2)},d:function(t,e){return u(t.getUTCDate(),e.length)},a:function(t,e){var n=t.getUTCHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h:function(t,e){return u(t.getUTCHours()%12||12,e.length)},H:function(t,e){return u(t.getUTCHours(),e.length)},m:function(t,e){return u(t.getUTCMinutes(),e.length)},s:function(t,e){return u(t.getUTCSeconds(),e.length)},S:function(t,e){var n=e.length,r=t.getUTCMilliseconds(),i=Math.floor(r*Math.pow(10,n-3));return u(i,e.length)}};const x=je;var W={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Ke={G:function(t,e,n){var r=t.getUTCFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){var r=t.getUTCFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return x.y(t,e)},Y:function(t,e,n,r){var i=he(t,r),o=i>0?i:1-i;if(e==="YY"){var c=o%100;return u(c,2)}return e==="Yo"?n.ordinalNumber(o,{unit:"year"}):u(o,e.length)},R:function(t,e){var n=me(t);return u(n,e.length)},u:function(t,e){var n=t.getUTCFullYear();return u(n,e.length)},Q:function(t,e,n){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return u(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return u(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){var r=t.getUTCMonth();switch(e){case"M":case"MM":return x.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){var r=t.getUTCMonth();switch(e){case"L":return String(r+1);case"LL":return u(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){var i=Xe(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):u(i,e.length)},I:function(t,e,n){var r=Ge(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):u(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getUTCDate(),{unit:"date"}):x.d(t,e)},D:function(t,e,n){var r=Le(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):u(r,e.length)},E:function(t,e,n){var r=t.getUTCDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){var i=t.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return u(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){var i=t.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return u(o,e.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){var r=t.getUTCDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return u(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){var r=t.getUTCHours(),i=r/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){var r=t.getUTCHours(),i;switch(r===12?i=W.noon:r===0?i=W.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){var r=t.getUTCHours(),i;switch(r>=17?i=W.evening:r>=12?i=W.afternoon:r>=4?i=W.morning:i=W.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){var r=t.getUTCHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return x.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getUTCHours(),{unit:"hour"}):x.H(t,e)},K:function(t,e,n){var r=t.getUTCHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):u(r,e.length)},k:function(t,e,n){var r=t.getUTCHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):u(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):x.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):x.s(t,e)},S:function(t,e){return x.S(t,e)},X:function(t,e,n,r){var i=r._originalDate||t,o=i.getTimezoneOffset();if(o===0)return"Z";switch(e){case"X":return le(o);case"XXXX":case"XX":return S(o);case"XXXXX":case"XXX":default:return S(o,":")}},x:function(t,e,n,r){var i=r._originalDate||t,o=i.getTimezoneOffset();switch(e){case"x":return le(o);case"xxxx":case"xx":return S(o);case"xxxxx":case"xxx":default:return S(o,":")}},O:function(t,e,n,r){var i=r._originalDate||t,o=i.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+se(o,":");case"OOOO":default:return"GMT"+S(o,":")}},z:function(t,e,n,r){var i=r._originalDate||t,o=i.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+se(o,":");case"zzzz":default:return"GMT"+S(o,":")}},t:function(t,e,n,r){var i=r._originalDate||t,o=Math.floor(i.getTime()/1e3);return u(o,e.length)},T:function(t,e,n,r){var i=r._originalDate||t,o=i.getTime();return u(o,e.length)}};function se(a,t){var e=a>0?"-":"+",n=Math.abs(a),r=Math.floor(n/60),i=n%60;if(i===0)return e+String(r);var o=t||"";return e+String(r)+o+u(i,2)}function le(a,t){if(a%60===0){var e=a>0?"-":"+";return e+u(Math.abs(a)/60,2)}return S(a,t)}function S(a,t){var e=t||"",n=a>0?"-":"+",r=Math.abs(a),i=u(Math.floor(r/60),2),o=u(r%60,2);return n+i+e+o}const ze=Ke;var de=function(t,e){switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},ve=function(t,e){switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Je=function(t,e){var n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return de(t,e);var o;switch(r){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",de(r,e)).replace("{{time}}",ve(i,e))},Ze={p:ve,P:Je};const et=Ze;var tt=["D","DD"],at=["YY","YYYY"];function nt(a){return tt.indexOf(a)!==-1}function rt(a){return at.indexOf(a)!==-1}function ue(a,t,e){if(a==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(e,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(a==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(e,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(a==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(e,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(a==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(e,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var it=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ot=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,st=/^'([^]*?)'?$/,lt=/''/g,dt=/[a-zA-Z]/;function ce(a,t,e){var n,r,i,o,c,f,m,g,h,k,w,D,Y,U,$,X,j,K;_(2,arguments);var ge=String(t),V=Q(),P=(n=(r=e==null?void 0:e.locale)!==null&&r!==void 0?r:V.locale)!==null&&n!==void 0?n:pe,z=E((i=(o=(c=(f=e==null?void 0:e.firstWeekContainsDate)!==null&&f!==void 0?f:e==null||(m=e.locale)===null||m===void 0||(g=m.options)===null||g===void 0?void 0:g.firstWeekContainsDate)!==null&&c!==void 0?c:V.firstWeekContainsDate)!==null&&o!==void 0?o:(h=V.locale)===null||h===void 0||(k=h.options)===null||k===void 0?void 0:k.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(z>=1&&z<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var J=E((w=(D=(Y=(U=e==null?void 0:e.weekStartsOn)!==null&&U!==void 0?U:e==null||($=e.locale)===null||$===void 0||(X=$.options)===null||X===void 0?void 0:X.weekStartsOn)!==null&&Y!==void 0?Y:V.weekStartsOn)!==null&&D!==void 0?D:(j=V.locale)===null||j===void 0||(K=j.options)===null||K===void 0?void 0:K.weekStartsOn)!==null&&w!==void 0?w:0);if(!(J>=0&&J<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!P.localize)throw new RangeError("locale must contain localize property");if(!P.formatLong)throw new RangeError("locale must contain formatLong property");var H=b(a);if(!Ne(H))throw new RangeError("Invalid time value");var we=De(H),ke=He(H,we),_e={firstWeekContainsDate:z,weekStartsOn:J,locale:P,_originalDate:H},Te=ge.match(ot).map(function(T){var O=T[0];if(O==="p"||O==="P"){var B=et[O];return B(T,P.formatLong)}return T}).join("").match(it).map(function(T){if(T==="''")return"'";var O=T[0];if(O==="'")return ut(T);var B=ze[O];if(B)return!(e!=null&&e.useAdditionalWeekYearTokens)&&rt(T)&&ue(T,t,String(a)),!(e!=null&&e.useAdditionalDayOfYearTokens)&&nt(T)&&ue(T,t,String(a)),B(ke,T,P.localize,_e);if(O.match(dt))throw new RangeError("Format string contains an unescaped latin alphabet character `"+O+"`");return T}).join("");return Te}function ut(a){var t=a.match(st);return t?t[1].replace(lt,"'"):a}const ct={props:{type:String,task:Object,todolist:Array,isOpen:Boolean,instId:{type:String,default:""},defId:{type:String,default:""}},data:()=>({newTask:{taskId:"",endpoint:"",title:"",description:"",status:"TODO",startDate:null,endDate:null,dueDate:null,instId:"",defId:""},statusList:[{text:"할 일",value:"TODO"},{text:"진행 중",value:"IN_PROGRESS"},{text:"보류 중",value:"PENDING"},{text:"완료됨",value:"DONE"}]}),async created(){this.task&&this.task.taskId?this.newTask=this.task:this.newTask={taskId:"",endpoint:"",title:"",description:"",status:"TODO",startDate:null,endDate:null,dueDate:null,instId:this.instId,defId:this.defId}},methods:{close(){this.$emit("close")},async save(){const a=ne.createBackend();if(this.newTask.taskId||(this.newTask.taskId=this.uuid()),!this.newTask.endpoint){const t=localStorage.getItem("email");this.newTask.endpoint=t}if(this.todolist&&this.todolist.length>0){const t=this.todolist.findIndex(e=>e.id===this.newTask.status);t!==-1&&this.todolist[t].tasks.push(this.newTask)}await a.putWorklist(this.newTask.taskId,this.newTask),this.close()},uuid(){function a(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()}}},ft=d("h4",{class:"text-h4"},"할 일",-1),mt=I("mdi-pencil"),ht={class:"mb-3"},vt=d("span",{class:"text-h6 font-weight-semibold"},"제목: ",-1),gt={class:"text-h6"},wt={class:"mb-3"},kt=d("span",{class:"text-h6 font-weight-semibold"},"시작일: ",-1),_t={class:"text-h6"},Tt={class:"mb-3"},yt=d("span",{class:"text-h6 font-weight-semibold"},"종료일: ",-1),pt={class:"text-h6"},Dt={class:"mb-3"},bt=d("span",{class:"text-h6 font-weight-semibold"},"상태: ",-1),Ct={class:"text-h6"},It=d("span",{class:"text-h6 font-weight-semibold"},"설명: ",-1),Ot={class:"text-h6"},xt=I("닫기"),Ut=d("h4",{class:"text-h4"},"할 일 수정",-1),St=I("mdi-arrow-left"),Mt=d("h4",{class:"text-h4"},"할 일 등록",-1),Et=I("저장"),Wt=I("닫기");function Yt(a,t,e,n,r,i){return v(),p(re,{modelValue:e.isOpen,"onUpdate:modelValue":t[6]||(t[6]=o=>e.isOpen=o),"max-width":"500"},{default:s(()=>[e.type=="view"?(v(),p(N,{key:0},{default:s(()=>[l(F,{class:"d-flex align-center justify-space-between pt-3 pl-5"},{default:s(()=>[ft,l(M,{class:"edit-button",variant:"flat",onClick:t[0]||(t[0]=o=>e.type="edit")},{default:s(()=>[l(ie,null,{default:s(()=>[mt]),_:1})]),_:1})]),_:1}),l(te,{class:"px-6"},{default:s(()=>[d("div",ht,[vt,d("span",gt,y(e.task.title),1)]),d("div",wt,[kt,d("span",_t,y(e.task.startDate),1)]),d("div",Tt,[yt,d("span",pt,y(e.task.endDate),1)]),d("div",Dt,[bt,d("span",Ct,y(e.task.status),1)]),d("div",null,[It,d("span",Ot,y(e.task.description),1)])]),_:1}),l(ae,{class:"justify-center pt-0"},{default:s(()=>[l(M,{color:"error",variant:"flat",onClick:i.close},{default:s(()=>[xt]),_:1},8,["onClick"])]),_:1})]),_:1})):(v(),p(N,{key:1},{default:s(()=>[e.type&&e.type=="edit"?(v(),p(F,{key:0,class:"d-flex align-center justify-space-between pt-3 pl-5"},{default:s(()=>[Ut,l(M,{class:"edit-button",variant:"flat",onClick:t[1]||(t[1]=o=>e.type="view")},{default:s(()=>[l(ie,null,{default:s(()=>[St]),_:1})]),_:1})]),_:1})):(v(),p(F,{key:1,class:"pt-5 pl-5"},{default:s(()=>[Mt]),_:1})),l(te,null,{default:s(()=>[l(Z,{modelValue:a.newTask.title,"onUpdate:modelValue":t[2]||(t[2]=o=>a.newTask.title=o),label:"할일명",autofocus:""},null,8,["modelValue"]),l(Z,{modelValue:a.newTask.startDate,"onUpdate:modelValue":t[3]||(t[3]=o=>a.newTask.startDate=o),label:"시작일",type:"datetime-local"},null,8,["modelValue"]),l(Z,{modelValue:a.newTask.dueDate,"onUpdate:modelValue":t[4]||(t[4]=o=>a.newTask.dueDate=o),label:"마감일",type:"datetime-local"},null,8,["modelValue"]),l(be,{modelValue:a.newTask.description,"onUpdate:modelValue":t[5]||(t[5]=o=>a.newTask.description=o),label:"설명",outlined:""},null,8,["modelValue"])]),_:1}),l(ae,{class:"justify-center pt-0"},{default:s(()=>[l(M,{disabled:a.newTask.title=="",color:"primary",variant:"flat",onClick:i.save},{default:s(()=>[Et]),_:1},8,["disabled","onClick"]),l(M,{color:"error",variant:"flat",onClick:i.close},{default:s(()=>[Wt]),_:1},8,["onClick"])]),_:1})]),_:1}))]),_:1},8,["modelValue"])}const $t=A(ct,[["render",Yt]]);const Vt={components:{TodoDialog:$t},props:{task:Object},data:()=>({managed:!1,dialog:!1,dialogType:""}),computed:{mode(){return window.$mode},remainingDays(){const a=new Date;a.setHours(0,0,0,0);const t=new Date(this.task.dueDate);t.setHours(0,0,0,0);const n=(t-a)/(1e3*3600*24);return n>=0?`${n} days remaining`:"Due date passed"},isDueTodayOrTomorrow(){const a=new Date;a.setHours(0,0,0,0);const t=new Date(a);t.setDate(t.getDate()+1);const e=new Date(this.task.dueDate);return e.setHours(0,0,0,0),e>=a&&e<=t},isPastDue(){const a=new Date;a.setHours(0,0,0,0);const t=new Date(this.task.dueDate);return t.setHours(0,0,0,0),t<a},formattedDate(){var a="";return this.task.startDate&&(a+=ce(new Date(this.task.startDate),"yyyy.MM.dd")+" ~"),this.task.dueDate&&(a.includes("~")||(a+="~ "),a+=ce(new Date(this.task.dueDate),"yyyy.MM.dd")),a},category(){return this.task.instId?{name:"BPM",color:"primary"}:null}},created(){this.task.instId?this.managed=!1:this.managed=!0},methods:{executeTask(){this.managed?(this.dialogType="view",this.dialog=!0):this.$emit("executeTask",this.task)},closeDialog(){this.dialog=!1},deleteTask(){this.$emit("deleteTask",this.task)}}},Pt={class:"ma-0 pa-0 mt-1",style:{"line-height":"100%"}},Ft={class:"pa-0"},Nt={class:"d-flex align-items-center",style:{width:"100%"}},Ht={style:{"font-size":"16px","font-weight":"500"}},Bt=I("삭제"),Lt={key:0,class:"pa-0",style:{"font-size":"12px","margin-top":"5px"}},qt={key:1,colos:"12",class:"pa-0"},Rt={class:"text-caption"},Gt={class:"pa-0"},Qt={class:"d-flex align-center"},At={class:"body-text-1 text-dark pl-2"},Xt={class:"pa-0"},jt={class:"text-subtitle-2"};function Kt(a,t,e,n,r,i){const o=C("DotsVerticalIcon"),c=C("RouterLink"),f=C("CalendarIcon"),m=C("TodoDialog");return v(),p(N,{elevation:"10",class:fe(["mb-3 cursor-pointer pa-3",{"border-primary":i.isDueTodayOrTomorrow,"border-purple":i.isPastDue}]),onClick:i.executeTask},{default:s(()=>[l(F,{class:"ma-0 pa-0"},{default:s(()=>[d("div",Pt,[d("div",Ft,[d("div",Nt,[d("div",Ht,y(e.task.title),1),l(Ce),i.category?(v(),p(Ie,{key:0,color:i.category.color,size:"small",variant:"outlined",density:"comfortable",style:{"margin-left":"5px"}},{default:s(()=>[I(y(i.category.name),1)]),_:1},8,["color"])):oe("",!0),a.managed?(v(),p(c,{key:1,to:"",class:"px-0",color:"black"},{default:s(()=>[l(o,{size:"15"}),l(Oe,{activator:"parent"},{default:s(()=>[l(xe,{density:"compact"},{default:s(()=>[l(Ue,{onClick:i.deleteTask},{default:s(()=>[l(Se,null,{default:s(()=>[Bt]),_:1})]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})):oe("",!0)])]),i.mode=="uEngine"?(v(),q("div",Lt," TaskId : "+y(e.task.taskId)+" / InstId: "+y(e.task.instId),1)):(v(),q("div",qt,[d("div",Rt,y(e.task.instName),1)])),d("div",Gt,[d("div",Qt,[l(f,{size:"16"}),d("div",At,y(i.formattedDate),1)])]),d("div",Xt,[d("div",jt,y(e.task.description),1)])])]),_:1}),l(re,{modelValue:a.dialog,"onUpdate:modelValue":t[0]||(t[0]=g=>a.dialog=g),"max-width":"500"},{default:s(()=>[l(m,{type:a.dialogType,task:e.task,onClose:i.closeDialog},null,8,["type","task","onClose"])]),_:1},8,["modelValue"])]),_:1},8,["onClick","class"])}const zt=A(Vt,[["render",Kt],["__scopeId","data-v-0646f717"]]),ee=ne.createBackend(),Jt={components:{DefaultForm:$e,DynamicForm:Ve},props:{taskId:String,workItem:Object,isSimulate:{type:String,default:!1}},data:()=>({formHtml:null,formData:{},inputItems:null,isDefaultForm:null}),mounted(){this.init()},methods:{async init(){var a=this;if(a.workItem.activity&&a.workItem.activity.variableForHtmlFormContext&&a.workItem.activity.variableForHtmlFormContext.name){a.isDefaultForm=!1;let t=a.workItem.worklist.tool.split(":")[1];a.formHtml=await ee.getRawDefinition(t,{type:"form"}),await a.loadForm()}else a.workItem.activity&&a.workItem.activity.parameters&&a.workItem.activity.parameters.length>0&&(a.isDefaultForm=!0,a.inputItems=a.workItem.activity.parameters.filter(t=>t.direction.includes("OUT")).map(t=>({name:t.variable.name,key:t.argument.text,value:t.variable.defaultValue})))},async loadForm(){var a=this;if(!a.workItem.activity||!a.workItem.activity.variableForHtmlFormContext)return;let t=a.workItem.activity.variableForHtmlFormContext.name,e=await ee.getVariableWithTaskId(a.workItem.worklist.instId,a.taskId,t);e&&e.valueMap?a.formData=e.valueMap:a.formData={}},submit(){var a=this;a.$try({action:async()=>{let t;a.isDefaultForm?t=a.inputItems:(a.workItem.parameterValues=a.formData,t=a.workItem),await ee.putWorkItemComplete(a.taskId,t,a.isSimulate),a.$emit("closeDialog",!0)},onFail(t){a.$emit("closeDialog",!1)}})},closeDialog(a){this.$emit("closeDialog",a)}}},Zt=d("h6",{class:"text-h6 font-weight-semibold"},"필수 입력",-1),ea=I("제출"),ta=I("취소");function aa(a,t,e,n,r,i){const o=C("DefaultForm"),c=C("DynamicForm");return v(),p(N,{flat:"",class:"pa-2"},{default:s(()=>[l(F,null,{default:s(()=>[Zt]),_:1}),l(te,null,{default:s(()=>[a.isDefaultForm?(v(),p(o,{key:0,inputItems:a.inputItems},null,8,["inputItems"])):(v(),p(c,{key:1,ref:"dynamicForm",formHTML:a.formHtml,modelValue:a.formData,"onUpdate:modelValue":t[0]||(t[0]=f=>a.formData=f)},null,8,["formHTML","modelValue"]))]),_:1}),l(ae,{class:"justify-center"},{default:s(()=>[l(M,{color:"primary",variant:"flat",onClick:i.submit},{default:s(()=>[ea]),_:1},8,["onClick"]),l(M,{color:"error",variant:"flat",onClick:t[1]||(t[1]=f=>i.closeDialog(!1))},{default:s(()=>[ta]),_:1})]),_:1})]),_:1})}const na=A(Jt,[["render",aa]]);const L=ne.createBackend(),ra={components:{TodoTaskItemCard:zt,WorkItemDialog:na},props:{column:Object,loading:Boolean,isNotAll:{type:Boolean,default:!1}},data:()=>({dialog:!1,taskId:null,workItem:null,originColumnId:null}),async mounted(){this.workItem=await L.getWorkItem(this.taskId),this.$refs.section&&this.$refs.section.addEventListener("scroll",this.checkScrollBottom)},methods:{checkScrollBottom(){const a=this.$refs.section;a.scrollTop+a.clientHeight>=a.scrollHeight-1&&this.column.id=="DONE"&&(this.loading||this.$emit("scrollBottom"))},checkDraggable(a){return!0},updateTask(a){var t=this;const e=a.item.dataset.id,n=t.column.tasks.find(r=>r.id===e);t.originColumnId=n.status,n.status=t.column.id,t.updateWorkItem(n)},updateWorkItem(a){var t=this;t.$try({action:async()=>{const e=await L.putWorklist(a.taskId,a);if(window.$mode=="ProcessGPT"){if(e&&e.errors&&e.errors.length>0)t.taskId=a.taskId,t.workItem=await L.getWorkItem(t.taskId),t.dialog=!0;else if(e&&e.completedActivities&&e.completedActivities.length>0){const n=e.completedActivities.find(r=>r.completedActivityId==a.tracingTag).result;this.$emit("updateStatus",this.taskId,n)}}},onFail:e=>{t.$emit("updateStatus",a.taskId,t.originColumnId)},successMsg:a.status=="DONE"?this.$t("successMsg.workCompleted"):null})},closeDialog(a){this.dialog=!1,a?this.EventBus.emit("instances-updated"):this.$emit("updateStatus",this.taskId,this.originColumnId),this.taskId=null,this.originColumnId=null},async deleteTask(a){await L.deleteWorkItem(a.taskId),this.column.tasks=this.column.tasks.filter(t=>t.taskId!==a.taskId)},executeTask(a){this.$emit("executeTask",a)},handleChange(){console.log("changed")},inputChanged(a){console.log(a)},getComponentData(){return{}}}},ia={class:"d-flex align-center justify-space-between pa-3 pb-2 pt-2"},oa={class:"text-h6 font-weight-semibold"};function sa(a,t,e,n,r,i){const o=C("TodoTaskItemCard"),c=C("draggable"),f=C("WorkItemDialog");return v(),p(N,{elevation:"10",class:fe("bg-"+e.column.cardbg)},{default:s(()=>[d("div",ia,[d("h6",oa,y(a.$t(e.column.title)),1)]),d("div",{ref:"section",class:"pa-3 todo-list-card-box",style:Ye([{height:e.isNotAll?"calc(100vh - 332px)":"calc(100vh - 300px)"},{overflow:"auto"}])},[l(c,{class:"dragArea list-group cursor-move",list:e.column.tasks,animation:200,"ghost-class":"ghost-card",group:"tasks",onAdd:i.updateTask,"component-data":i.getComponentData(),move:i.checkDraggable},{default:s(()=>[l(Me,null,{default:s(()=>[(v(!0),q(We,null,Ee(e.column.tasks,m=>(v(),q("div",{key:m.taskId,class:"cursor-move todo-task-item-card-style"},[l(o,{task:m,onDeleteTask:i.deleteTask,onExecuteTask:i.executeTask},null,8,["task","onDeleteTask","onExecuteTask"])]))),128))]),_:1})]),_:1},8,["list","onAdd","component-data","move"])],4),l(re,{modelValue:a.dialog,"onUpdate:modelValue":t[0]||(t[0]=m=>a.dialog=m),"max-width":"500"},{default:s(()=>[l(f,{taskId:a.taskId,workItem:a.workItem,onCloseDialog:i.closeDialog},null,8,["taskId","workItem","onCloseDialog"])]),_:1},8,["modelValue"])]),_:1},8,["class"])}const ca=A(ra,[["render",sa]]);export{ca as T,$t as a,ce as f};
