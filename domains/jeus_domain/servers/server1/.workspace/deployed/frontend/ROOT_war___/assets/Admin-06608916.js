import{ab as pe,bm as ce,bn as fe,bo as ge,ag as be,bp as he,bq as De,br as ve,I as w,bs as Pe,bt as p,bu as ye,bv as Ve,bw as ke,bx as Se,by as Ce,bz as Te,bA as we,bB as Ie,bC as Fe,aX as Me,ar as Ee,bD as N,bE as R,bF as z,bG as G,b as l,F as Be,D as C,_ as $e,B as Le,ba as Ue,r as xe,o as m,c as Oe,w as i,Q as A,U as Ne,d as u,t as d,a as o,W as V,a$ as H,e as c,H as j,V as k,aS as I,S as q,h as f,g as S,E as Re,f as ze}from"./index-7b37f28a.js";import{V as W}from"./VDatePicker-b7697b5c.js";import"./VSheet-beabeb52.js";const Ge=pe({itemsLength:{type:[Number,String],required:!0},...ce(),...fe(),...ge()},"VDataTableServer"),Ae=be()({name:"VDataTableServer",props:Ge(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:expanded":e=>!0,"update:groupBy":e=>!0},setup(e,a){let{attrs:v,slots:s}=a;const{groupBy:b}=he(e),{sortBy:n,multiSort:h,mustSort:t}=De(e),{page:g,itemsPerPage:P}=ve(e),K=w(()=>parseInt(e.itemsLength,10)),{columns:F,headers:Q}=Pe(e,{groupBy:b,showSelect:p(e,"showSelect"),showExpand:p(e,"showExpand")}),{items:y}=ye(e,F),{toggleSort:M}=Ve({sortBy:n,multiSort:h,mustSort:t,page:g}),{opened:X,isGroupOpen:J,toggleGroup:Y,extractRows:Z}=ke({groupBy:b,sortBy:n}),{pageCount:_,setItemsPerPage:ee}=Se({page:g,itemsPerPage:P,itemsLength:K}),{flatItems:E}=Ce(y,b,X),{isSelected:te,select:ae,selectAll:se,toggleSelect:le,someSelected:ie,allSelected:ne}=Te(e,{allItems:y,currentPage:y}),{isExpanded:re,toggleExpand:de}=we(e),B=w(()=>Z(y.value));Ie({page:g,itemsPerPage:P,sortBy:n,groupBy:b,search:p(e,"search")}),Fe("v-data-table",{toggleSort:M,sortBy:n}),Me({VDataTableRows:{hideNoData:p(e,"hideNoData"),noDataText:p(e,"noDataText"),loading:p(e,"loading"),loadingText:p(e,"loadingText")}});const r=w(()=>({page:g.value,itemsPerPage:P.value,sortBy:n.value,pageCount:_.value,toggleSort:M,setItemsPerPage:ee,someSelected:ie.value,allSelected:ne.value,isSelected:te,select:ae,selectAll:se,toggleSelect:le,isExpanded:re,toggleExpand:de,isGroupOpen:J,toggleGroup:Y,items:B.value.map(T=>T.raw),internalItems:B.value,groupedItems:E.value,columns:F.value,headers:Q.value}));Ee(()=>{const T=N.filterProps(e),oe=R.filterProps(e),ue=z.filterProps(e),me=G.filterProps(e);return l(G,C({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},me),{top:()=>{var D;return(D=s.top)==null?void 0:D.call(s,r.value)},default:()=>{var D,$,L,U,x,O;return s.default?s.default(r.value):l(Be,null,[(D=s.colgroup)==null?void 0:D.call(s,r.value),l("thead",{class:"v-data-table__thead",role:"rowgroup"},[l(R,C(oe,{sticky:e.fixedHeader}),s)]),($=s.thead)==null?void 0:$.call(s,r.value),l("tbody",{class:"v-data-table__tbody",role:"rowgroup"},[(L=s["body.prepend"])==null?void 0:L.call(s,r.value),s.body?s.body(r.value):l(z,C(v,ue,{items:E.value}),s),(U=s["body.append"])==null?void 0:U.call(s,r.value)]),(x=s.tbody)==null?void 0:x.call(s,r.value),(O=s.tfoot)==null?void 0:O.call(s,r.value)])},bottom:()=>s.bottom?s.bottom(r.value):l(N,T,{prepend:s["footer.prepend"]})})})}});const He=Le.createBackend(),je={name:"admin",components:{VDataTable:Ue},data:()=>({instanceList:[],search:"",headers:[],itemsPerPage:10,currentPage:0,totalElements:0,filters:{instName:null,status:null,startedDate:null,finishedDate:null,initEp:null,subProcess:null,date:null},startDateMenu:!1,finishedDateMenu:!1,statusOptions:["Running","Completed"],subProcessOptions:["true","false"]}),async created(){this.getFilteredInstanceList(0)},mounted(){this.headers=[{align:"start",key:"instId",sortable:!1,title:this.$t("admin.instanceId")},{key:"name",align:"start",title:this.$t("admin.name")},{key:"status",align:"start",title:this.$t("admin.status")},{key:"startedDate",align:"start",title:this.$t("admin.startedDate")},{key:"finishedDate",align:"start",title:this.$t("admin.finishedDate")},{key:"initEp",align:"start",title:this.$t("admin.initiator")},{key:"subProcess",align:"center",title:this.$t("admin.subProcess")},{key:"actions",align:"start",title:this.$t("admin.actions")}]},computed:{formattedStartDate(){if(!this.filters.startedDate)return"";const e=new Date(this.filters.startedDate);return e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),e.toISOString().split("T")[0]},formattedFinishedDate(){if(!this.filters.finishedDate)return"";const e=new Date(this.filters.finishedDate);return e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),e.toISOString().split("T")[0]}},methods:{clearStatus(){this.filters.status=null},clearSubProcess(){this.filters.subProcess=null},toggleStartDateMenu(){this.finishedDateMenu=!1,this.startDateMenu=!this.startDateMenu},toggleFinishedDateMenu(){this.startDateMenu=!1,this.finishedDateMenu=!this.finishedDateMenu},clearStartDate(e){e.stopPropagation(),this.filters.startedDate=null},clearFinishedDate(e){e.stopPropagation(),this.filters.finishedDate=null},formatDate(e){if(!e)return"N/A";const a={year:"numeric",month:"long",day:"numeric",hour:"numeric"};return new Date(e).toLocaleString("ko-KR",a)},viewDetail(e){this.$router.push({name:"Admin Detail",params:{id:e.instId}})},handlePageUpdate(e){this.currentPage=e-1,this.getFilteredInstanceList(this.currentPage)},updateItemsPerPage(e){this.itemsPerPage=e===-1?this.totalElements:e,this.currentPage=0,this.getFilteredInstanceList(this.currentPage)},async getFilteredInstanceList(e){let a=this;const v={...a.filters,startedDate:a.formattedStartDate,finishedDate:a.formattedFinishedDate};await He.getFilteredInstanceList(v,e,a.itemsPerPage).then(s=>{s&&(a.instanceList=s.instances,a.totalElements=s.totalElements,a.currentPage=s.currentPage)})}}},qe={class:"d-flex align-center flex-fill border border-borderColor header-search rounded-pill px-5"},We={class:"d-flex align-center flex-fill border border-borderColor header-search rounded-pill px-5 ml-4"},Ke={style:{display:"flex","justify-content":"flex-end"}},Qe=u("mdi-close"),Xe={style:{display:"flex","justify-content":"flex-end"}},Je=u("mdi-close"),Ye=u("mdi-checkbox-marked-circle");function Ze(e,a,v,s,b,n){const h=xe("Icons");return m(),Oe("div",null,[l(ze,{elevation:"10",style:{height:"83vh"},class:"pa-4"},{default:i(()=>[l(A,{class:"ma-0 pa-0 delete-input-details"},{default:i(()=>[l(Ne,{class:"pl-3"},{default:i(()=>[u(d(e.$t("admin.instanceList")),1)]),_:1}),o("div",qe,[l(h,{icon:"magnifer-linear",size:22}),l(V,{modelValue:e.filters.name,"onUpdate:modelValue":a[0]||(a[0]=t=>e.filters.name=t),label:e.$t("admin.name"),variant:"plain",density:"compact",class:"position-relative pt-0 ml-3 custom-placeholer-color admin-filter-font-size",placeholder:e.$t("admin.name"),"single-line":"","hide-details":"",style:{"max-width":"100px"}},null,8,["modelValue","label","placeholder"])]),o("div",We,[l(h,{icon:"magnifer-linear",size:22}),l(V,{modelValue:e.filters.initEp,"onUpdate:modelValue":a[1]||(a[1]=t=>e.filters.initEp=t),label:e.$t("admin.initiator"),variant:"plain",density:"compact",class:"position-relative pt-0 ml-3 custom-placeholer-color admin-filter-font-size",placeholder:e.$t("admin.initiator"),"single-line":"","hide-details":""},null,8,["modelValue","label","placeholder"])])]),_:1}),l(A,{class:"ma-0 pa-0 pt-2 pt-b2 delete-input-details"},{default:i(()=>[l(H,{modelValue:e.filters.subProcess,"onUpdate:modelValue":a[2]||(a[2]=t=>e.filters.subProcess=t),items:e.subProcessOptions,label:e.$t("admin.subProcess"),variant:"underlined",class:"ml-3",style:{"max-width":"160px"},"menu-props":{closeOnContentClick:!1},"append-icon":e.filters.subProcess?"mdi-close":"","onClick:append":n.clearSubProcess},null,8,["modelValue","items","label","append-icon","onClick:append"]),l(H,{modelValue:e.filters.status,"onUpdate:modelValue":a[3]||(a[3]=t=>e.filters.status=t),items:e.statusOptions,label:e.$t("admin.status"),variant:"underlined",class:"ml-3",style:{"max-width":"160px"},"menu-props":{closeOnContentClick:!1},"append-icon":e.filters.status?"mdi-close":"","onClick:append":n.clearStatus},null,8,["modelValue","items","label","append-icon","onClick:append"]),l(V,{onClick:n.toggleStartDateMenu,modelValue:n.formattedStartDate,"onUpdate:modelValue":a[4]||(a[4]=t=>n.formattedStartDate=t),label:e.$t("admin.startedDate"),readonly:"",class:"ml-3 no-border admin-calendar-label","prepend-inner-icon":"mdi-calendar","append-icon":e.filters.startedDate?"mdi-close":"","onClick:append":a[5]||(a[5]=t=>n.clearStartDate(t))},null,8,["onClick","modelValue","label","append-icon"]),e.startDateMenu?(m(),c(q,{key:0,class:"elevation-1",style:{position:"absolute","z-index":"10",margin:"45px 0px 0px 215px"}},{default:i(()=>[l(j,null,{default:i(()=>[o("div",Ke,[l(k,{icon:"",variant:"text",density:"comfortable",onClick:a[6]||(a[6]=t=>e.startDateMenu=!1)},{default:i(()=>[l(I,null,{default:i(()=>[Qe]),_:1})]),_:1})]),l(W,{modelValue:e.filters.startedDate,"onUpdate:modelValue":[a[7]||(a[7]=t=>e.filters.startedDate=t),a[8]||(a[8]=t=>e.startDateMenu=!e.startDateMenu)]},null,8,["modelValue"])]),_:1})]),_:1})):f("",!0),l(V,{onClick:n.toggleFinishedDateMenu,modelValue:n.formattedFinishedDate,"onUpdate:modelValue":a[9]||(a[9]=t=>n.formattedFinishedDate=t),label:e.$t("admin.finishedDate"),readonly:"",class:"ml-3 no-border admin-calendar-label","prepend-inner-icon":"mdi-calendar","append-icon":e.filters.finishedDate?"mdi-close":"","onClick:append":a[10]||(a[10]=t=>n.clearFinishedDate(t))},null,8,["onClick","modelValue","label","append-icon"]),e.finishedDateMenu?(m(),c(q,{key:1,class:"elevation-1",style:{position:"absolute","z-index":"10",margin:"45px 0px 0px 415px"}},{default:i(()=>[l(j,null,{default:i(()=>[o("div",Xe,[l(k,{icon:"",variant:"text",density:"comfortable",onClick:a[11]||(a[11]=t=>e.finishedDateMenu=!1)},{default:i(()=>[l(I,null,{default:i(()=>[Je]),_:1})]),_:1})]),l(W,{modelValue:e.filters.finishedDate,"onUpdate:modelValue":[a[12]||(a[12]=t=>e.filters.finishedDate=t),a[13]||(a[13]=t=>e.finishedDateMenu=!e.finishedDateMenu)]},null,8,["modelValue"])]),_:1})]),_:1})):f("",!0),l(k,{onClick:a[14]||(a[14]=t=>n.getFilteredInstanceList(0)),class:"ml-4 mt-2",rounded:"",color:"primary"},{default:i(()=>[u(d(e.$t("admin.search")),1)]),_:1})]),_:1}),l(Ae,{search:e.search,"onUpdate:search":a[15]||(a[15]=t=>e.search=t),items:e.instanceList,headers:e.headers,"items-per-page":e.itemsPerPage,"items-per-page-options":[10,20,30,40,50,-1],itemsPerPageText:e.$t("admin.itemsPerPageText"),"items-length":e.totalElements,style:{height:"calc(100% - 100px)",overflow:"auto"},"no-data-text":e.$t("admin.noSearch"),"onUpdate:page":n.handlePageUpdate,"onUpdate:itemsPerPage":n.updateItemsPerPage},{"item.name":i(({item:t})=>[o("div",null,d(t.instName),1)]),"item.status":i(({item:t})=>[o("div",null,[t.status=="Completed"?(m(),c(S,{key:0,color:"success"},{default:i(()=>[u(d(t.status),1)]),_:2},1024)):f("",!0),t.status=="Running"?(m(),c(S,{key:1,color:"primary"},{default:i(()=>[u(d(t.status),1)]),_:2},1024)):f("",!0),t.status=="Pending"||t.status=="Stopped"?(m(),c(S,{key:2},{default:i(()=>[u(d(t.status),1)]),_:2},1024)):f("",!0),t.status=="Failed"?(m(),c(S,{key:3,color:"error"},{default:i(()=>[u(d(t.status),1)]),_:2},1024)):f("",!0)])]),"item.actions":i(({item:t})=>[l(Re,{text:e.$t("admin.viewDetails")},{activator:i(({props:g})=>[l(k,C({onClick:P=>n.viewDetail(t)},g,{icon:"",variant:"text",density:"comfortable"}),{default:i(()=>[l(h,{icon:"preview",size:18,class:"text-primary"})]),_:2},1040,["onClick"])]),_:2},1032,["text"])]),"item.initEp":i(({item:t})=>[o("div",null,d(t.initEp),1)]),"item.subProcess":i(({item:t})=>[t.subProcess?(m(),c(I,{key:0,color:"success"},{default:i(()=>[Ye]),_:1})):f("",!0)]),"item.startedDate":i(({item:t})=>[o("div",null,d(n.formatDate(t.startedDate)),1)]),"item.finishedDate":i(({item:t})=>[o("div",null,d(n.formatDate(t.finishedDate)),1)]),_:1},8,["search","items","headers","items-per-page","itemsPerPageText","items-length","no-data-text","onUpdate:page","onUpdate:itemsPerPage"])]),_:1})])}const at=$e(je,[["render",Ze]]);export{at as default};
