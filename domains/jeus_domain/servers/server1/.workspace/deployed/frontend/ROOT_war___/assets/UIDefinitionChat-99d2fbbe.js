import{c as U,_ as B}from"./index-4118e607.js";import{_ as j,a as q}from"./ChatProfile-ae681fa1.js";import{M as K,F as R}from"./FormDesignSavePanel-9b7c3ce1.js";import{_ as x}from"./AppBaseCard.vue_vue_type_style_index_0_lang-764d25b8.js";import{_ as J,s as W,r as b,o as v,c as S,b as u,w as m,a as C,E as w,V as y,D,t as g,e as M,h as F,j as z,n as I,d as A,l as G,p as N,bk as V,F as T,a_ as Q,Q as Z,R as X,f as k,X as O,m as Y,b7 as ee}from"./index-7b37f28a.js";import{F as L}from"./FormDesignGenerator-cf42b57e.js";import{C as te}from"./Chat-127d4b0d.js";import{_ as ae}from"./DynamicForm-9e8c830e.js";import"./VSheet-beabeb52.js";import"./VBadge-0c68c2c9.js";import"./chat-icon-2658168f.js";import"./VDatePicker-b7697b5c.js";import"./customizer-3521e2ce.js";U({objectHash:function(e,i){return"$$index:"+i}});const se={mixins:[W],name:"UIDefinitionChat",components:{Chat:te,AppBaseCard:x,ChatListing:j,ChatDetail:B,ChatProfile:q,Mashup:K,ChatGenerator:L,FormDesignSavePanel:R,DynamicForm:ae},data:()=>({path:"form_def",chatInfo:{title:"uiDefinition.cardTitle",text:"uiDefinition.uiDefinitionExplanation"},kEditorInput:"",mashupKey:0,prevFormOutput:"",prevMessageFormat:"",storedFormDefHTML:"",isOpenSaveDialog:!1,currentTabName:"",isShowMashup:!1,previewHTML:"",previewFormValues:{},isShowPreview:!1,dev:{isDevMode:window.localStorage.getItem("isDevMode")==="true",previewFormValues:""},loadFormId:"",isLoadedForm:!1,kEditorContentBeforeSave:"",isAIUpdated:!1,isRoutedWithUnsaved:!1,processDefUrlData:null,formNameByUrl:null,isOpenDeleteDialog:!1}),async created(){(async()=>{if(!await this.storage.isConnection()){const o=async()=>{await this.storage.isConnection()?this.$router.go(0):setTimeout(o,500)};setTimeout(o,500)}})(),this.generator=new L(this,{isStream:!0,preferredLanguage:"Korean"}),await this.init();const n=new URLSearchParams(window.location.search).get("process_def_url_data");n&&(this.processDefUrlData=JSON.parse(decodeURIComponent(atob(n))),this.beforeSendMessage({image:null,text:this.processDefUrlData.initPrompt,mentionedUsers:[]}),this.formNameByUrl=this.processDefUrlData.formName)},watch:{$route:{deep:!0,handler(e,i){if(e.path.startsWith("/ui-definitions")){if(this.isRoutedWithUnsaved){this.isRoutedWithUnsaved=!1;return}e.path!==i.path?this.$refs.mashup?this.isAIUpdated||this.$refs.mashup.getKEditorContentHtml()!=this.kEditorContentBeforeSave?window.confirm(this.$t("changePath"))?this.loadData():(this.isRoutedWithUnsaved=!0,this.$router.push(i.path)):this.loadData():this.loadData():this.isShowMashup=!0}}},currentTabName:{handler(){this.currentTabName==="edit"?$("div[id^='keditor-content-area-']").css("display","block"):($("div[id^='keditor-content-area-']").css("display","none"),this.applyToPreviewTab())}}},methods:{updateKEditorContentBeforeSave(e){this.kEditorContentBeforeSave=e},openSaveDialog(){this.isOpenSaveDialog=!0},openDeleteDialog(){this.isOpenDeleteDialog=!0},async tryToSaveFormDefinition({id:e}){var i=this;i.$try({context:i,action:async()=>{const n=i.$refs.mashup.getKEditorContentHtml(),o=i.keditorContentHTMLToDynamicFormHTML(n);await i.saveFormDefinition({id:e,html:o})},successMsg:this.$t("successMsg.save")})},keditorContentHTMLToDynamicFormHTML(e){const i=new DOMParser().parseFromString(e,"text/html"),n=new Set;i.querySelectorAll("[name]").forEach(l=>{const s=l.getAttribute("name");if(!(!s||s.length<=0)){if(n.has(s))throw new Error(`'${s}' 이름이 중복되어 있습니다.`);n.add(s)}});const o=i.querySelectorAll("div.row");for(let l=0;l<o.length;l++){const s=o[l];if(s.getAttribute("is_multidata_mode")==="true"&&s.querySelector("code-field"))throw new Error("multidataMode가 설정된 레이아웃 안에 code-field가 존재할 수 없습니다.")}return o.forEach(l=>{const s=l.getAttribute("is_multidata_mode");if(!s||s==="false"){let c=!1,t=l.parentNode;for(;t&&t.tagName.toLowerCase()!=="body";){if(t.getAttribute("is_multidata_mode")==="true"){c=!0;break}t=t.parentNode}const d=document.createElement("row-layout");d.setAttribute("name",l.getAttribute("name")??""),d.setAttribute("alias",l.getAttribute("alias")??""),d.setAttribute("is_multidata_mode",l.getAttribute("is_multidata_mode")??"false"),d.setAttribute("v-model",c?"item":"formValues"),d.setAttribute("v-slot","slotProps");const a=document.createElement("div");a.setAttribute("class","row"),Array.from(l.children).forEach(r=>{a.appendChild(r)}),$(a).children('[class^="col-sm-"]').children("[name]").each(function(){var r=$(this)[0];if(r.tagName.toLowerCase()==="code-field"){const f=r.getAttribute("name");r.setAttribute("v-model",`codeInfos['${f}']`),r.getAttribute("event_type")==="click"&&r.setAttribute("v-on:on_click",`executeCode('${f}')`)}else{const f=r.getAttribute("name");r.setAttribute("v-model",`slotProps.modelValue['${f}']`)}}),d.appendChild(a),l.parentNode.replaceChild(d,l)}else{if(!l.getAttribute("name")||l.getAttribute("name").length<=0)throw new Error("multidataMode가 설정된 레이아웃에 'name' 속성이 없습니다.");let c=!1,t=l.parentNode;for(;t&&t.tagName.toLowerCase()!=="body";){if(t.getAttribute("is_multidata_mode")==="true"){c=!0;break}t=t.parentNode}const d=document.createElement("row-layout");d.setAttribute("name",l.getAttribute("name")),d.setAttribute("alias",l.getAttribute("alias")??""),d.setAttribute("is_multidata_mode",l.getAttribute("is_multidata_mode")),d.setAttribute("v-model",c?"item":"formValues"),d.setAttribute("v-slot","slotProps");const a=document.createElement("div");a.setAttribute("v-for","(item, index) in slotProps.modelValue"),a.setAttribute(":key","index");const r=document.createElement("row-layout-item-head");r.setAttribute(":index","index"),r.setAttribute("v-on:on_delete_item","slotProps.deleteItem(index)"),a.appendChild(r);const f=document.createElement("div");f.classList.add("row"),Array.from(l.children).forEach(p=>{f.appendChild(p)}),a.appendChild(f),d.appendChild(a),$(d).children("div").children("div.row").children('[class^="col-sm-"]').children("[name]").each(function(){var p=$(this)[0];const h=p.getAttribute("name");p.setAttribute("v-model",`item['${h}']`)}),l.parentNode.replaceChild(d,l)}}),i.body.innerHTML.replace(/&quot;/g,"'").replace("<br>",`
`)},dynamicFormHTMLToKeditorContentHTML(e){const i=new DOMParser().parseFromString(e,"text/html");return i.querySelectorAll("row-layout").forEach(o=>{const l=o.getAttribute("is_multidata_mode");if(!l||l==="false"){const s=document.createElement("div");s.setAttribute("name",o.getAttribute("name")??""),s.setAttribute("alias",o.getAttribute("alias")??""),s.setAttribute("is_multidata_mode",o.getAttribute("is_multidata_mode")??"false"),s.setAttribute("class","row"),Array.from(o.firstChild.children).forEach(c=>{s.appendChild(c)}),$(s).children('[class^="col-sm-"]').children("[v-model]").each(function(){var c=$(this)[0];c.removeAttribute("v-model")}),$(s).children('[class^="col-sm-"]').children("*").each(function(){var c=$(this)[0];Array.from(c.attributes).forEach(t=>{t.name.startsWith("v-on:")&&c.removeAttribute(t.name)})}),o.parentNode.replaceChild(s,o)}else{const s=document.createElement("div");s.setAttribute("name",o.getAttribute("name")??""),s.setAttribute("alias",o.getAttribute("alias")??""),s.setAttribute("is_multidata_mode",o.getAttribute("is_multidata_mode")??"false"),s.setAttribute("class","row"),$(o).children("div").children("div.row").children('[class^="col-sm-"]').each(function(){var c=$(this)[0];s.appendChild(c)}),$(s).children('[class^="col-sm-"]').children("[v-model]").each(function(){var c=$(this)[0];c.removeAttribute("v-model")}),$(s).children('[class^="col-sm-"]').children("*").each(function(){var c=$(this)[0];Array.from(c.attributes).forEach(t=>{t.name.startsWith("v-on:")&&c.removeAttribute(t.name)})}),o.parentNode.replaceChild(s,o)}}),i.body.innerHTML.replace(/&quot;/g,"'").replace("<br>",`
`)},async saveFormDefinition({id:e,html:i}){const n=this.loadFormId!==e;if(n)try{if(await this.backend.getRawDefinition(e,{type:"form"})&&!confirm(`'${e}'는 이미 존재하는 폼 디자인 ID 입니다! 그래도 저장하시겠습니까?`))return}catch{}await this.backend.putRawDefinition(i,e,{type:"form"}),this.isOpenSaveDialog=!1,this.kEditorContentBeforeSave=this.$refs.mashup.getKEditorContentHtml(),this.isAIUpdated=!1,n&&(await this.$router.push(`/ui-definitions/${e}`),window.location.reload()),this.processDefUrlData&&(new BroadcastChannel(this.processDefUrlData.channelId).postMessage({name:this.processDefUrlData.formName,id:e}),window.close())},onClickPreviewSubmitButton(){const e=this.$refs.dynamicForm.validate();e&&e.length>0&&alert(e),this.dev.isDevMode?this.dev.previewFormValues=JSON.stringify(this.previewFormValues):alert(JSON.stringify(this.previewFormValues))},onClickPreviewApplyButton(){this.previewFormValues=JSON.parse(this.dev.previewFormValues)},async loadData(e){if(this.loadFormId=this.$route.params.pathMatch.join("/"),this.loadFormId.startsWith("/")&&(this.loadFormId=this.loadFormId.substring(1)),this.isLoadedForm=this.loadFormId&&this.loadFormId!="chat",this.isAIUpdated=!1,this.messages=[],this.isLoadedForm){try{this.storedFormDefHTML=await this.backend.getRawDefinition(this.loadFormId,{type:"form"})}catch{alert(`'${this.loadFormId}' ID 를 가지는 폼 디자인 정보가 없습니다! 새 폼 만들기 화면으로 이동됩니다.`),this.$router.push("/ui-definitions/chat"),this.isShowMashup=!0;return}const i=this.dynamicFormHTMLToKeditorContentHTML(this.storedFormDefHTML),n=this.loadHTMLToKEditorContent(i);this.applyNewSrcToMashup(n),this.isShowMashup=!0}else this.$refs.mashup&&this.$refs.mashup.clearStat(),this.isShowMashup=!0},beforeSendMessage(e){this.prevFormOutput=this.$refs.mashup.getKEditorContentHtml(),e.mentionedUsers=null,this.generator.sendMessageWithPrevFormOutput(e)},async afterModelCreated(e){this.processResponse(e)},afterGenerationFinished(e){this.processResponse(e)},processResponse(e){try{let i=this.messages[this.messages.length-1];if(i.jsonContent=this.extractLastJSON(e),i.content=i.content.replace(i.jsonContent,""),i.content.length==0&&(i.content=" "),i.jsonContent){if(i.jsonContent.htmlOutput)this.applyNewSrcToMashup(this.loadHTMLToKEditorContent(i.jsonContent.htmlOutput));else if(i.jsonContent.modifications){const n=this.getModifiedPrevFormOutput(i.jsonContent.modifications);this.applyNewSrcToMashup(this.loadHTMLToKEditorContent(n))}else console.error("알 수 없는 JSON 결과: ",JSON.stringify(i.jsonContent));this.isAIUpdated=!0}}catch(i){console.log(i)}},afterModelStopped(e){console.log(e)},extractLastJSON(e){const i=e.split("```");for(let n=i.length-1;n>=0;n--){const o=i[n];if(!o.includes("{")||!o.includes("}")||!o.includes("htmlOutput")&&!o.includes("modifications"))continue;const l=o.includes("htmlOutput");let s="";try{const c=o.match(/\{[\s\S]*\}/)[0].replaceAll(`
`,"").replaceAll("`",'"');if(l){const a=c.match(/"htmlOutput"\s*:\s*"(.*)".*}/)[1];a.includes('\\"')?s=c:s=c.replace(a,a.replaceAll('"','\\"'))}else{const a=[...c.matchAll(/items='\[(.*?)\]'>/g)].map(r=>r[1]);if(s=c,a)for(let r=0;r<a.length;r++){const f=a[r];f.includes('\\"')||(s=s.replace(f,f.replaceAll('"','\\"')))}}const t=[...s.matchAll(/items='\[(.*?)\]'>/g)].map(a=>a[1]);if(t)for(let a=0;a<t.length;a++){const r=t[a];r.includes("'")&&(s=s.replace(r,r.replaceAll("'",'\\"')))}const d=[...s.matchAll(/<code-field .*?>(.*)<\/code-field>/g)].map(a=>a[1]);if(d)for(let a=0;a<d.length;a++){const r=d[a];r.includes("\\\\")||(s=s.replace(r,r.replaceAll("\\","\\\\")))}s=s.replace(/>\\n\\/g,">"),s=s.replace(/>\\n/g,">"),s=s.replace(/>\\/g,">")}catch(c){return console.log("### 유효 문자열을 JSON에 적합한 문자열로 변환시키는 과정에서 오류 발생! ###"),console.log(c),console.log(o),null}try{return JSON.parse(s)}catch(c){return console.log("### JSON 문자열을 최종 파싱하는 과정에서 오류 발생! ###"),console.log(c),console.log(o),console.log(s),null}}return null},loadHTMLToKEditorContent(e){const i=()=>{const t=()=>Math.floor((1+Math.random())*65536).toString(16).substring(1);return t()+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()};console.log("### 로드시킬 HTML 텍스트 ###"),console.log(e);const n=new DOMParser().parseFromString(e,"text/html");n.querySelectorAll("div.row").forEach(t=>{let d=0;if($(t).children('[class^="col-sm-"]').each(function(){var a=$(this)[0];const r=a.className.match(/col-sm-(\d+)/);if(r){const f=parseInt(r[1],10);d+=f}}),d!==12){const a=document.createElement("div");a.setAttribute("class","col-sm-12"),$(t).children('[class^="col-sm-"]').each(function(){var r=$(this)[0];Array.from(r.children).forEach(f=>{a.appendChild(f)})}),t.innerHTML="",t.appendChild(a)}});let o=!1;if(n.querySelectorAll("div.row").forEach(t=>{t.parentElement.tagName.toLowerCase()!=="section"&&(o=!0)}),n.querySelectorAll("section").forEach(t=>{t.children.length!==1&&(o=!0)}),o){const t=a=>{const r=a.parentElement;for(;a.firstChild;)r.insertBefore(a.firstChild,a);r.removeChild(a)};(a=>{n.querySelectorAll(a).forEach(r=>{t(r)})})("section"),n.querySelectorAll("div.row").forEach(a=>{const r=document.createElement("section");a.parentElement.insertBefore(r,a),r.appendChild(a)})}if(n.querySelectorAll('[class^="col-sm-"]').forEach(t=>{t.setAttribute("data-type","container-content")}),Array.from(n.querySelectorAll("*")).filter(t=>t.tagName.toLowerCase().endsWith("-field")).forEach(t=>{if(["name"].forEach(a=>{if(t.hasAttribute(a)){const r=t.getAttribute(a).match(/[가-힣a-zA-Z0-9_\-. ]/g),f=r?r.join(""):a;t.setAttribute(a,f)}}),t.hasAttribute("items")){if(t.getAttribute("items").length==0)t.setAttribute("items","[]");else if(t.getAttribute("items")!=="[]")try{let a=JSON.parse(t.getAttribute("items").replace(/'/g,'"').replace(/[ ]*,[ ]*\.\.\.[ ]*,[ ]*/,",")),r=[];a.forEach(f=>{Object.keys(f).forEach(p=>{const h=f[p],E=p.match(/[가-힣a-zA-Z0-9_\-. ]/g),_=h.match(/[가-힣a-zA-Z0-9_\-. ]/g),H=E?E.join(""):"",P=_?_.join(""):"";r.push({[H]:P})})}),t.setAttribute("items",JSON.stringify(r))}catch(a){console.log(a),t.setAttribute("items","[]")}}const d=document.createElement("div");if(d.setAttribute("id",`vuemount_${i()}`),this.generator.avaliableComponentTagNames.includes(t.tagName.toLowerCase()))t.parentNode.insertBefore(d,t),d.appendChild(t);else if(t.hasAttribute("items")){const a=document.createElement("select-field");a.setAttribute("name",t.getAttribute("name")??"name"),a.setAttribute("alias",t.getAttribute("alias")??"alias"),a.setAttribute("items",t.getAttribute("items")??"[]"),t.parentNode.insertBefore(d,t),d.appendChild(a),t.parentNode.removeChild(t)}else if(t.hasAttribute("name")||t.hasAttribute("alias")){const a=document.createElement("text-field");a.setAttribute("name",t.getAttribute("name")??"name"),a.setAttribute("alias",t.getAttribute("alias")??"alias"),t.parentNode.insertBefore(d,t),d.appendChild(a),t.parentNode.removeChild(t)}else t.parentNode.removeChild(t)}),n.body.querySelectorAll("section").length==0){const t=Array.from(n.body.querySelectorAll(".row"));n.body.innerHTML=t.map(d=>{const a=document.createElement("section");return a.innerHTML=d.outerHTML,a.outerHTML}).join("").replace(/&quot;/g,"'")}Array.from(n.body.querySelectorAll("section")).forEach(t=>{t.setAttribute("class","keditor-container")});const c=Array.from(n.body.children).map(t=>t.outerHTML).join("").replace(/&quot;/g,"'").replace("<br>",`
`);return console.log("### 로드된 유효 HTML 텍스트 ###"),console.log(c),c},applyNewSrcToMashup(e){this.kEditorInput=e,this.mashupKey+=1,this.currentTabName==="preview"&&this.$nextTick(()=>{this.applyToPreviewTab()})},getModifiedPrevFormOutput(e){const i=new DOMParser().parseFromString(this.prevFormOutput,"text/html");e.forEach(o=>{if(o.action==="addAsChild"){const l=i.querySelector(o.targetCSSSelector),s=new DOMParser().parseFromString(o.tagValue,"text/html");l.appendChild(s.body.firstChild)}else if(o.action==="addAfter"){const l=i.querySelector(o.targetCSSSelector),s=new DOMParser().parseFromString(o.tagValue,"text/html");l.parentNode.insertBefore(s.body.firstChild,l.nextSibling)}else if(o.action=="replace"){const l=i.querySelector(o.targetCSSSelector),s=new DOMParser().parseFromString(o.tagValue,"text/html");l.parentNode.replaceChild(s.body.firstChild,l)}else if(o.action==="delete"){const l=i.querySelector(o.targetCSSSelector);l.parentNode.removeChild(l)}});const n=i.body.outerHTML.replace(/&quot;/g,"'").replace("<br>",`
`);return console.log("### 수정된 이전 폼 출력 ###"),console.log(n),n},applyToPreviewTab(){var e=this;e.isShowPreview=!1,e.$try({context:e,action:async()=>{e.previewHTML=e.keditorContentHTMLToDynamicFormHTML(e.$refs.mashup.getKEditorContentHtml())},onFail:()=>{e.previewHTML=""}}),e.previewFormValues={},e.isShowPreview=!0,e.$nextTick(()=>{e.dev.previewFormValues=JSON.stringify(e.previewFormValues)})},async deleteForm(){var e=this;e.$try({context:e,action:async()=>{await this.backend.deleteDefinition(this.loadFormId,{type:"form"}),this.isOpenDeleteDialog=!1,await this.$router.push("/ui-definitions/chat"),window.location.reload()},successMsg:this.$t("successMsg.delete")})}},beforeDestroy(){this.kEditorInput=null},async beforeRouteLeave(e,i,n){if(!this.$refs.mashup)return n();this.isAIUpdated||this.$refs.mashup.getKEditorContentHtml()!=this.kEditorContentBeforeSave?window.confirm(this.$t("changePath"))?n():n(!1):n()}},ie={class:"no-scrollbar"},oe={class:"d-flex flex-row-reverse",style:{height:"0px",position:"relative",bottom:"35px",left:"10px"}},re={key:1,class:"d-flex align-center justify-center fill-height"},ne=A("적용"),le=A("제출"),de={key:1,class:"d-flex align-center justify-center fill-height"},ce={class:"d-flex flex-row-reverse",style:{height:"0px",position:"relative",bottom:"35px",left:"10px"}};function ue(e,i,n,o,l,s){const c=b("Icons"),t=b("TrashIcon"),d=b("Chat"),a=b("mashup"),r=b("DynamicForm"),f=b("AppBaseCard"),p=b("form-design-save-panel");return v(),S(T,null,[u(k,{elevation:"10"},{default:m(()=>[u(f,null,{leftpart:m(()=>[C("div",ie,[u(d,{chatInfo:e.chatInfo,messages:e.messages,userInfo:e.userInfo,type:"form",onSendMessage:s.beforeSendMessage,onSendEditedMessage:e.sendEditedMessage,onStopMessage:e.stopMessage},{"custom-tools":m(()=>[C("div",oe,[u(w,null,{activator:m(({props:h})=>[u(y,D(h,{icon:"",variant:"text",class:"text-medium-emphasis",onClick:s.openSaveDialog}),{default:m(()=>[u(c,{icon:"save"})]),_:2},1040,["onClick"])]),default:m(()=>[C("span",null,g(e.$t("uiDefinition.save")),1)]),_:1}),u(w,null,{activator:m(({props:h})=>[e.isLoadedForm?(v(),M(y,D({key:0},h,{icon:"",variant:"text",class:"text-medium-emphasis",onClick:s.openDeleteDialog}),{default:m(()=>[u(t,{size:"24"})]),_:2},1040,["onClick"])):F("",!0)]),default:m(()=>[C("span",null,g(e.$t("uiDefinition.deleteForm")),1)]),_:1})])]),_:1},8,["chatInfo","messages","userInfo","onSendMessage","onSendEditedMessage","onStopMessage"])])]),rightpart:m(()=>[u(z,{modelValue:e.currentTabName,"onUpdate:modelValue":i[0]||(i[0]=h=>e.currentTabName=h),style:{position:"fixed","z-index":"999"},color:"primary","fixed-tabs":""},{default:m(()=>[u(I,{value:"edit"},{default:m(()=>[A(g(e.$t("uiDefinition.redaction")),1)]),_:1}),u(I,{value:"preview"},{default:m(()=>[A(g(e.$t("uiDefinition.preview")),1)]),_:1})]),_:1},8,["modelValue"]),u(G,{modelValue:e.currentTabName,"onUpdate:modelValue":i[4]||(i[4]=h=>e.currentTabName=h),class:"fill-height"},{default:m(()=>[u(N,{value:"edit",class:"fill-height mt-12",style:{"overflow-y":"auto"}},{default:m(()=>[e.isShowMashup?(v(),M(a,{ref:"mashup",modelValue:e.kEditorInput,"onUpdate:modelValue":i[1]||(i[1]=h=>e.kEditorInput=h),key:e.mashupKey,onOnSaveFormDefinition:s.saveFormDefinition,onOnInitKEditorContent:s.updateKEditorContentBeforeSave},null,8,["modelValue","onOnSaveFormDefinition","onOnInitKEditorContent"])):(v(),S("div",re,[u(V,{color:"primary",indeterminate:""})]))]),_:1}),u(N,{value:"preview",class:"fill-height mt-10 pa-5",style:{"overflow-y":"auto"}},{default:m(()=>[e.isShowPreview?(v(),S(T,{key:0},[u(r,{ref:"dynamicForm",formHTML:e.previewHTML,modelValue:e.previewFormValues,"onUpdate:modelValue":i[2]||(i[2]=h=>e.previewFormValues=h)},null,8,["formHTML","modelValue"]),e.dev.isDevMode?(v(),S(T,{key:0},[u(Q,{label:"previewFormValuesToTest",rows:"10",modelValue:e.dev.previewFormValues,"onUpdate:modelValue":i[3]||(i[3]=h=>e.dev.previewFormValues=h)},null,8,["modelValue"]),u(y,{color:"primary",class:"full-width my-5",onClick:s.onClickPreviewApplyButton},{default:m(()=>[ne]),_:1},8,["onClick"])],64)):F("",!0),u(Z,{class:"ma-0 pa-0"},{default:m(()=>[u(X),u(y,{color:"primary",onClick:s.onClickPreviewSubmitButton,rounded:""},{default:m(()=>[le]),_:1},8,["onClick"])]),_:1})],64)):(v(),S("div",de,[u(V,{color:"primary",indeterminate:""})]))]),_:1})]),_:1},8,["modelValue"])]),mobileLeftContent:m(()=>[u(d,{chatInfo:e.chatInfo,messages:e.messages,userInfo:e.userInfo,type:"form",onSendMessage:s.beforeSendMessage,onSendEditedMessage:e.sendEditedMessage,onStopMessage:e.stopMessage},{"custom-tools":m(()=>[C("div",ce,[u(w,null,{activator:m(({props:h})=>[u(y,D(h,{icon:"",variant:"text",class:"text-medium-emphasis",onClick:s.openSaveDialog}),{default:m(()=>[u(c,{icon:"save"})]),_:2},1040,["onClick"])]),default:m(()=>[C("span",null,g(e.$t("uiDefinition.save")),1)]),_:1}),u(w,{location:"bottom"},{activator:m(({props:h})=>[e.isLoadedForm?(v(),M(y,D({key:0},h,{icon:"",variant:"text",class:"text-medium-emphasis",onClick:s.openDeleteDialog}),{default:m(()=>[u(t,{size:"24"})]),_:2},1040,["onClick"])):F("",!0)]),default:m(()=>[C("span",null,g(e.$t("uiDefinition.deleteForm")),1)]),_:1})])]),_:1},8,["chatInfo","messages","userInfo","onSendMessage","onSendEditedMessage","onStopMessage"])]),_:1})]),_:1}),u(O,{modelValue:e.isOpenSaveDialog,"onUpdate:modelValue":i[6]||(i[6]=h=>e.isOpenSaveDialog=h)},{default:m(()=>[u(p,{onOnClose:i[5]||(i[5]=h=>e.isOpenSaveDialog=!1),onOnSave:s.tryToSaveFormDefinition,savedId:e.loadFormId==="chat"?null:e.loadFormId,formNameByUrl:e.formNameByUrl},null,8,["onOnSave","savedId","formNameByUrl"])]),_:1},8,["modelValue"]),u(O,{modelValue:e.isOpenDeleteDialog,"onUpdate:modelValue":i[8]||(i[8]=h=>e.isOpenDeleteDialog=h),"max-width":"500"},{default:m(()=>[u(k,null,{default:m(()=>[u(Y,null,{default:m(()=>[A(g(e.$t("uiDefinition.deleteFormMessage")),1)]),_:1}),u(ee,{class:"justify-center pt-0"},{default:m(()=>[u(y,{color:"primary",variant:"flat",onClick:s.deleteForm},{default:m(()=>[A(g(e.$t("uiDefinition.delete")),1)]),_:1},8,["onClick"]),u(y,{color:"error",variant:"flat",onClick:i[7]||(i[7]=h=>e.isOpenDeleteDialog=!1)},{default:m(()=>[A(g(e.$t("uiDefinition.cancel")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}const Me=J(se,[["render",ue],["__scopeId","data-v-d2c758e0"]]);export{Me as default};
