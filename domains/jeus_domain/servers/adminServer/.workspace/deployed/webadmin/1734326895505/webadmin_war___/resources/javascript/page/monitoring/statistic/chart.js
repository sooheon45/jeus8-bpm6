define(["jquery","d3","nv"],function(e,t,n){return function(r,i,s){var o,u,a,f,l,c,h,p,d,v,m;return s==null&&(s=30),d={},f=0,a=t.scale.category20(),c=[],u=function(){return e(".checkStat:not(:checked)").each(function(){return e(this).parent().css("color","black")}),c=e(".checkStat:checked").map(function(){var t,n,r;return t=e(this),r=t.val(),n=a(r),t.parent().css("color",n),{id:r,color:n}}).get()},l=function(e){var t,n,r,i,s;s=[];for(n=0,i=c.length;n<i;n++)r=c[n],t=e[r.id],t.color=r.color,s.push(t);return s},m=function(t){return e(".checkStat").each(function(){var n,r;return n=e(this),r=n.val(),n.parent().next().html(t[r].value)})},v=function(){return t.json(r,function(t,n){var r,i,o;if(t)return t.responseText&&e("#description .message").html('<pre class="error01">'+t.responseText+"</pre>"),clearInterval(h);if(!e.isEmptyObject(n)){f++;for(o in n)r=n[o],d[o]==null&&(d[o]={name:r.name,key:o,values:[]}),d[o].values.push({x:r.lastSampleTime,y:r.value}),f>s&&d[o].values.shift();return m(n),i=l(d),p(i)}})},o=n.models.lineChart().showLegend(!1).width(830).height(450).margin({top:30,right:70,botton:20,left:100}).tooltips(!0).tooltipContent(function(e,t,n,r,i){return"<p>"+n+" at "+t+"</p>"}),o.xAxis.tickFormat(function(e){return t.time.format("%X")(new Date(e))}).ticks(10),o.yAxis.tickFormat(t.format(",f")),p=function(e){return n.addGraph(function(){return t.select("#chart svg").datum(e).transition().duration(500).call(o),o})},e(".checkStat").on("change",function(){var e;return u(),e=l(d),p(e)}),u(),v(),h=setInterval(v,i*1e3)}});