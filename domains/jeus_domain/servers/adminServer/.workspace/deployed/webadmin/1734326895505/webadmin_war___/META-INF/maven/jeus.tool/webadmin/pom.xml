<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
	<modelVersion>4.0.0</modelVersion>
	<parent>
		<groupId>jeus.tool</groupId>
		<artifactId>jeus</artifactId>
		<version>0.0.1-SNAPSHOT</version>
		<relativePath>jeus-pom.xml</relativePath>
	</parent>
	<artifactId>webadmin</artifactId>

	<packaging>war</packaging>
	<name>${project.artifactId}</name>

	<properties>
		<spring.version>4.3.18.RELEASE</spring.version>
		<spring.security.version>4.2.7.RELEASE</spring.security.version>
		<logback.version>1.1.3</logback.version>
		<junit.version>4.12</junit.version>
		<org.mockito.version>1.10.19</org.mockito.version>
		<scala.version>2.11.10</scala.version>
		<scala.plugin.version>3.2.0</scala.plugin.version>
		<scalatest.version>3.2.0-SNAP10</scalatest.version>
		<scalate.version>1.9.0</scalate.version>
		<rhino-version>1.7R5</rhino-version>
		<coffee.version>1.4.16</coffee.version>
		<less.version>1.7.0.1.1</less.version>
		<less.optimize>false</less.optimize>
		
		<jackson.version>2.9.6</jackson.version>
		<lucene.version>4.2.1</lucene.version>
		<http.client.version>4.5.6</http.client.version>
		<validation.version>1.0.0.GA</validation.version>
		<joda.version>2.7</joda.version>
		<guava.version>21.0</guava.version>
		<parboiled.version>2.1.4</parboiled.version>
		<requirejs.version>2.0.0</requirejs.version>
		
		<jaxb.bind.version>2.3.1</jaxb.bind.version>
		<jaxb2.basics.version>0.12.0</jaxb2.basics.version>
		
		<jdk.target.version>1.7</jdk.target.version>
		<maven.plugin.version>3.1.0</maven.plugin.version>
		<maven.compiler.version>3.8.0</maven.compiler.version>
		<maven.surefire.version>2.22.1</maven.surefire.version>
		
		<docbase>${project.basedir}/src/main/webapp</docbase>
	</properties>

	<pluginRepositories>
		<pluginRepository>
			<id>snapshots</id>
			<name>Hera Snapshots Repository</name>
			<url>http://192.168.1.245:8081/nexus/content/repositories/snapshots</url>
		</pluginRepository>
	</pluginRepositories>	
	<dependencyManagement>
		<dependencies>
			<dependency>
				<groupId>org.springframework</groupId>
				<artifactId>spring-tx</artifactId>
				<version>${spring.version}</version>
			</dependency>
			<dependency>
				<groupId>org.springframework</groupId>
				<artifactId>spring-jdbc</artifactId>
				<version>${spring.version}</version>
			</dependency>
			<dependency>
				<groupId>org.springframework</groupId>
				<artifactId>spring-core</artifactId>
				<version>${spring.version}</version>
			</dependency>
			<dependency>
				<groupId>org.springframework</groupId>
				<artifactId>spring-aop</artifactId>
				<version>${spring.version}</version>
			</dependency>
			
			<dependency>
				<groupId>org.scala-lang</groupId>
				<artifactId>scala-library</artifactId>
				<version>${scala.version}</version>
			</dependency>
			<dependency>
				<groupId>org.scala-lang</groupId>
				<artifactId>scala-compiler</artifactId>
				<version>${scala.version}</version>
			</dependency>

			<dependency>
				<groupId>javax.validation</groupId>
				<artifactId>validation-api</artifactId>
				<version>${validation.version}</version>
				<scope>provided</scope>
			</dependency>
		</dependencies>
	</dependencyManagement>
	<dependencies>
		<!-- Spring -->
		<dependency>
			<groupId>org.springframework</groupId>
			<artifactId>spring-context</artifactId>
			<version>${spring.version}</version>
		</dependency>
		<dependency>
			<groupId>org.springframework</groupId>
			<artifactId>spring-context-support</artifactId>
			<version>${spring.version}</version>
		</dependency>
		<dependency>
			<groupId>org.springframework</groupId>
			<artifactId>spring-test</artifactId>
			<version>${spring.version}</version>
			<scope>test</scope>
		</dependency>

		<dependency>
			<groupId>org.springframework</groupId>
			<artifactId>spring-webmvc</artifactId>
			<version>${spring.version}</version>
		</dependency>


		<!-- Spring Security -->
		<dependency>
			<groupId>org.springframework.security</groupId>
			<artifactId>spring-security-core</artifactId>
			<version>${spring.security.version}</version>
		</dependency>

		<dependency>
			<groupId>org.springframework.security</groupId>
			<artifactId>spring-security-config</artifactId>
			<version>${spring.security.version}</version>
		</dependency>

		<dependency>
			<groupId>org.springframework.security</groupId>
			<artifactId>spring-security-web</artifactId>
			<version>${spring.security.version}</version>
		</dependency>

		<!-- ETC -->
		<dependency>
			<groupId>joda-time</groupId>
			<artifactId>joda-time</artifactId>
			<version>${joda.version}</version>
		</dependency>

		<dependency>
			<groupId>com.fasterxml.jackson.core</groupId>
			<artifactId>jackson-core</artifactId>
			<version>${jackson.version}</version>
		</dependency>
		<dependency>
			<groupId>com.fasterxml.jackson.core</groupId>
			<artifactId>jackson-annotations</artifactId>
			<version>${jackson.version}</version>
		</dependency>
		<dependency>
			<groupId>com.fasterxml.jackson.core</groupId>
			<artifactId>jackson-databind</artifactId>
			<version>${jackson.version}</version>
		</dependency>
		<dependency>
			<groupId>com.fasterxml.jackson.module</groupId>
			<artifactId>jackson-module-scala_2.11</artifactId>
			<version>${jackson.version}</version>
		</dependency>		
		<dependency>
			<groupId>com.google.guava</groupId>
			<artifactId>guava</artifactId>
			<version>${guava.version}</version>
		</dependency>		
		<dependency>
			<groupId>org.apache.lucene</groupId>
			<artifactId>lucene-core</artifactId>
			<version>${lucene.version}</version>
		</dependency>
		
		<dependency>
			<groupId>org.apache.lucene</groupId>
			<artifactId>lucene-analyzers-common</artifactId>
			<version>${lucene.version}</version>
		</dependency>
		
		<dependency>
			<groupId>org.apache.lucene</groupId>
			<artifactId>lucene-queryparser</artifactId>
			<version>${lucene.version}</version>
		</dependency>		

		<dependency>
			<groupId>org.apache.lucene</groupId>
			<artifactId>lucene-analyzers-korean</artifactId>
			<version>${lucene.version}</version>
			<scope>system</scope>
			<systemPath>${basedir}/lib/koreananalyzer.4x-20130409.jar</systemPath>
		</dependency>

		<dependency>
			<groupId>org.apache.httpcomponents</groupId>
			<artifactId>httpclient</artifactId>
			<version>${http.client.version}</version>	
		</dependency>

	<!-- Scala -->
	<dependency>
		<groupId>org.scala-lang</groupId>
		<artifactId>scala-library</artifactId>
		<version>${scala.version}</version>
	</dependency>

	<dependency>
		<groupId>org.scala-lang</groupId>
		<artifactId>scala-reflect</artifactId>
		<version>${scala.version}</version>
	</dependency>

	<dependency>
		<groupId>org.scala-lang</groupId>
		<artifactId>scalap</artifactId>
		<version>${scala.version}</version>
	</dependency>

	<!-- Scalate -->
	<dependency>
		<groupId>org.scalatra.scalate</groupId>
		<artifactId>scalate-core_2.11</artifactId>
		<version>${scalate.version}</version>
	</dependency>

	<dependency>
		<groupId>org.scalatra.scalate</groupId>
		<artifactId>scalate-spring-mvc_2.11</artifactId>
		<version>${scalate.version}</version>
	</dependency>

	<!-- Coffescript compiler -->
	<dependency>
		<groupId>org.mozilla</groupId>
		<artifactId>rhino</artifactId>
		<version>${rhino-version}</version>
	</dependency>

	<!-- upload
	<dependency>
		<groupId>commons-fileupload</groupId>
		<artifactId>commons-fileupload</artifactId>
		<version>1.3.3</version>
	</dependency> -->

	<!-- parser -->
	<dependency>
		<groupId>org.parboiled</groupId>
		<artifactId>parboiled_2.11</artifactId>
		<version>${parboiled.version}</version>
	</dependency>

	<!-- Test -->
	<dependency>
		<groupId>junit</groupId>
		<artifactId>junit</artifactId>
		<version>${junit.version}</version>
		<scope>test</scope>
	</dependency>
	<dependency>
		<groupId>org.mockito</groupId>
		<artifactId>mockito-all</artifactId>
		<version>${org.mockito.version}</version>
		<scope>test</scope>
	</dependency>

	<dependency>
		<groupId>org.scalatest</groupId>
		<artifactId>scalatest_2.11</artifactId>
		<version>${scalatest.version}</version>
		<scope>test</scope>
	</dependency>

	<dependency>
		<groupId>javax.xml.bind</groupId>
		<artifactId>jaxb-api</artifactId>
		<version>${jaxb.bind.version}</version>
		<scope>test</scope>
	</dependency>

	<dependency>
		<groupId>com.sun.xml.bind</groupId>
		<artifactId>jaxb-xjc</artifactId>
		<version>${jaxb.bind.version}</version>
		<scope>test</scope>
	</dependency>

	<dependency>
		<groupId>org.jvnet.jaxb2_commons</groupId>
		<artifactId>jaxb2-basics-runtime</artifactId>
		<version>${jaxb2.basics.version}</version>
		<scope>test</scope>
	</dependency>

</dependencies>

<build>
	<finalName>${project.name}</finalName>
	<pluginManagement>
		<plugins>
			<plugin>
				<artifactId>maven-assembly-plugin</artifactId>
			</plugin>
			<!--This plugin's configuration is used to store Eclipse m2e settings only. It has no influence on the Maven build itself.-->
			<plugin>
				<groupId>org.eclipse.m2e</groupId>
				<artifactId>lifecycle-mapping</artifactId>
				<version>1.0.0</version>
				<configuration>
					<lifecycleMappingMetadata>
						<pluginExecutions>
							<pluginExecution>
								<pluginExecutionFilter>
									<groupId>
										net.alchim31.maven
									</groupId>
									<artifactId>
										scala-maven-plugin
									</artifactId>
									<versionRange>
										[3.2.0,)
									</versionRange>
									<goals>
										<goal>compile</goal>
										<goal>testCompile</goal>
									</goals>
								</pluginExecutionFilter>
								<action>
									<ignore></ignore>
								</action>
							</pluginExecution>
						</pluginExecutions>
					</lifecycleMappingMetadata>
				</configuration>
			</plugin>
		</plugins>
	</pluginManagement>
	<plugins>
		<plugin>
			<groupId>org.apache.maven.plugins</groupId>
			<artifactId>maven-resources-plugin</artifactId>
			<version>${maven.plugin.version}</version>
			<configuration>
				<encoding>UTF-8</encoding>
			</configuration>
		</plugin>			
		<plugin>
			<groupId>org.apache.maven.plugins</groupId>
			<artifactId>maven-compiler-plugin</artifactId>
			<version>${maven.compiler.version}</version>
			<configuration>
				<source>${jdk.target.version}</source>
				<target>${jdk.target.version}</target>
				<encoding>UTF-8</encoding>
			</configuration>
		</plugin>

		<plugin>
			<groupId>org.apache.maven.plugins</groupId>
			<artifactId>maven-surefire-plugin</artifactId>
			<version>${maven.surefire.version}</version>
			<configuration>
				<argLine>-Xmx512m</argLine> <!-- -XX:MaxPermSize=128m -->
				<testFailureIgnore>false</testFailureIgnore>
				<failIfNoTests>false</failIfNoTests>
				<enableAssertions>false</enableAssertions>
			</configuration>
		</plugin>
      	<plugin>
    		<groupId>net.alchim31.maven</groupId>
        	<artifactId>scala-maven-plugin</artifactId>
			<version>3.2.0</version>
        	<executions>
	        	<execution>
		            <goals>
		            	<goal>compile</goal>
		            	<goal>testCompile</goal>
		            </goals>
		        </execution>
        	</executions>
			<configuration>
				<jvmArgs>
					<jvmArg>-Xms64m</jvmArg>
					<jvmArg>-Xmx1024m</jvmArg>
				</jvmArgs>
				<scalaVersion>${scala.version}</scalaVersion>
			</configuration>
    	</plugin>
		<plugin>
			<groupId>org.lesscss</groupId>
			<artifactId>lesscss-maven-plugin</artifactId>
			<version>${less.version}</version>
			<configuration>
				<sourceDirectory>${project.basedir}/src/main/webapp/resources/less</sourceDirectory>
				<outputDirectory>${docbase}/resources/less</outputDirectory>
				<compress>${less.optimize}</compress>
				<force>true</force>
			</configuration>
			<executions>
				<execution>
					<phase>prepare-package</phase>
					<goals>
						<goal>compile</goal>
					</goals>
				</execution>
			</executions>
		</plugin>		
			<plugin>
				<groupId>com.theoryinpractise</groupId>
				<artifactId>coffee-maven-plugin</artifactId>
				<version>${coffee.version}</version>
				<configuration>
					<coffeeDir>${basedir}/src/main/webapp/resources/javascript</coffeeDir>
					<coffeeOutputDirectory>${basedir}/src/main/webapp/resources/javascript</coffeeOutputDirectory>
					<compileIndividualFiles>true</compileIndividualFiles>
					<preserveSubDirectory>true</preserveSubDirectory>
					<bare>true</bare>
				</configuration>
				<executions>
					<execution>
						<id>coffee</id>
						<goals>
							<goal>coffee</goal>
						</goals>
						<phase>prepare-package</phase>
					</execution>
				</executions>
			</plugin>
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-war-plugin</artifactId>
				<version>${maven.plugin.version}</version>
				<configuration>
					<webResources> 
						<resource> 
							<directory>${basedir}/lib</directory> 
							<targetPath>WEB-INF/lib</targetPath> 
						</resource> 
					</webResources> 
					<archive>
						<manifest>
							<addClasspath>false</addClasspath>
							<classpathPrefix>/WEB-INF/lib/</classpathPrefix>
						</manifest>
					</archive>
					<archiveClasses>false</archiveClasses>
					<attachClasses>false</attachClasses>
				</configuration>
			</plugin>
			<plugin>
				<artifactId>maven-clean-plugin</artifactId>
				<version>${maven.plugin.version}</version>
				<configuration>
					<filesets>
						<fileset>
							<directory>src/main/webapp/WEB-INF/classes</directory>
							<includes>
								<include>**</include>
							</includes>
						</fileset>
						<fileset>
							<directory>src/main/webapp/WEB-INF/lib</directory>
							<includes>
								<include>**</include>
							</includes>
						</fileset>
						<fileset>
							<directory>src/main/webapp/resources</directory>
							<includes>
								<include>less/*.css</include>
								<include>javascript/jeus/*.js</include>
								<include>javascript/page/**/*.js</include>
								<include>javascript/main.js</include>
							</includes>
						</fileset>
					</filesets>
				</configuration>
			</plugin>
		</plugins>
	</build>
	<profiles>
		<profile>
			<id>precompile</id>
			<build>
				<plugins>
					<plugin>
						<groupId>org.scalatra.scalate</groupId>
						<artifactId>maven-scalate-plugin_2.11</artifactId>
						<version>1.7.1</version>
						<executions>
							<execution>
								<goals>
									<goal>precompile</goal>
								</goals>
							</execution>
						</executions>
					</plugin>					
				</plugins>
			</build>
		</profile> 
		<profile>
			<id>distribute</id>
			<properties>
				<docbase>${project.build.directory}/${project.build.finalName}</docbase>
				<less.optimize>true</less.optimize>
				<localization.name>default</localization.name>
			</properties>
			<build>
				<plugins>
					<plugin>
						<artifactId>maven-clean-plugin</artifactId>
						<version>${maven.plugin.version}</version>
						<configuration>
							<filesets>
								<fileset>
									<directory>src/main/webapp/WEB-INF/classes</directory>
									<includes>
										<include>**</include>
									</includes>
								</fileset>
								<fileset>
									<directory>src/main/webapp/WEB-INF/lib</directory>
									<includes>
										<include>**</include>
									</includes>
								</fileset>
								<fileset>
									<directory>src/main/webapp/resources</directory>
									<includes>
										<include>less/*.css</include>
										<include>javascript/jeus/*.js</include>
										<include>javascript/page/**/*.js</include>
										<include>javascript/main.js</include>
									</includes>
								</fileset>
								<fileset>
									<directory>${jeus.deploy.path}/${project.build.finalName}</directory>
									<includes>
										<include>**</include>
									</includes>
								</fileset>								
							</filesets>
						</configuration>
						<executions>
							<execution>
								<id>package</id>
								<phase>package</phase>
								<goals>
									<goal>clean</goal>
								</goals>
								<configuration>
									<filesets>
										<fileset>
											<directory>src/main/webapp/resources</directory>
											<includes>
												<include>less/*.css</include>
												<include>javascript/jeus/*.js</include>
												<include>javascript/page/**/*.js</include>
												<include>javascript/main.js</include>
											</includes>
										</fileset>
									</filesets>
								</configuration>								
							</execution>
						</executions>						
					</plugin>
					<plugin>
						<groupId>com.github.mcheely</groupId>
						<artifactId>requirejs-maven-plugin</artifactId>
						<version>${requirejs.version}</version>
						<executions>
							<execution>
								<phase>prepare-package</phase>
								<goals>
									<goal>optimize</goal>
								</goals>
							</execution>
						</executions>
						<configuration>
							<!-- path to optimizer json config file -->
							<configFile>
								${basedir}/src/main/script/app.build.js
							</configFile>
							<!-- optional path to optimizer executable -->
							<optimizerFile>
								${basedir}/src/main/script/r.js
							</optimizerFile>
						    <!--
						        Whether or not to process configFile with maven filters.
						        If you use this option, some options in your configFile
						        must resolve to absolute paths (see below)
						    -->
						    <filterConfig>
						    	true
						    </filterConfig>
						    <!-- Skip requirejs optimization if true -->
						    <skip>
						    	false
						    </skip>
						</configuration>
					</plugin>
					<plugin>
						<artifactId>maven-antrun-plugin</artifactId>
						<version>1.3</version> <!-- ant 1.7.1 지원. 1.4이후는 1.8.1부터 지원 -->
						<executions>
							<execution>
								<id>create-requirejs-output-dir</id>
								<phase>process-resources</phase>
								<configuration>
									<tasks>
										<mkdir dir="${basedir}/target/requirejs-output"/>
									</tasks>
								</configuration>
								<goals>
									<goal>run</goal>
								</goals>
							</execution>
						</executions>
					</plugin>					
					<plugin>
						<groupId>org.apache.maven.plugins</groupId>
						<artifactId>maven-war-plugin</artifactId>
						<version>${maven.plugin.version}</version>
						<configuration>
							<includeEmptyDirs>true</includeEmptyDirs>
							<outputDirectory>${jeus.deploy.path}</outputDirectory>
							<archive>
								<manifestEntries>
									<Built-By>TmaxSoft</Built-By>
									<Jeus-Use-Graceful-Redeploy>true</Jeus-Use-Graceful-Redeploy>
								</manifestEntries>
							</archive>
							<webResources> 
								<resource> 
									<directory>${basedir}/lib</directory> 
									<targetPath>WEB-INF/lib</targetPath> 
								</resource> 
								<resource> 
									<directory>${basedir}/target/requirejs-output</directory> 
									<targetPath>resources/javascript</targetPath> 
								</resource> 
								<resource> 
									<directory>localization/${localization.name}</directory> 
									<targetPath>/</targetPath> 
								</resource> 
							</webResources> 
							<packagingExcludes>
								resources/**/*.less,
								resources/**/*.coffee,
								codekit-config.json
							</packagingExcludes>
						</configuration>
						<executions>
							<execution>
								<id>default-war</id>
								<phase>package</phase>
								<goals>
									<goal>war</goal>
								</goals>
							</execution>
						</executions>
					</plugin>
				</plugins>
			</build>
		</profile>
		<profile>
			<id>model</id>
			<build>
				<plugins>
					<plugin>
						<groupId>org.codehaus.mojo</groupId>
						<artifactId>jaxb2-maven-plugin</artifactId>
						<executions>
							<execution>
								<id>xjc</id>
								<goals>
									<goal>xjc</goal>
								</goals>
							</execution>
						</executions>
						<configuration>
							<clearOutputDir>false</clearOutputDir>
							<verbose>true</verbose>
							<extension>true</extension>

							<schemaDirectory>src/test/resources/schema</schemaDirectory>
							<schemaFiles>jeus-domain.xsd</schemaFiles>

							<bindingDirectory>src/test/resources/schema</bindingDirectory>
							<bindingFiles>jeus-domain.xjb</bindingFiles>

							<outputDirectory>src/test/java</outputDirectory>
							<packageName>jeus.tool.xml.binding</packageName>
							<enableIntrospection>true</enableIntrospection>
							<!-- <args>-XtoString -Xequals</args> -->
							<arguments>-Xequals -Xsetters -Xsetters-mode=direct</arguments>
						</configuration>
						<dependencies>
							<dependency>
								<groupId>org.jvnet.jaxb2_commons</groupId>
								<artifactId>jaxb2-basics</artifactId>
								<version>${jaxb2.basics.version}</version>
							</dependency>
						</dependencies>
					</plugin>
				</plugins>
			</build>
		</profile>
		<profile>
			<id>license</id>
			<build>
				<plugins>
					<plugin>
						<groupId>org.apache.maven.plugins</groupId>
						<artifactId>maven-surefire-plugin</artifactId>
						<version>${maven.surefire.version}</version>
						<configuration>
							<skipTests>true</skipTests>
						</configuration>
					</plugin>
					<plugin>
						<artifactId>maven-clean-plugin</artifactId>
						<configuration>
							<filesets>
								<fileset>
									<directory>src/main/webapp/WEB-INF</directory>
									<includes>
										<include>licenses</include>
									</includes>
								</fileset>
							</filesets>
						</configuration>
					</plugin>
					<plugin>
						<groupId>org.codehaus.mojo</groupId>
						<artifactId>license-maven-plugin</artifactId>
						<executions>
							<execution>
								<id>download-licenses</id>
								<goals>
									<goal>download-licenses</goal>
								</goals>
								<configuration>
									<licensesOutputDirectory>src/main/webapp/WEB-INF/licenses</licensesOutputDirectory>
									<licensesOutputFile>src/main/webapp/WEB-INF/licenses/licenses.xml</licensesOutputFile>
								</configuration>
							</execution>
							<execution>
								<id>add-third-party</id>
								<goals>
									<goal>add-third-party</goal>
								</goals>
								<configuration>
									<outputDirectory>src/main/webapp/WEB-INF/licenses</outputDirectory>
								</configuration>
							</execution>
						</executions>
						<configuration>
							<excludedScopes>system,provided,test</excludedScopes>
						</configuration>
					</plugin>
				</plugins>
			</build>
		</profile>
	</profiles>

</project>
